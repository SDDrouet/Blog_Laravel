import{v as b,j as e,m as d}from"./app-CjaGCVDx.js";import{I as c}from"./InputLabel-Wztm-gaQ.js";import{T as f}from"./TextInput-CqyZKQoH.js";import{A as y}from"./AdminLayout-kcORIhX7.js";import{V as o}from"./index-ImKEloHt.js";import"./ApplicationLogo-DOnqxg94.js";function R({role:r,permissions:l}){const{data:a,setData:n,processing:m,errors:i,clearErrors:x}=b({name:(r==null?void 0:r.name)||"",permissions:Array.isArray(r==null?void 0:r.permissions)?r.permissions.map(s=>s.id):[]}),p=s=>{const t=Array.isArray(a.permissions)?a.permissions:[];t.includes(s)?n("permissions",t.filter(h=>h!==s)):n("permissions",[...t,s])},u=s=>{s.preventDefault(),x(),r?d.post(route("admin.roles.update",r.id),{...a,_method:"PUT"},{onSuccess:()=>o.success("Rol actualizado exitosamente"),onError:t=>{o.error("Hubo un problema al actualizar el rol"),setError(t)}}):d.post(route("admin.roles.store"),a,{onSuccess:()=>o.success("Rol creado exitosamente"),onError:t=>{o.error("Hubo un problema al crear el rol"),setError(t)}})};return e.jsx(y,{header:r?"Editar Rol":"Crear Rol",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-xl p-6",children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",children:"Nombre del Rol"}),e.jsx(f,{id:"name",value:a.name,onChange:s=>n("name",s.target.value),className:"w-full",required:!0}),i.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Permisos"}),e.jsx("div",{className:"overflow-x-auto rounded-lg border dark:border-gray-700 mt-2 overflow-auto max-h-60",children:e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700 dark:text-gray-300 relative",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 text-xs uppercase font-semibold sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Seleccionar"}),e.jsx("th",{className:"px-4 py-3",children:"Permiso"}),e.jsx("th",{className:"px-4 py-3",children:"DescripciÃ³n"})]})}),e.jsx("tbody",{children:l.map(s=>e.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:Array.isArray(a.permissions)&&a.permissions.includes(s.id),onChange:()=>p(s.id),className:"rounded text-rose-600 focus:ring-rose-500"})}),e.jsx("td",{className:"px-4 py-3 font-medium",children:s.name}),e.jsx("td",{className:"px-4 py-3",children:s.description})]},s.id))})]})}),i.permissions&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:i.permissions})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:m,className:"inline-flex items-center px-4 py-2 bg-rose-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-rose-500 active:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150",children:r?"Actualizar Rol":"Crear Rol"})})]})})})}export{R as default};
