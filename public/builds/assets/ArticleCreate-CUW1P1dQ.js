import{g as lt,c as zr,r as S,U as X,j as M,v as si,m as An}from"./app-CjaGCVDx.js";import{I as tr}from"./InputLabel-Wztm-gaQ.js";import{R as oi}from"./index-D6uZnyNW.js";import{S as wn}from"./SelectInput-C4b-vKpA.js";import{T as Dt}from"./TextInput-CqyZKQoH.js";import{A as li}from"./AdminLayout-kcORIhX7.js";import{V as $r}from"./index-ImKEloHt.js";import"./ApplicationLogo-DOnqxg94.js";var Me={},Fn;function fi(){if(Fn)return Me;Fn=1,Object.defineProperty(Me,"__esModule",{value:!0});for(var r=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),e={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},t={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},n={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)n["f"+a]=111+a;function u(v,D,m){D&&!("byKey"in D)&&(m=D,D=null),Array.isArray(v)||(v=[v]);var B=v.map(function(l){return c(l,D)}),E=function(b){return B.some(function(w){return f(w,b)})},p=m==null?E:E(m);return p}function i(v,D){return u(v,D)}function s(v,D){return u(v,{byKey:!0},D)}function c(v,D){var m=D&&D.byKey,B={};v=v.replace("++","+add");var E=v.split("+"),p=E.length;for(var l in e)B[e[l]]=!1;var b=!0,w=!1,F=void 0;try{for(var I=E[Symbol.iterator](),L;!(b=(L=I.next()).done);b=!0){var $=L.value,W=$.endsWith("?")&&$.length>1;W&&($=$.slice(0,-1));var q=h($),U=e[q];if($.length>1&&!U&&!t[$]&&!n[q])throw new TypeError('Unknown modifier: "'+$+'"');(p===1||!U)&&(m?B.key=q:B.which=d($)),U&&(B[U]=W?null:!0)}}catch(j){w=!0,F=j}finally{try{!b&&I.return&&I.return()}finally{if(w)throw F}}return B}function f(v,D){for(var m in v){var B=v[m],E=void 0;if(B!=null&&(m==="key"&&D.key!=null?E=D.key.toLowerCase():m==="which"?E=B===91&&D.which===93?91:D.which:E=D[m],!(E==null&&B===!1)&&E!==B))return!1}return!0}function d(v){v=h(v);var D=n[v]||v.toUpperCase().charCodeAt(0);return D}function h(v){return v=v.toLowerCase(),v=t[v]||v,v}return Me.default=u,Me.isHotkey=u,Me.isCodeHotkey=i,Me.isKeyHotkey=s,Me.parseHotkey=c,Me.compareHotkey=f,Me.toKeyCode=d,Me.toKeyName=h,Me}var Jr=fi();const ci=lt(Jr);var fu=Symbol.for("immer-nothing"),yn=Symbol.for("immer-draftable"),je=Symbol.for("immer-state");function Ie(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var Er=Object.getPrototypeOf;function br(r){return!!r&&!!r[je]}function fr(r){var e;return r?cu(r)||Array.isArray(r)||!!r[yn]||!!((e=r.constructor)!=null&&e[yn])||ct(r)||dt(r):!1}var di=Object.prototype.constructor.toString();function cu(r){if(!r||typeof r!="object")return!1;const e=Er(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===di}function tt(r,e){ft(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,n)=>e(n,t,r))}function ft(r){const e=r[je];return e?e.type_:Array.isArray(r)?1:ct(r)?2:dt(r)?3:0}function Wt(r,e){return ft(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function du(r,e,t){const n=ft(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function vi(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function ct(r){return r instanceof Map}function dt(r){return r instanceof Set}function ar(r){return r.copy_||r.base_}function qt(r,e){if(ct(r))return new Map(r);if(dt(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=cu(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[je];let a=Reflect.ownKeys(n);for(let u=0;u<a.length;u++){const i=a[u],s=n[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:r[i]})}return Object.create(Er(r),n)}else{const n=Er(r);if(n!==null&&t)return{...r};const a=Object.create(n);return Object.assign(a,r)}}function rn(r,e=!1){return vt(r)||br(r)||!fr(r)||(ft(r)>1&&(r.set=r.add=r.clear=r.delete=hi),Object.freeze(r),e&&Object.entries(r).forEach(([t,n])=>rn(n,!0))),r}function hi(){Ie(2)}function vt(r){return Object.isFrozen(r)}var gi={};function cr(r){const e=gi[r];return e||Ie(0,r),e}var Tr;function vu(){return Tr}function Di(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function On(r,e){e&&(cr("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function Ht(r){Kt(r),r.drafts_.forEach(mi),r.drafts_=null}function Kt(r){r===Tr&&(Tr=r.parent_)}function xn(r){return Tr=Di(Tr,r)}function mi(r){const e=r[je];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Sn(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[je].modified_&&(Ht(e),Ie(4)),fr(r)&&(r=nt(e,r),e.parent_||at(e,r)),e.patches_&&cr("Patches").generateReplacementPatches_(t[je].base_,r,e.patches_,e.inversePatches_)):r=nt(e,t,[]),Ht(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==fu?r:void 0}function nt(r,e,t){if(vt(e))return e;const n=e[je];if(!n)return tt(e,(a,u)=>Pn(r,n,e,a,u,t)),e;if(n.scope_!==r)return e;if(!n.modified_)return at(r,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let u=a,i=!1;n.type_===3&&(u=new Set(a),a.clear(),i=!0),tt(u,(s,c)=>Pn(r,n,a,s,c,t,i)),at(r,a,!1),t&&r.patches_&&cr("Patches").generatePatches_(n,t,r.patches_,r.inversePatches_)}return n.copy_}function Pn(r,e,t,n,a,u,i){if(br(a)){const s=u&&e&&e.type_!==3&&!Wt(e.assigned_,n)?u.concat(n):void 0,c=nt(r,a,s);if(du(t,n,c),br(c))r.canAutoFreeze_=!1;else return}else i&&t.add(a);if(fr(a)&&!vt(a)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;nt(r,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&at(r,a)}}function at(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&rn(e,t)}function pi(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:vu(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,u=tn;t&&(a=[n],u=jr);const{revoke:i,proxy:s}=Proxy.revocable(a,u);return n.draft_=s,n.revoke_=i,s}var tn={get(r,e){if(e===je)return r;const t=ar(r);if(!Wt(t,e))return Ci(r,t,e);const n=t[e];return r.finalized_||!fr(n)?n:n===mt(r.base_,e)?(pt(r),r.copy_[e]=Ut(n,r)):n},has(r,e){return e in ar(r)},ownKeys(r){return Reflect.ownKeys(ar(r))},set(r,e,t){const n=hu(ar(r),e);if(n!=null&&n.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const a=mt(ar(r),e),u=a==null?void 0:a[je];if(u&&u.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(vi(t,a)&&(t!==void 0||Wt(r.base_,e)))return!0;pt(r),Vt(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return mt(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,pt(r),Vt(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=ar(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){Ie(11)},getPrototypeOf(r){return Er(r.base_)},setPrototypeOf(){Ie(12)}},jr={};tt(tn,(r,e)=>{jr[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});jr.deleteProperty=function(r,e){return jr.set.call(this,r,e,void 0)};jr.set=function(r,e,t){return tn.set.call(this,r[0],e,t,r[0])};function mt(r,e){const t=r[je];return(t?ar(t):r)[e]}function Ci(r,e,t){var a;const n=hu(e,t);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(r.draft_):void 0}function hu(r,e){if(!(e in r))return;let t=Er(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Er(t)}}function Vt(r){r.modified_||(r.modified_=!0,r.parent_&&Vt(r.parent_))}function pt(r){r.copy_||(r.copy_=qt(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var Bi=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const u=t;t=e;const i=this;return function(c=u,...f){return i.produce(c,d=>t.call(this,d,...f))}}typeof t!="function"&&Ie(6),n!==void 0&&typeof n!="function"&&Ie(7);let a;if(fr(e)){const u=xn(this),i=Ut(e,void 0);let s=!0;try{a=t(i),s=!1}finally{s?Ht(u):Kt(u)}return On(u,n),Sn(a,u)}else if(!e||typeof e!="object"){if(a=t(e),a===void 0&&(a=e),a===fu&&(a=void 0),this.autoFreeze_&&rn(a,!0),n){const u=[],i=[];cr("Patches").generateReplacementPatches_(e,a,u,i),n(u,i)}return a}else Ie(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(i,...s)=>this.produceWithPatches(i,c=>e(c,...s));let n,a;return[this.produce(e,t,(i,s)=>{n=i,a=s}),n,a]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){fr(r)||Ie(8),br(r)&&(r=Ei(r));const e=xn(this),t=Ut(r,void 0);return t[je].isManual_=!0,Kt(e),t}finishDraft(r,e){const t=r&&r[je];(!t||!t.isManual_)&&Ie(9);const{scope_:n}=t;return On(n,e),Sn(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}t>-1&&(e=e.slice(t+1));const n=cr("Patches").applyPatches_;return br(r)?n(r,e):this.produce(r,a=>n(a,e))}};function Ut(r,e){const t=ct(r)?cr("MapSet").proxyMap_(r,e):dt(r)?cr("MapSet").proxySet_(r,e):pi(r,e);return(e?e.scope_:vu()).drafts_.push(t),t}function Ei(r){return br(r)||Ie(10,r),gu(r)}function gu(r){if(!fr(r)||vt(r))return r;const e=r[je];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=qt(r,e.scope_.immer_.useStrictShallowCopy_)}else t=qt(r,!0);return tt(t,(n,a)=>{du(t,n,gu(a))}),e&&(e.finalized_=!1),t}var Re=new Bi,bi=Re.produce;Re.produceWithPatches.bind(Re);Re.setAutoFreeze.bind(Re);Re.setUseStrictShallowCopy.bind(Re);Re.applyPatches.bind(Re);Re.createDraft.bind(Re);Re.finishDraft.bind(Re);var Ai={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var a=g.transform(t,e,{affinity:n});r.current=a,a==null&&r.unref()}}},wi={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var a=te.transform(t,e,{affinity:n});r.current=a,a==null&&r.unref()}}},Fi={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var a=A.transform(t,e,{affinity:n});r.current=a,a==null&&r.unref()}}},ut=new WeakMap,it=new WeakMap,yr=new WeakMap,Du=new WeakMap,Tn=new WeakMap,jn=new WeakMap,Rn=new WeakMap,g={ancestors(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,n=g.levels(r,e);return t?n=n.slice(1):n=n.slice(0,-1),n},common(r,e){for(var t=[],n=0;n<r.length&&n<e.length;n++){var a=r[n],u=e[n];if(a!==u)break;t.push(a)}return t},compare(r,e){for(var t=Math.min(r.length,e.length),n=0;n<t;n++){if(r[n]<e[n])return-1;if(r[n]>e[n])return 1}return 0},endsAfter(r,e){var t=r.length-1,n=r.slice(0,t),a=e.slice(0,t),u=r[t],i=e[t];return g.equals(n,a)&&u>i},endsAt(r,e){var t=r.length,n=r.slice(0,t),a=e.slice(0,t);return g.equals(n,a)},endsBefore(r,e){var t=r.length-1,n=r.slice(0,t),a=e.slice(0,t),u=r[t],i=e[t];return g.equals(n,a)&&u<i},equals(r,e){return r.length===e.length&&r.every((t,n)=>t===e[n])},hasPrevious(r){return r[r.length-1]>0},isAfter(r,e){return g.compare(r,e)===1},isAncestor(r,e){return r.length<e.length&&g.compare(r,e)===0},isBefore(r,e){return g.compare(r,e)===-1},isChild(r,e){return r.length===e.length+1&&g.compare(r,e)===0},isCommon(r,e){return r.length<=e.length&&g.compare(r,e)===0},isDescendant(r,e){return r.length>e.length&&g.compare(r,e)===0},isParent(r,e){return r.length+1===e.length&&g.compare(r,e)===0},isPath(r){return Array.isArray(r)&&(r.length===0||typeof r[0]=="number")},isSibling(r,e){if(r.length!==e.length)return!1;var t=r.slice(0,-1),n=e.slice(0,-1),a=r[r.length-1],u=e[e.length-1];return a!==u&&g.equals(t,n)},levels(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,n=[],a=0;a<=r.length;a++)n.push(r.slice(0,a));return t&&n.reverse(),n},next(r){if(r.length===0)throw new Error("Cannot get the next path of a root path [".concat(r,"], because it has no next index."));var e=r[r.length-1];return r.slice(0,-1).concat(e+1)},operationCanTransformPath(r){switch(r.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(r){if(r.length===0)throw new Error("Cannot get the parent path of the root path [".concat(r,"]."));return r.slice(0,-1)},previous(r){if(r.length===0)throw new Error("Cannot get the previous path of a root path [".concat(r,"], because it has no previous index."));var e=r[r.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(r,"] because it would result in a negative index."));return r.slice(0,-1).concat(e-1)},relative(r,e){if(!g.isAncestor(e,r)&&!g.equals(r,e))throw new Error("Cannot get the relative path of [".concat(r,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return r.slice(e.length)},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!r)return null;var n=[...r],{affinity:a="forward"}=t;if(r.length===0)return n;switch(e.type){case"insert_node":{var{path:u}=e;(g.equals(u,n)||g.endsBefore(u,n)||g.isAncestor(u,n))&&(n[u.length-1]+=1);break}case"remove_node":{var{path:i}=e;if(g.equals(i,n)||g.isAncestor(i,n))return null;g.endsBefore(i,n)&&(n[i.length-1]-=1);break}case"merge_node":{var{path:s,position:c}=e;g.equals(s,n)||g.endsBefore(s,n)?n[s.length-1]-=1:g.isAncestor(s,n)&&(n[s.length-1]-=1,n[s.length]+=c);break}case"split_node":{var{path:f,position:d}=e;if(g.equals(f,n)){if(a==="forward")n[n.length-1]+=1;else if(a!=="backward")return null}else g.endsBefore(f,n)?n[f.length-1]+=1:g.isAncestor(f,n)&&r[f.length]>=d&&(n[f.length-1]+=1,n[f.length]-=d);break}case"move_node":{var{path:h,newPath:v}=e;if(g.equals(h,v))return n;if(g.isAncestor(h,n)||g.equals(h,n)){var D=v.slice();return g.endsBefore(h,v)&&h.length<v.length&&(D[h.length-1]-=1),D.concat(n.slice(h.length))}else g.isSibling(h,v)&&(g.isAncestor(v,n)||g.equals(v,n))?g.endsBefore(h,n)?n[h.length-1]-=1:n[h.length-1]+=1:g.endsBefore(v,n)||g.equals(v,n)||g.isAncestor(v,n)?(g.endsBefore(h,n)&&(n[h.length-1]-=1),n[v.length-1]+=1):g.endsBefore(h,n)&&(g.equals(v,n)&&(n[v.length-1]+=1),n[h.length-1]-=1);break}}return n}};function Rr(r){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(r)}function yi(r,e){if(Rr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Rr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Oi(r){var e=yi(r,"string");return Rr(e)==="symbol"?e:String(e)}function Se(r,e,t){return e=Oi(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function se(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kn(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Nn=function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),u=2;u<n;u++)a[u-2]=arguments[u];return[...e.slice(0,t),...a,...e.slice(t)]},kr=function(e,t,n){for(var a=arguments.length,u=new Array(a>3?a-3:0),i=3;i<a;i++)u[i-3]=arguments[i];return[...e.slice(0,t),...u,...e.slice(t+n)]},Mn=kr,nn=(r,e,t)=>{if(e.length===0)throw new Error("Cannot modify the editor");for(var n=z.get(r,e),a=e.slice(),u=t(n);a.length>1;){var i=a.pop(),s=z.get(r,a);u=se(se({},s),{},{children:kr(s.children,i,1,u)})}var c=a.pop();r.children=kr(r.children,c,1,u)},hr=(r,e,t)=>{e.length===0?r.children=t(r.children):nn(r,e,n=>{if(H.isText(n))throw new Error("Cannot get the element at path [".concat(e,"] because it refers to a leaf node: ").concat(Be.stringify(n)));return se(se({},n),{},{children:t(n.children)})})},In=(r,e,t)=>nn(r,e,n=>{if(!H.isText(n))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(Be.stringify(n)));return t(n)}),xi={transform(r,e){var t=!1;switch(e.type){case"insert_node":{var{path:n,node:a}=e;hr(r,g.parent(n),P=>{var O=n[n.length-1];if(O>P.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));return Nn(P,O,a)}),t=!0;break}case"insert_text":{var{path:u,offset:i,text:s}=e;if(s.length===0)break;In(r,u,P=>{var O=P.text.slice(0,i),T=P.text.slice(i);return se(se({},P),{},{text:O+s+T})}),t=!0;break}case"merge_node":{var{path:c}=e,f=c[c.length-1],d=g.previous(c),h=d[d.length-1];hr(r,g.parent(c),P=>{var O=P[f],T=P[h],_;if(H.isText(O)&&H.isText(T))_=se(se({},T),{},{text:T.text+O.text});else if(!H.isText(O)&&!H.isText(T))_=se(se({},T),{},{children:T.children.concat(O.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(c,"] to nodes of different interfaces: ").concat(Be.stringify(O)," ").concat(Be.stringify(T)));return kr(P,h,2,_)}),t=!0;break}case"move_node":{var{path:v,newPath:D}=e,m=v[v.length-1];if(g.isAncestor(v,D))throw new Error("Cannot move a path [".concat(v,"] to new path [").concat(D,"] because the destination is inside itself."));var B=z.get(r,v);hr(r,g.parent(v),P=>Mn(P,m,1));var E=g.transform(v,e),p=E[E.length-1];hr(r,g.parent(E),P=>Nn(P,p,B)),t=!0;break}case"remove_node":{var{path:l}=e,b=l[l.length-1];if(hr(r,g.parent(l),P=>Mn(P,b,1)),r.selection){var w=se({},r.selection);for(var[F,I]of A.points(w)){var L=te.transform(F,e);if(w!=null&&L!=null)w[I]=L;else{var $=void 0,W=void 0;for(var[q,U]of z.texts(r))if(g.compare(U,l)===-1)$=[q,U];else{W=[q,U];break}var j=!1;$&&W&&(g.equals(W[1],l)?j=!g.hasPrevious(W[1]):j=g.common($[1],l).length<g.common(W[1],l).length),$&&!j?w[I]={path:$[1],offset:$[0].text.length}:W?w[I]={path:W[1],offset:0}:w=null}}r.selection=w}break}case"remove_text":{var{path:y,offset:R,text:k}=e;if(k.length===0)break;In(r,y,P=>{var O=P.text.slice(0,R),T=P.text.slice(R+k.length);return se(se({},P),{},{text:O+T})}),t=!0;break}case"set_node":{var{path:J,properties:G,newProperties:ne}=e;if(J.length===0)throw new Error("Cannot set properties on the root node!");nn(r,J,P=>{var O=se({},P);for(var T in ne){if(T==="children"||T==="text")throw new Error('Cannot set the "'.concat(T,'" property of nodes!'));var _=ne[T];_==null?delete O[T]:O[T]=_}for(var K in G)ne.hasOwnProperty(K)||delete O[K];return O});break}case"set_selection":{var{newProperties:ee}=e;if(ee==null){r.selection=null;break}if(r.selection==null){if(!A.isRange(ee))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Be.stringify(ee)," when there is no current selection."));r.selection=se({},ee);break}var re=se({},r.selection);for(var ae in ee){var me=ee[ae];if(me==null){if(ae==="anchor"||ae==="focus")throw new Error('Cannot remove the "'.concat(ae,'" selection property'));delete re[ae]}else re[ae]=me}r.selection=re;break}case"split_node":{var{path:Y,position:ie,properties:pe}=e,Ce=Y[Y.length-1];if(Y.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Y,"] because the root node cannot be split."));hr(r,g.parent(Y),P=>{var O=P[Ce],T,_;if(H.isText(O)){var K=O.text.slice(0,ie),oe=O.text.slice(ie);T=se(se({},O),{},{text:K}),_=se(se({},pe),{},{text:oe})}else{var de=O.children.slice(0,ie),ue=O.children.slice(ie);T=se(se({},O),{},{children:de}),_=se(se({},pe),{},{children:ue})}return kr(P,Ce,1,T,_)}),t=!0;break}}if(t&&r.selection){var ye=se({},r.selection);for(var[ke,C]of A.points(ye))ye[C]=te.transform(ke,e);r.selection=ye}}},Si={insertNodes(r,e,t){r.insertNodes(e,t)},liftNodes(r,e){r.liftNodes(e)},mergeNodes(r,e){r.mergeNodes(e)},moveNodes(r,e){r.moveNodes(e)},removeNodes(r,e){r.removeNodes(e)},setNodes(r,e,t){r.setNodes(e,t)},splitNodes(r,e){r.splitNodes(e)},unsetNodes(r,e,t){r.unsetNodes(e,t)},unwrapNodes(r,e){r.unwrapNodes(e)},wrapNodes(r,e,t){r.wrapNodes(e,t)}},Pi={collapse(r,e){r.collapse(e)},deselect(r){r.deselect()},move(r,e){r.move(e)},select(r,e){r.select(e)},setPoint(r,e,t){r.setPoint(e,t)},setSelection(r,e){r.setSelection(e)}},Fe=r=>typeof r=="object"&&r!==null,mu=(r,e)=>{for(var t in r){var n=r[t],a=e[t];if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;for(var u=0;u<n.length;u++)if(n[u]!==a[u])return!1}else if(Fe(n)&&Fe(a)){if(!mu(n,a))return!1}else if(n!==a)return!1}for(var i in e)if(r[i]===void 0&&e[i]!==void 0)return!1;return!0};function Ti(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,u;for(u=0;u<n.length;u++)a=n[u],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function Ge(r,e){if(r==null)return{};var t=Ti(r,e),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(a=0;a<u.length;a++)n=u[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var ji=["anchor","focus"];function Ln(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Ri(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ln(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ln(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var A={edges(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,{anchor:n,focus:a}=r;return A.isBackward(r)===t?[n,a]:[a,n]},end(r){var[,e]=A.edges(r);return e},equals(r,e){return te.equals(r.anchor,e.anchor)&&te.equals(r.focus,e.focus)},surrounds(r,e){var t=A.intersection(r,e);return t?A.equals(t,e):!1},includes(r,e){if(A.isRange(e)){if(A.includes(r,e.anchor)||A.includes(r,e.focus))return!0;var[t,n]=A.edges(r),[a,u]=A.edges(e);return te.isBefore(t,a)&&te.isAfter(n,u)}var[i,s]=A.edges(r),c=!1,f=!1;return te.isPoint(e)?(c=te.compare(e,i)>=0,f=te.compare(e,s)<=0):(c=g.compare(e,i.path)>=0,f=g.compare(e,s.path)<=0),c&&f},intersection(r,e){var t=Ge(r,ji),[n,a]=A.edges(r),[u,i]=A.edges(e),s=te.isBefore(n,u)?u:n,c=te.isBefore(a,i)?a:i;return te.isBefore(c,s)?null:Ri({anchor:s,focus:c},t)},isBackward(r){var{anchor:e,focus:t}=r;return te.isAfter(e,t)},isCollapsed(r){var{anchor:e,focus:t}=r;return te.equals(e,t)},isExpanded(r){return!A.isCollapsed(r)},isForward(r){return!A.isBackward(r)},isRange(r){return Fe(r)&&te.isPoint(r.anchor)&&te.isPoint(r.focus)},*points(r){yield[r.anchor,"anchor"],yield[r.focus,"focus"]},start(r){var[e]=A.edges(r);return e},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r===null)return null;var{affinity:n="inward"}=t,a,u;if(n==="inward"){var i=A.isCollapsed(r);A.isForward(r)?(a="forward",u=i?a:"backward"):(a="backward",u=i?a:"forward")}else n==="outward"?A.isForward(r)?(a="backward",u="forward"):(a="forward",u="backward"):(a=n,u=n);var s=te.transform(r.anchor,e,{affinity:a}),c=te.transform(r.focus,e,{affinity:u});return!s||!c?null:{anchor:s,focus:c}}},zn=function(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Fe(e))return!1;var n=typeof e.apply=="function";if(n)return!1;var a=t?z.isNodeList(e.children):Array.isArray(e.children);return a},V={isAncestor(r){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Fe(r)&&z.isNodeList(r.children,{deep:e})},isElement:zn,isElementList(r){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(r)&&r.every(t=>V.isElement(t,{deep:e}))},isElementProps(r){return r.children!==void 0},isElementType:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return zn(e)&&e[n]===t},matches(r,e){for(var t in e)if(t!=="children"&&r[t]!==e[t])return!1;return!0}},ki=["children"],Ni=["text"],z={ancestor(r,e){var t=z.get(r,e);if(H.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(Be.stringify(t)));return t},ancestors(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of g.ancestors(e,t)){var a=z.ancestor(r,n),u=[a,n];yield u}}()},child(r,e){if(H.isText(r))throw new Error("Cannot get the child of a text node: ".concat(Be.stringify(r)));var t=r.children[e];if(t==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(Be.stringify(r)));return t},children(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:n=!1}=t,a=z.ancestor(r,e),{children:u}=a,i=n?u.length-1:0;n?i>=0:i<u.length;){var s=z.child(a,i),c=e.concat(i);yield[s,c],i=n?i-1:i+1}}()},common(r,e,t){var n=g.common(e,t),a=z.get(r,n);return[a,n]},descendant(r,e){var t=z.get(r,e);if(o.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(Be.stringify(t)));return t},descendants(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of z.nodes(r,e))n.length!==0&&(yield[t,n])}()},elements(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of z.nodes(r,e))V.isElement(t)&&(yield[t,n])}()},extractProps(r){if(V.isAncestor(r)){var e=Ge(r,ki);return e}else{var e=Ge(r,Ni);return e}},first(r,e){for(var t=e.slice(),n=z.get(r,t);n&&!(H.isText(n)||n.children.length===0);)n=n.children[0],t.push(0);return[n,t]},fragment(r,e){if(H.isText(r))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Be.stringify(r)));var t=bi({children:r.children},n=>{var[a,u]=A.edges(e),i=z.nodes(n,{reverse:!0,pass:v=>{var[,D]=v;return!A.includes(e,D)}});for(var[,s]of i){if(!A.includes(e,s)){var c=z.parent(n,s),f=s[s.length-1];c.children.splice(f,1)}if(g.equals(s,u.path)){var d=z.leaf(n,s);d.text=d.text.slice(0,u.offset)}if(g.equals(s,a.path)){var h=z.leaf(n,s);h.text=h.text.slice(a.offset)}}o.isEditor(n)&&(n.selection=null)});return t.children},get(r,e){var t=z.getIf(r,e);if(t===void 0)throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(Be.stringify(r)));return t},getIf(r,e){for(var t=r,n=0;n<e.length;n++){var a=e[n];if(H.isText(t)||!t.children[a])return;t=t.children[a]}return t},has(r,e){for(var t=r,n=0;n<e.length;n++){var a=e[n];if(H.isText(t)||!t.children[a])return!1;t=t.children[a]}return!0},isNode(r){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return H.isText(r)||V.isElement(r,{deep:e})||o.isEditor(r,{deep:e})},isNodeList(r){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(r)&&r.every(t=>z.isNode(t,{deep:e}))},last(r,e){for(var t=e.slice(),n=z.get(r,t);n&&!(H.isText(n)||n.children.length===0);){var a=n.children.length-1;n=n.children[a],t.push(a)}return[n,t]},leaf(r,e){var t=z.get(r,e);if(!H.isText(t))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(Be.stringify(t)));return t},levels(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of g.levels(e,t)){var a=z.get(r,n);yield[a,n]}}()},matches(r,e){return V.isElement(r)&&V.isElementProps(e)&&V.matches(r,e)||H.isText(r)&&H.isTextProps(e)&&H.matches(r,e)},nodes(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:t,reverse:n=!1}=e,{from:a=[],to:u}=e,i=new Set,s=[],c=r;!(u&&(n?g.isBefore(s,u):g.isAfter(s,u)));){if(i.has(c)||(yield[c,s]),!i.has(c)&&!H.isText(c)&&c.children.length!==0&&(t==null||t([c,s])===!1)){i.add(c);var f=n?c.children.length-1:0;g.isAncestor(s,a)&&(f=a[s.length]),s=s.concat(f),c=z.get(r,s);continue}if(s.length===0)break;if(!n){var d=g.next(s);if(z.has(r,d)){s=d,c=z.get(r,s);continue}}if(n&&s[s.length-1]!==0){var h=g.previous(s);s=h,c=z.get(r,s);continue}s=g.parent(s),c=z.get(r,s),i.add(c)}}()},parent(r,e){var t=g.parent(e),n=z.get(r,t);if(H.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(r){return H.isText(r)?r.text:r.children.map(z.string).join("")},texts(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of z.nodes(r,e))H.isText(t)&&(yield[t,n])}()}};function $n(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function le(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$n(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$n(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var _e={isNodeOperation(r){return _e.isOperation(r)&&r.type.endsWith("_node")},isOperation(r){if(!Fe(r))return!1;switch(r.type){case"insert_node":return g.isPath(r.path)&&z.isNode(r.node);case"insert_text":return typeof r.offset=="number"&&typeof r.text=="string"&&g.isPath(r.path);case"merge_node":return typeof r.position=="number"&&g.isPath(r.path)&&Fe(r.properties);case"move_node":return g.isPath(r.path)&&g.isPath(r.newPath);case"remove_node":return g.isPath(r.path)&&z.isNode(r.node);case"remove_text":return typeof r.offset=="number"&&typeof r.text=="string"&&g.isPath(r.path);case"set_node":return g.isPath(r.path)&&Fe(r.properties)&&Fe(r.newProperties);case"set_selection":return r.properties===null&&A.isRange(r.newProperties)||r.newProperties===null&&A.isRange(r.properties)||Fe(r.properties)&&Fe(r.newProperties);case"split_node":return g.isPath(r.path)&&typeof r.position=="number"&&Fe(r.properties);default:return!1}},isOperationList(r){return Array.isArray(r)&&r.every(e=>_e.isOperation(e))},isSelectionOperation(r){return _e.isOperation(r)&&r.type.endsWith("_selection")},isTextOperation(r){return _e.isOperation(r)&&r.type.endsWith("_text")},inverse(r){switch(r.type){case"insert_node":return le(le({},r),{},{type:"remove_node"});case"insert_text":return le(le({},r),{},{type:"remove_text"});case"merge_node":return le(le({},r),{},{type:"split_node",path:g.previous(r.path)});case"move_node":{var{newPath:e,path:t}=r;if(g.equals(e,t))return r;if(g.isSibling(t,e))return le(le({},r),{},{path:e,newPath:t});var n=g.transform(t,r),a=g.transform(g.next(t),r);return le(le({},r),{},{path:n,newPath:a})}case"remove_node":return le(le({},r),{},{type:"insert_node"});case"remove_text":return le(le({},r),{},{type:"insert_text"});case"set_node":{var{properties:u,newProperties:i}=r;return le(le({},r),{},{properties:i,newProperties:u})}case"set_selection":{var{properties:s,newProperties:c}=r;return s==null?le(le({},r),{},{properties:c,newProperties:null}):c==null?le(le({},r),{},{properties:null,newProperties:s}):le(le({},r),{},{properties:c,newProperties:s})}case"split_node":return le(le({},r),{},{type:"merge_node",path:g.next(r.path)})}}},Mi=function(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Fe(e))return!1;var n=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||Fe(e.marks))&&(e.selection===null||A.isRange(e.selection))&&(!t||z.isNodeList(e.children))&&_e.isOperationList(e.operations);return n},o={above(r,e){return r.above(e)},addMark(r,e,t){r.addMark(e,t)},after(r,e,t){return r.after(e,t)},before(r,e,t){return r.before(e,t)},deleteBackward(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=e;r.deleteBackward(t)},deleteForward(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=e;r.deleteForward(t)},deleteFragment(r,e){r.deleteFragment(e)},edges(r,e){return r.edges(e)},elementReadOnly(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.elementReadOnly(e)},end(r,e){return r.end(e)},first(r,e){return r.first(e)},fragment(r,e){return r.fragment(e)},hasBlocks(r,e){return r.hasBlocks(e)},hasInlines(r,e){return r.hasInlines(e)},hasPath(r,e){return r.hasPath(e)},hasTexts(r,e){return r.hasTexts(e)},insertBreak(r){r.insertBreak()},insertFragment(r,e,t){r.insertFragment(e,t)},insertNode(r,e){r.insertNode(e)},insertSoftBreak(r){r.insertSoftBreak()},insertText(r,e){r.insertText(e)},isBlock(r,e){return r.isBlock(e)},isEdge(r,e,t){return r.isEdge(e,t)},isEditor(r){return Mi(r)},isElementReadOnly(r,e){return r.isElementReadOnly(e)},isEmpty(r,e){return r.isEmpty(e)},isEnd(r,e,t){return r.isEnd(e,t)},isInline(r,e){return r.isInline(e)},isNormalizing(r){return r.isNormalizing()},isSelectable(r,e){return r.isSelectable(e)},isStart(r,e,t){return r.isStart(e,t)},isVoid(r,e){return r.isVoid(e)},last(r,e){return r.last(e)},leaf(r,e,t){return r.leaf(e,t)},levels(r,e){return r.levels(e)},marks(r){return r.getMarks()},next(r,e){return r.next(e)},node(r,e,t){return r.node(e,t)},nodes(r,e){return r.nodes(e)},normalize(r,e){r.normalize(e)},parent(r,e,t){return r.parent(e,t)},path(r,e,t){return r.path(e,t)},pathRef(r,e,t){return r.pathRef(e,t)},pathRefs(r){return r.pathRefs()},point(r,e,t){return r.point(e,t)},pointRef(r,e,t){return r.pointRef(e,t)},pointRefs(r){return r.pointRefs()},positions(r,e){return r.positions(e)},previous(r,e){return r.previous(e)},range(r,e,t){return r.range(e,t)},rangeRef(r,e,t){return r.rangeRef(e,t)},rangeRefs(r){return r.rangeRefs()},removeMark(r,e){r.removeMark(e)},setNormalizing(r,e){r.setNormalizing(e)},start(r,e){return r.start(e)},string(r,e,t){return r.string(e,t)},unhangRange(r,e,t){return r.unhangRange(e,t)},void(r,e){return r.void(e)},withoutNormalizing(r,e){r.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(r,e,t)=>r.shouldMergeNodesRemovePrevNode(e,t)},Ii={isSpan(r){return Array.isArray(r)&&r.length===2&&r.every(g.isPath)}};function Wn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function qn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var te={compare(r,e){var t=g.compare(r.path,e.path);return t===0?r.offset<e.offset?-1:r.offset>e.offset?1:0:t},isAfter(r,e){return te.compare(r,e)===1},isBefore(r,e){return te.compare(r,e)===-1},equals(r,e){return r.offset===e.offset&&g.equals(r.path,e.path)},isPoint(r){return Fe(r)&&typeof r.offset=="number"&&g.isPath(r.path)},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r===null)return null;var{affinity:n="forward"}=t,{path:a,offset:u}=r;switch(e.type){case"insert_node":case"move_node":{a=g.transform(a,e,t);break}case"insert_text":{g.equals(e.path,a)&&(e.offset<u||e.offset===u&&n==="forward")&&(u+=e.text.length);break}case"merge_node":{g.equals(e.path,a)&&(u+=e.position),a=g.transform(a,e,t);break}case"remove_text":{g.equals(e.path,a)&&e.offset<=u&&(u-=Math.min(u-e.offset,e.text.length));break}case"remove_node":{if(g.equals(e.path,a)||g.isAncestor(e.path,a))return null;a=g.transform(a,e,t);break}case"split_node":{if(g.equals(e.path,a)){if(e.position===u&&n==null)return null;(e.position<u||e.position===u&&n==="forward")&&(u-=e.position,a=g.transform(a,e,qn(qn({},t),{},{affinity:"forward"})))}else a=g.transform(a,e,t);break}default:return r}return{path:a,offset:u}}},Hn=void 0,Be={setScrubber(r){Hn=r},stringify(r){return JSON.stringify(r,Hn)}},Li=["text"],zi=["anchor","focus","merge"];function Kn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Ke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kn(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var H={equals(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=t;function a(u){var i=Ge(u,Li);return i}return mu(n?a(r):r,n?a(e):e)},isText(r){return Fe(r)&&typeof r.text=="string"},isTextList(r){return Array.isArray(r)&&r.every(e=>H.isText(e))},isTextProps(r){return r.text!==void 0},matches(r,e){for(var t in e)if(t!=="text"&&(!r.hasOwnProperty(t)||r[t]!==e[t]))return!1;return!0},decorations(r,e){var t=[{leaf:Ke({},r)}];for(var n of e){var{anchor:a,focus:u,merge:i}=n,s=Ge(n,zi),[c,f]=A.edges(n),d=[],h=0,v=c.offset,D=f.offset,m=i??Object.assign;for(var{leaf:B}of t){var{length:E}=B.text,p=h;if(h+=E,v<=p&&h<=D){m(B,s),d.push({leaf:B});continue}if(v!==D&&(v===h||D===p)||v>h||D<p||D===p&&p!==0){d.push({leaf:B});continue}var l=B,b=void 0,w=void 0;if(D<h){var F=D-p;w={leaf:Ke(Ke({},l),{},{text:l.text.slice(F)})},l=Ke(Ke({},l),{},{text:l.text.slice(0,F)})}if(v>p){var I=v-p;b={leaf:Ke(Ke({},l),{},{text:l.text.slice(0,I)})},l=Ke(Ke({},l),{},{text:l.text.slice(I)})}m(l,s),b&&d.push(b),d.push({leaf:l}),w&&d.push(w)}t=d}if(t.length>1){var L=0;for(var[$,W]of t.entries()){var q=L,U=q+W.leaf.text.length,j={start:q,end:U};$===0&&(j.isFirst=!0),$===t.length-1&&(j.isLast=!0),W.position=j,L=U}}return t}},an=r=>r.selection?r.selection:r.children.length>0?o.end(r,[]):[0],wr=(r,e)=>{var[t]=o.node(r,e);return n=>n===t},un=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!t,a=t?Vi(e):e,u=Z.None,i=Z.None,s=0,c=null,f=null;for(var d of a){var h=d.codePointAt(0);if(!h)break;var v=ns(d,h);if([u,i]=n?[i,v]:[v,u],Dr(u,Z.ZWJ)&&Dr(i,Z.ExtPict)&&(n?c=Vn(e.substring(0,s)):c=Vn(e.substring(0,e.length-s)),!c)||Dr(u,Z.RI)&&Dr(i,Z.RI)&&(f!==null?f=!f:n?f=!0:f=os(e.substring(0,e.length-s)),!f)||u!==Z.None&&i!==Z.None&&us(u,i))break;s+=d.length}return s||1},$i=/\s/,Wi=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,qi=/['\u2018\u2019]/,Hi=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,a=!1;e.length>0;){var u=un(e,t),[i,s]=sn(e,u,t);if(Ki(i,s,t))a=!0,n+=u;else if(!a)n+=u;else break;e=s}return n},sn=(r,e,t)=>{if(t){var n=r.length-e;return[r.slice(n,r.length),r.slice(0,n)]}return[r.slice(0,e),r.slice(e)]},Ki=function r(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if($i.test(e))return!1;if(qi.test(e)){var a=un(t,n),[u,i]=sn(t,a,n);if(r(u,i,n))return!0}return!Wi.test(e)},Vi=function*(e){for(var t=e.length-1,n=0;n<e.length;n++){var a=e.charAt(t-n);if(Gi(a.charCodeAt(0))){var u=e.charAt(t-n-1);if(Ui(u.charCodeAt(0))){yield u+a,n++;continue}}yield a}},Ui=r=>r>=55296&&r<=56319,Gi=r=>r>=56320&&r<=57343,Z;(function(r){r[r.None=0]="None",r[r.Extend=1]="Extend",r[r.ZWJ=2]="ZWJ",r[r.RI=4]="RI",r[r.Prepend=8]="Prepend",r[r.SpacingMark=16]="SpacingMark",r[r.L=32]="L",r[r.V=64]="V",r[r.T=128]="T",r[r.LV=256]="LV",r[r.LVT=512]="LVT",r[r.ExtPict=1024]="ExtPict",r[r.Any=2048]="Any"})(Z||(Z={}));var Yi=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Xi=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Ji=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Zi=/^[\u1100-\u115F\uA960-\uA97C]$/,Qi=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,_i=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,es=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,rs=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,ts=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,ns=(r,e)=>{var t=Z.Any;return r.search(Yi)!==-1&&(t|=Z.Extend),e===8205&&(t|=Z.ZWJ),e>=127462&&e<=127487&&(t|=Z.RI),r.search(Xi)!==-1&&(t|=Z.Prepend),r.search(Ji)!==-1&&(t|=Z.SpacingMark),r.search(Zi)!==-1&&(t|=Z.L),r.search(Qi)!==-1&&(t|=Z.V),r.search(_i)!==-1&&(t|=Z.T),r.search(es)!==-1&&(t|=Z.LV),r.search(rs)!==-1&&(t|=Z.LVT),r.search(ts)!==-1&&(t|=Z.ExtPict),t};function Dr(r,e){return(r&e)!==0}var as=[[Z.L,Z.L|Z.V|Z.LV|Z.LVT],[Z.LV|Z.V,Z.V|Z.T],[Z.LVT|Z.T,Z.T],[Z.Any,Z.Extend|Z.ZWJ],[Z.Any,Z.SpacingMark],[Z.Prepend,Z.Any],[Z.ZWJ,Z.ExtPict],[Z.RI,Z.RI]];function us(r,e){return as.findIndex(t=>Dr(r,t[0])&&Dr(e,t[1]))===-1}var is=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,Vn=r=>r.search(is)!==-1,ss=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,os=r=>{var e=r.match(ss);if(e===null)return!1;var t=e[0].length/2;return t%2===1},ls={delete(r,e){r.delete(e)},insertFragment(r,e,t){r.insertFragment(e,t)},insertText(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(r,()=>{var{voids:n=!1}=t,{at:a=an(r)}=t;if(g.isPath(a)&&(a=o.range(r,a)),A.isRange(a))if(A.isCollapsed(a))a=a.anchor;else{var u=A.end(a);if(!n&&o.void(r,{at:u}))return;var i=A.start(a),s=o.pointRef(r,i),c=o.pointRef(r,u);x.delete(r,{at:a,voids:n});var f=s.unref(),d=c.unref();a=f||d,x.setSelection(r,{anchor:a,focus:a})}if(!(!n&&o.void(r,{at:a})||o.elementReadOnly(r,{at:a}))){var{path:h,offset:v}=a;e.length>0&&r.apply({type:"insert_text",path:h,offset:v,text:e})}})}};function Un(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Wr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Un(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var x=Wr(Wr(Wr(Wr({},xi),Si),Pi),ls),Zr=new WeakMap,fs=r=>Zr.get(r)||!1,cs=(r,e,t)=>{var n=Zr.get(r)||!1;Zr.set(r,!0);try{e(),t()}finally{Zr.set(r,n)}};function pu(r,e,t){var n=ut.get(r)||[],a=it.get(r)||new Set,u,i,s=h=>{if(h){var v=h.join(",");i.has(v)||(i.add(v),u.push(h))}};if(t){u=[],i=new Set;for(var c of n){var f=t(c);s(f)}}else u=n,i=a;for(var d of e)s(d);ut.set(r,u),it.set(r,i)}var ds=(r,e)=>{for(var t of o.pathRefs(r))Ai.transform(t,e);for(var n of o.pointRefs(r))wi.transform(n,e);for(var a of o.rangeRefs(r))Fi.transform(a,e);if(!fs(r)){var u=g.operationCanTransformPath(e)?i=>g.transform(i,e):void 0;pu(r,r.getDirtyPaths(e),u)}x.transform(r,e),r.operations.push(e),o.normalize(r,{operation:e}),e.type==="set_selection"&&(r.marks=null),yr.get(r)||(yr.set(r,!0),Promise.resolve().then(()=>{yr.set(r,!1),r.onChange({operation:e}),r.operations=[]}))},vs=(r,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:t}=e;return g.levels(t)}case"insert_node":{var{node:n,path:a}=e,u=g.levels(a),i=H.isText(n)?[]:Array.from(z.nodes(n),q=>{var[,U]=q;return a.concat(U)});return[...u,...i]}case"merge_node":{var{path:s}=e,c=g.ancestors(s),f=g.previous(s);return[...c,f]}case"move_node":{var{path:d,newPath:h}=e;if(g.equals(d,h))return[];var v=[],D=[];for(var m of g.ancestors(d)){var B=g.transform(m,e);v.push(B)}for(var E of g.ancestors(h)){var p=g.transform(E,e);D.push(p)}var l=D[D.length-1],b=h[h.length-1],w=l.concat(b);return[...v,...D,w]}case"remove_node":{var{path:F}=e,I=g.ancestors(F);return[...I]}case"split_node":{var{path:L}=e,$=g.levels(L),W=g.next(L);return[...$,W]}default:return[]}},hs=r=>{var{selection:e}=r;return e?z.fragment(r,e):[]},gs=(r,e,t)=>{var[n,a]=e;if(!H.isText(n)){if(V.isElement(n)&&n.children.length===0){var u={text:""};x.insertNodes(r,u,{at:a.concat(0),voids:!0});return}for(var i=o.isEditor(n)?!1:V.isElement(n)&&(r.isInline(n)||n.children.length===0||H.isText(n.children[0])||r.isInline(n.children[0])),s=0,c=0;c<n.children.length;c++,s++){var f=z.get(r,a);if(!H.isText(f)){var d=f.children[s],h=f.children[s-1],v=c===n.children.length-1,D=H.isText(d)||V.isElement(d)&&r.isInline(d);if(D!==i)D?t!=null&&t.fallbackElement?x.wrapNodes(r,t.fallbackElement(),{at:a.concat(s),voids:!0}):x.removeNodes(r,{at:a.concat(s),voids:!0}):x.unwrapNodes(r,{at:a.concat(s),voids:!0}),s--;else if(V.isElement(d)){if(r.isInline(d)){if(h==null||!H.isText(h)){var m={text:""};x.insertNodes(r,m,{at:a.concat(s),voids:!0}),s++}else if(v){var B={text:""};x.insertNodes(r,B,{at:a.concat(s+1),voids:!0}),s++}}}else{if(!H.isText(d)&&!("children"in d)){var E=d;E.children=[]}h!=null&&H.isText(h)&&(H.equals(d,h,{loose:!0})?(x.mergeNodes(r,{at:a.concat(s),voids:!0}),s--):h.text===""?(x.removeNodes(r,{at:a.concat(s-1),voids:!0}),s--):d.text===""&&(x.removeNodes(r,{at:a.concat(s),voids:!0}),s--))}}}}},Ds=(r,e)=>{var{iteration:t,initialDirtyPathsLength:n}=e,a=n*42;if(t>a)throw new Error("Could not completely normalize the editor after ".concat(a," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},ms=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:a="lowest",at:u=e.selection,match:i}=t;if(u){var s=o.path(e,u);if(!A.isRange(u)||g.equals(u.focus.path,u.anchor.path)){if(s.length===0)return;s=g.parent(s)}var c=a==="lowest",[f]=o.levels(e,{at:s,voids:n,match:i,reverse:c});return f}};function Gn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Yn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gn(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Gn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ps=(r,e,t)=>{var{selection:n}=r;if(n){var a=(h,v)=>{if(!H.isText(h))return!1;var[D,m]=o.parent(r,v);return!r.isVoid(D)||r.markableVoid(D)},u=A.isExpanded(n),i=!1;if(!u){var[s,c]=o.node(r,n);if(s&&a(s,c)){var[f]=o.parent(r,c);i=f&&r.markableVoid(f)}}if(u||i)x.setNodes(r,{[e]:t},{match:a,split:!0,voids:!0});else{var d=Yn(Yn({},o.marks(r)||{}),{},{[e]:t});r.marks=d,yr.get(r)||r.onChange()}}};function Xn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Jn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xn(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Xn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Cs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.point(e,t,{edge:"end"}),u=o.end(e,[]),i={anchor:a,focus:u},{distance:s=1}=n,c=0,f;for(var d of o.positions(e,Jn(Jn({},n),{},{at:i}))){if(c>s)break;c!==0&&(f=d),c++}return f};function Zn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Qn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Zn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Bs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.start(e,[]),u=o.point(e,t,{edge:"start"}),i={anchor:a,focus:u},{distance:s=1}=n,c=0,f;for(var d of o.positions(e,Qn(Qn({},n),{},{at:i,reverse:!0}))){if(c>s)break;c!==0&&(f=d),c++}return f},Es=(r,e)=>{var{selection:t}=r;t&&A.isCollapsed(t)&&x.delete(r,{unit:e,reverse:!0})},bs=(r,e)=>{var{selection:t}=r;t&&A.isCollapsed(t)&&x.delete(r,{unit:e})},As=function(e){var{direction:t="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&A.isExpanded(n)&&x.delete(e,{reverse:t==="backward"})},ws=(r,e)=>[o.start(r,e),o.end(r,e)];function _n(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function ea(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_n(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_n(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Fs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,ea(ea({},t),{},{match:n=>V.isElement(n)&&o.isElementReadOnly(e,n)}))},ys=(r,e)=>o.point(r,e,{edge:"end"}),Os=(r,e)=>{var t=o.path(r,e,{edge:"start"});return o.node(r,t)},xs=(r,e)=>{var t=o.range(r,e);return z.fragment(r,t)};function ra(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function ta(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ra(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ra(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ss=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,ta(ta({},t),{},{match:n=>V.isElement(n)&&o.isVoid(e,n)}))},Ps=(r,e)=>e.children.some(t=>V.isElement(t)&&o.isBlock(r,t)),Ts=(r,e)=>e.children.some(t=>H.isText(t)||o.isInline(r,t)),js=(r,e)=>z.has(r,e),Rs=(r,e)=>e.children.every(t=>H.isText(t)),ks=r=>{x.splitNodes(r,{always:!0})},Ns=(r,e,t)=>{x.insertNodes(r,e,t)},Ms=r=>{x.splitNodes(r,{always:!0})};function na(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Is(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?na(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):na(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ls=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:a,marks:u}=e;if(a){if(u){var i=Is({text:t},u);x.insertNodes(e,i,{at:n.at,voids:n.voids})}else x.insertText(e,t,n);e.marks=null}},zs=(r,e)=>!r.isInline(e),$s=(r,e,t)=>o.isStart(r,e,t)||o.isEnd(r,e,t),Ws=(r,e)=>{var{children:t}=e,[n]=t;return t.length===0||t.length===1&&H.isText(n)&&n.text===""&&!r.isVoid(e)},qs=(r,e,t)=>{var n=o.end(r,t);return te.equals(e,n)},Hs=r=>{var e=Du.get(r);return e===void 0?!0:e},Ks=(r,e,t)=>{if(e.offset!==0)return!1;var n=o.start(r,t);return te.equals(e,n)},Vs=(r,e)=>{var t=o.path(r,e,{edge:"end"});return o.node(r,t)},Us=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.path(e,t,n),u=z.leaf(e,a);return[u,a]};function Gs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,reverse:n=!1,voids:a=!1}=e,{match:u}=e;if(u==null&&(u=()=>!0),!!t){var i=[],s=o.path(r,t);for(var[c,f]of z.levels(r,s))if(u(c,f)&&(i.push([c,f]),!a&&V.isElement(c)&&o.isVoid(r,c)))break;n&&i.reverse(),yield*i}}()}var Ys=["text"],Xs=["text"],Js=function(e){var{marks:t,selection:n}=e;if(!n)return null;var{anchor:a,focus:u}=n;if(t)return t;if(A.isExpanded(n)){var i=A.isBackward(n);i&&([u,a]=[a,u]);var s=o.isEnd(e,a,a.path);if(s){var c=o.after(e,a);c&&(a=c)}var[f]=o.nodes(e,{match:H.isText,at:{anchor:a,focus:u}});if(f){var[d]=f,h=Ge(d,Ys);return h}else return{}}var{path:v}=a,[D]=o.leaf(e,v);if(a.offset===0){var m=o.previous(e,{at:v,match:H.isText}),B=o.above(e,{match:F=>V.isElement(F)&&o.isVoid(e,F)&&e.markableVoid(F)});if(!B){var E=o.above(e,{match:F=>V.isElement(F)&&o.isBlock(e,F)});if(m&&E){var[p,l]=m,[,b]=E;g.isAncestor(b,l)&&(D=p)}}}var w=Ge(D,Xs);return w},Zs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:a=!1}=t,{match:u,at:i=e.selection}=t;if(i){var s=o.after(e,i,{voids:a});if(s){var[,c]=o.last(e,[]),f=[s.path,c];if(g.isPath(i)&&i.length===0)throw new Error("Cannot get the next node from the root node!");if(u==null)if(g.isPath(i)){var[d]=o.parent(e,i);u=v=>d.children.includes(v)}else u=()=>!0;var[h]=o.nodes(e,{at:f,match:u,mode:n,voids:a});return h}}},Qs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.path(e,t,n),u=z.get(e,a);return[u,a]};function _s(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,mode:n="all",universal:a=!1,reverse:u=!1,voids:i=!1,pass:s}=e,{match:c}=e;if(c||(c=()=>!0),!!t){var f,d;if(Ii.isSpan(t))f=t[0],d=t[1];else{var h=o.path(r,t,{edge:"start"}),v=o.path(r,t,{edge:"end"});f=u?v:h,d=u?h:v}var D=z.nodes(r,{reverse:u,from:f,to:d,pass:w=>{var[F,I]=w;return s&&s([F,I])?!0:V.isElement(F)?!!(!i&&(o.isVoid(r,F)||o.isElementReadOnly(r,F))):!1}}),m=[],B;for(var[E,p]of D){var l=B&&g.compare(p,B[1])===0;if(!(n==="highest"&&l)){if(!c(E,p)){if(a&&!l&&H.isText(E))return;continue}if(n==="lowest"&&l){B=[E,p];continue}var b=n==="lowest"?B:[E,p];b&&(a?m.push(b):yield b),B=[E,p]}}n==="lowest"&&B&&(a?m.push(B):yield B),a&&(yield*m)}}()}var eo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:a}=t,u=d=>ut.get(d)||[],i=d=>it.get(d)||new Set,s=d=>{var h=u(d).pop(),v=h.join(",");return i(d).delete(v),h};if(o.isNormalizing(e)){if(n){var c=Array.from(z.nodes(e),d=>{var[,h]=d;return h}),f=new Set(c.map(d=>d.join(",")));ut.set(e,c),it.set(e,f)}u(e).length!==0&&o.withoutNormalizing(e,()=>{for(var d of u(e))if(z.has(e,d)){var h=o.node(e,d),[v,D]=h;V.isElement(v)&&v.children.length===0&&e.normalizeNode(h,{operation:a})}for(var m=u(e),B=m.length,E=0;m.length!==0;){if(!e.shouldNormalize({dirtyPaths:m,iteration:E,initialDirtyPathsLength:B,operation:a}))return;var p=s(e);if(z.has(e,p)){var l=o.node(e,p);e.normalizeNode(l,{operation:a})}E++,m=u(e)}})}},ro=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.path(e,t,n),u=g.parent(a),i=o.node(e,u);return i},to=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:s}=u,c=o.pathRefs(e);return c.delete(u),u.current=null,s}},i=o.pathRefs(e);return i.add(u),u},no=r=>{var e=Tn.get(r);return e||(e=new Set,Tn.set(r,e)),e},ao=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:a,edge:u}=n;if(g.isPath(t)){if(u==="start"){var[,i]=z.first(e,t);t=i}else if(u==="end"){var[,s]=z.last(e,t);t=s}}return A.isRange(t)&&(u==="start"?t=A.start(t):u==="end"?t=A.end(t):t=g.common(t.anchor.path,t.focus.path)),te.isPoint(t)&&(t=t.path),a!=null&&(t=t.slice(0,a)),t},uo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:s}=u,c=o.pointRefs(e);return c.delete(u),u.current=null,s}},i=o.pointRefs(e);return i.add(u),u},io=r=>{var e=jn.get(r);return e||(e=new Set,jn.set(r,e)),e},so=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:a="start"}=n;if(g.isPath(t)){var u;if(a==="end"){var[,i]=z.last(e,t);u=i}else{var[,s]=z.first(e,t);u=s}var c=z.get(e,u);if(!H.isText(c))throw new Error("Cannot get the ".concat(a," point in the node at path [").concat(t,"] because it has no ").concat(a," text node."));return{path:u,offset:a==="end"?c.text.length:0}}if(A.isRange(t)){var[f,d]=A.edges(t);return a==="start"?f:d}return t};function oo(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,unit:n="offset",reverse:a=!1,voids:u=!1}=e;if(!t)return;var i=o.range(r,t),[s,c]=A.edges(i),f=a?c:s,d=!1,h="",v=0,D=0,m=0;for(var[B,E]of o.nodes(r,{at:t,reverse:a,voids:u})){if(V.isElement(B)){if(!r.isSelectable(B))if(a){yield o.end(r,g.previous(E));continue}else{yield o.start(r,g.next(E));continue}if(!u&&(r.isVoid(B)||r.isElementReadOnly(B))){yield o.start(r,E);continue}if(r.isInline(B))continue;if(o.hasInlines(r,B)){var p=g.isAncestor(E,c.path)?c:o.end(r,E),l=g.isAncestor(E,s.path)?s:o.start(r,E);h=o.string(r,{anchor:l,focus:p},{voids:u}),d=!0}}if(H.isText(B)){var b=g.equals(E,f.path);for(b?(D=a?f.offset:B.text.length-f.offset,m=f.offset):(D=B.text.length,m=a?D:0),(b||d||n==="offset")&&(yield{path:E,offset:m},d=!1);;){if(v===0){if(h==="")break;v=w(h,n,a),h=sn(h,v,a)[1]}if(m=a?m-v:m+v,D=D-v,D<0){v=-D;break}v=0,yield{path:E,offset:m}}}}function w(F,I,L){return I==="character"?un(F,L):I==="word"?Hi(F,L):I==="line"||I==="block"?F.length:1}}()}var lo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:a=!1}=t,{match:u,at:i=e.selection}=t;if(i){var s=o.before(e,i,{voids:a});if(s){var[,c]=o.first(e,[]),f=[s.path,c];if(g.isPath(i)&&i.length===0)throw new Error("Cannot get the previous node from the root node!");if(u==null)if(g.isPath(i)){var[d]=o.parent(e,i);u=v=>d.children.includes(v)}else u=()=>!0;var[h]=o.nodes(e,{reverse:!0,at:f,match:u,mode:n,voids:a});return h}}},fo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:t,affinity:a,unref(){var{current:s}=u,c=o.rangeRefs(e);return c.delete(u),u.current=null,s}},i=o.rangeRefs(e);return i.add(u),u},co=r=>{var e=Rn.get(r);return e||(e=new Set,Rn.set(r,e)),e},vo=(r,e,t)=>{if(A.isRange(e)&&!t)return e;var n=o.start(r,e),a=o.end(r,t||e);return{anchor:n,focus:a}};function aa(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function ho(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aa(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aa(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var go=(r,e)=>{var{selection:t}=r;if(t){var n=(d,h)=>{if(!H.isText(d))return!1;var[v,D]=o.parent(r,h);return!r.isVoid(v)||r.markableVoid(v)},a=A.isExpanded(t),u=!1;if(!a){var[i,s]=o.node(r,t);if(i&&n(i,s)){var[c]=o.parent(r,s);u=c&&r.markableVoid(c)}}if(a||u)x.unsetNodes(r,e,{match:n,split:!0,voids:!0});else{var f=ho({},o.marks(r)||{});delete f[e],r.marks=f,yr.get(r)||r.onChange()}}},Do=(r,e)=>{Du.set(r,e)},mo=(r,e)=>o.point(r,e,{edge:"start"}),po=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:a=!1}=n,u=o.range(e,t),[i,s]=A.edges(u),c="";for(var[f,d]of o.nodes(e,{at:u,match:H.isText,voids:a})){var h=f.text;g.equals(d,s.path)&&(h=h.slice(0,s.offset)),g.equals(d,i.path)&&(h=h.slice(i.offset)),c+=h}return c},Co=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:a=!1}=n,[u,i]=A.edges(t);if(u.offset!==0||i.offset!==0||A.isCollapsed(t)||g.hasPrevious(i.path))return t;var s=o.above(e,{at:i,match:m=>V.isElement(m)&&o.isBlock(e,m),voids:a}),c=s?s[1]:[],f=o.start(e,u),d={anchor:f,focus:i},h=!0;for(var[v,D]of o.nodes(e,{at:d,match:H.isText,reverse:!0,voids:a})){if(h){h=!1;continue}if(v.text!==""||g.isBefore(D,c)){i={path:D,offset:v.text.length};break}}return{anchor:u,focus:i}},Bo=(r,e)=>{var t=o.isNormalizing(r);o.setNormalizing(r,!1);try{e()}finally{o.setNormalizing(r,t)}o.normalize(r)},Eo=(r,e,t)=>{var[n,a]=e;return V.isElement(n)&&o.isEmpty(r,n)||H.isText(n)&&n.text===""&&a[a.length-1]!==0},bo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var n,a,{reverse:u=!1,unit:i="character",distance:s=1,voids:c=!1}=t,{at:f=e.selection,hanging:d=!1}=t;if(f){var h=!1;if(A.isRange(f)&&A.isCollapsed(f)&&(h=!0,f=f.anchor),te.isPoint(f)){var v=o.void(e,{at:f,mode:"highest"});if(!c&&v){var[,D]=v;f=D}else{var m={unit:i,distance:s},B=u?o.before(e,f,m)||o.start(e,[]):o.after(e,f,m)||o.end(e,[]);f={anchor:f,focus:B},d=!0}}if(g.isPath(f)){x.removeNodes(e,{at:f,voids:c});return}if(!A.isCollapsed(f)){if(!d){var[,E]=A.edges(f),p=o.end(e,[]);te.equals(E,p)||(f=o.unhangRange(e,f,{voids:c}))}var[l,b]=A.edges(f),w=o.above(e,{match:K=>V.isElement(K)&&o.isBlock(e,K),at:l,voids:c}),F=o.above(e,{match:K=>V.isElement(K)&&o.isBlock(e,K),at:b,voids:c}),I=w&&F&&!g.equals(w[1],F[1]),L=g.equals(l.path,b.path),$=c?null:(n=o.void(e,{at:l,mode:"highest"}))!==null&&n!==void 0?n:o.elementReadOnly(e,{at:l,mode:"highest"}),W=c?null:(a=o.void(e,{at:b,mode:"highest"}))!==null&&a!==void 0?a:o.elementReadOnly(e,{at:b,mode:"highest"});if($){var q=o.before(e,l);q&&w&&g.isAncestor(w[1],q.path)&&(l=q)}if(W){var U=o.after(e,b);U&&F&&g.isAncestor(F[1],U.path)&&(b=U)}var j=[],y;for(var R of o.nodes(e,{at:f,voids:c})){var[k,J]=R;y&&g.compare(J,y)===0||(!c&&V.isElement(k)&&(o.isVoid(e,k)||o.isElementReadOnly(e,k))||!g.isCommon(J,l.path)&&!g.isCommon(J,b.path))&&(j.push(R),y=J)}var G=Array.from(j,K=>{var[,oe]=K;return o.pathRef(e,oe)}),ne=o.pointRef(e,l),ee=o.pointRef(e,b),re="";if(!L&&!$){var ae=ne.current,[me]=o.leaf(e,ae),{path:Y}=ae,{offset:ie}=l,pe=me.text.slice(ie);pe.length>0&&(e.apply({type:"remove_text",path:Y,offset:ie,text:pe}),re=pe)}if(G.reverse().map(K=>K.unref()).filter(K=>K!==null).forEach(K=>x.removeNodes(e,{at:K,voids:c})),!W){var Ce=ee.current,[ye]=o.leaf(e,Ce),{path:ke}=Ce,C=L?l.offset:0,P=ye.text.slice(C,b.offset);P.length>0&&(e.apply({type:"remove_text",path:ke,offset:C,text:P}),re=P)}!L&&I&&ee.current&&ne.current&&x.mergeNodes(e,{at:ee.current,hanging:!0,voids:c}),h&&u&&i==="character"&&re.length>1&&re.match(/[\u0980-\u09FF\u0E00-\u0E7F\u1000-\u109F\u0900-\u097F\u1780-\u17FF\u0D00-\u0D7F\u0B00-\u0B7F\u0A00-\u0A7F\u0B80-\u0BFF\u0C00-\u0C7F]+/)&&x.insertText(e,re.slice(0,re.length-s));var O=ne.unref(),T=ee.unref(),_=u?O||T:T||O;t.at==null&&_&&x.select(e,_)}}})},Ao=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:a=!1,voids:u=!1}=n,{at:i=an(e),batchDirty:s=!0}=n;if(t.length){if(A.isRange(i))if(a||(i=o.unhangRange(e,i,{voids:u})),A.isCollapsed(i))i=i.anchor;else{var[,c]=A.edges(i);if(!u&&o.void(e,{at:c}))return;var f=o.pointRef(e,c);x.delete(e,{at:i}),i=f.unref()}else g.isPath(i)&&(i=o.start(e,i));if(!(!u&&o.void(e,{at:i}))){var d=o.above(e,{at:i,match:Y=>V.isElement(Y)&&o.isInline(e,Y),mode:"highest",voids:u});if(d){var[,h]=d;if(o.isEnd(e,i,h)){var v=o.after(e,h);i=v}else if(o.isStart(e,i,h)){var D=o.before(e,h);i=D}}var m=o.above(e,{match:Y=>V.isElement(Y)&&o.isBlock(e,Y),at:i,voids:u}),[,B]=m,E=o.isStart(e,i,B),p=o.isEnd(e,i,B),l=E&&p,[,b]=z.first({children:t},[]),[,w]=z.last({children:t},[]),F=Y=>{var[ie,pe]=Y,Ce=pe.length===0;return Ce?!1:l?!0:!(!E&&g.isAncestor(pe,b)&&V.isElement(ie)&&!e.isVoid(ie)&&!e.isInline(ie)||!p&&g.isAncestor(pe,w)&&V.isElement(ie)&&!e.isVoid(ie)&&!e.isInline(ie))},I=!0,L=[],$=[],W=[];for(var q of z.nodes({children:t},{pass:F})){var[U,j]=q;I&&V.isElement(U)&&!e.isInline(U)&&!g.isAncestor(j,b)&&(I=!1),F(q)&&(V.isElement(U)&&!e.isInline(U)?(I=!1,$.push(U)):I?L.push(U):W.push(U))}var[y]=o.nodes(e,{at:i,match:Y=>H.isText(Y)||o.isInline(e,Y),mode:"highest",voids:u}),[,R]=y,k=o.isStart(e,i,R),J=o.isEnd(e,i,R),G=o.pathRef(e,p&&!W.length?g.next(B):B),ne=o.pathRef(e,J?g.next(R):R),ee=W.length>0;x.splitNodes(e,{at:i,match:Y=>ee?V.isElement(Y)&&o.isBlock(e,Y):H.isText(Y)||o.isInline(e,Y),mode:ee?"lowest":"highest",always:ee&&(!E||L.length>0)&&(!p||W.length>0),voids:u});var re=o.pathRef(e,!k||k&&J?g.next(R):R);if(x.insertNodes(e,L,{at:re.current,match:Y=>H.isText(Y)||o.isInline(e,Y),mode:"highest",voids:u,batchDirty:s}),l&&!L.length&&$.length&&!W.length&&x.delete(e,{at:B,voids:u}),x.insertNodes(e,$,{at:G.current,match:Y=>V.isElement(Y)&&o.isBlock(e,Y),mode:"lowest",voids:u,batchDirty:s}),x.insertNodes(e,W,{at:ne.current,match:Y=>H.isText(Y)||o.isInline(e,Y),mode:"highest",voids:u,batchDirty:s}),!n.at){var ae;if(W.length>0&&ne.current?ae=g.previous(ne.current):$.length>0&&G.current?ae=g.previous(G.current):re.current&&(ae=g.previous(re.current)),ae){var me=o.end(e,ae);x.select(e,me)}}re.unref(),G.unref(),ne.unref()}}})},wo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=t,{selection:a}=e;if(a){if(n==="anchor")x.select(e,a.anchor);else if(n==="focus")x.select(e,a.focus);else if(n==="start"){var[u]=A.edges(a);x.select(e,u)}else if(n==="end"){var[,i]=A.edges(a);x.select(e,i)}}else return},Fo=r=>{var{selection:e}=r;e&&r.apply({type:"set_selection",properties:e,newProperties:null})},yo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:a=1,unit:u="character",reverse:i=!1}=t,{edge:s=null}=t;if(n){s==="start"&&(s=A.isBackward(n)?"focus":"anchor"),s==="end"&&(s=A.isBackward(n)?"anchor":"focus");var{anchor:c,focus:f}=n,d={distance:a,unit:u},h={};if(s==null||s==="anchor"){var v=i?o.before(e,c,d):o.after(e,c,d);v&&(h.anchor=v)}if(s==null||s==="focus"){var D=i?o.before(e,f,d):o.after(e,f,d);D&&(h.focus=D)}x.setSelection(e,h)}},Oo=(r,e)=>{var{selection:t}=r;if(e=o.range(r,e),t){x.setSelection(r,e);return}if(!A.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Be.stringify(e)));r.apply({type:"set_selection",properties:t,newProperties:e})};function ua(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function ia(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ua(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ua(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var xo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:a}=e,{edge:u="both"}=n;if(a){u==="start"&&(u=A.isBackward(a)?"focus":"anchor"),u==="end"&&(u=A.isBackward(a)?"anchor":"focus");var{anchor:i,focus:s}=a,c=u==="anchor"?i:s;x.setSelection(e,{[u==="anchor"?"anchor":"focus"]:ia(ia({},c),t)})}},So=(r,e)=>{var{selection:t}=r,n={},a={};if(t){for(var u in e)(u==="anchor"&&e.anchor!=null&&!te.equals(e.anchor,t.anchor)||u==="focus"&&e.focus!=null&&!te.equals(e.focus,t.focus)||u!=="anchor"&&u!=="focus"&&e[u]!==t[u])&&(n[u]=t[u],a[u]=e[u]);Object.keys(n).length>0&&r.apply({type:"set_selection",properties:n,newProperties:a})}},Po=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:a=!1,voids:u=!1,mode:i="lowest",batchDirty:s=!0}=n,{at:c,match:f,select:d}=n;if(z.isNode(t)&&(t=[t]),t.length!==0){var[h]=t;if(c||(c=an(e),d!==!1&&(d=!0)),d==null&&(d=!1),A.isRange(c))if(a||(c=o.unhangRange(e,c,{voids:u})),A.isCollapsed(c))c=c.anchor;else{var[,v]=A.edges(c),D=o.pointRef(e,v);x.delete(e,{at:c}),c=D.unref()}if(te.isPoint(c)){f==null&&(H.isText(h)?f=q=>H.isText(q):e.isInline(h)?f=q=>H.isText(q)||o.isInline(e,q):f=q=>V.isElement(q)&&o.isBlock(e,q));var[m]=o.nodes(e,{at:c.path,match:f,mode:i,voids:u});if(m){var[,B]=m,E=o.pathRef(e,B),p=o.isEnd(e,c,B);x.splitNodes(e,{at:c,match:f,mode:i,voids:u});var l=E.unref();c=p?g.next(l):l}else return}var b=g.parent(c),w=c[c.length-1];if(!(!u&&o.void(e,{at:b}))){if(s){var F=[],I=g.levels(b);cs(e,()=>{var q=function(){var y=b.concat(w);w++;var R={type:"insert_node",path:y,node:U};e.apply(R),c=g.next(c),F.push(R),H.isText(U)?I.push(y):I.push(...Array.from(z.nodes(U),k=>{var[,J]=k;return y.concat(J)}))};for(var U of t)q()},()=>{pu(e,I,q=>{var U=q;for(var j of F)if(g.operationCanTransformPath(j)&&(U=g.transform(U,j),!U))return null;return U})})}else for(var L of t){var $=b.concat(w);w++,e.apply({type:"insert_node",path:$,node:L}),c=g.next(c)}if(c=g.previous(c),d){var W=o.end(e,c);W&&x.select(e,W)}}}})},To=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:a="lowest",voids:u=!1}=t,{match:i}=t;if(i==null&&(i=g.isPath(n)?wr(e,n):w=>V.isElement(w)&&o.isBlock(e,w)),!!n){var s=o.nodes(e,{at:n,match:i,mode:a,voids:u}),c=Array.from(s,w=>{var[,F]=w;return o.pathRef(e,F)});for(var f of c){var d=f.unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var h=o.node(e,g.parent(d)),[v,D]=h,m=d[d.length-1],{length:B}=v.children;if(B===1){var E=g.next(D);x.moveNodes(e,{at:d,to:E,voids:u}),x.removeNodes(e,{at:D,voids:u})}else if(m===0)x.moveNodes(e,{at:d,to:D,voids:u});else if(m===B-1){var p=g.next(D);x.moveNodes(e,{at:d,to:p,voids:u})}else{var l=g.next(d),b=g.next(D);x.splitNodes(e,{at:l,voids:u}),x.moveNodes(e,{at:d,to:b,voids:u})}}}})},jo=["text"],Ro=["children"],Cu=(r,e)=>{if(V.isElement(e)){var t=e;return o.isVoid(r,e)?!0:t.children.length===1?Cu(r,t.children[0]):!1}else return!o.isEditor(e)},ko=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{match:n,at:a=e.selection}=t,{hanging:u=!1,voids:i=!1,mode:s="lowest"}=t;if(a){if(n==null)if(g.isPath(a)){var[c]=o.parent(e,a);n=q=>c.children.includes(q)}else n=q=>V.isElement(q)&&o.isBlock(e,q);if(!u&&A.isRange(a)&&(a=o.unhangRange(e,a,{voids:i})),A.isRange(a))if(A.isCollapsed(a))a=a.anchor;else{var[,f]=A.edges(a),d=o.pointRef(e,f);x.delete(e,{at:a}),a=d.unref(),t.at==null&&x.select(e,a)}var[h]=o.nodes(e,{at:a,match:n,voids:i,mode:s}),v=o.previous(e,{at:a,match:n,voids:i,mode:s});if(!(!h||!v)){var[D,m]=h,[B,E]=v;if(!(m.length===0||E.length===0)){var p=g.next(E),l=g.common(m,E),b=g.isSibling(m,E),w=Array.from(o.levels(e,{at:m}),q=>{var[U]=q;return U}).slice(l.length).slice(0,-1),F=o.above(e,{at:m,mode:"highest",match:q=>w.includes(q)&&Cu(e,q)}),I=F&&o.pathRef(e,F[1]),L,$;if(H.isText(D)&&H.isText(B)){var W=Ge(D,jo);$=B.text.length,L=W}else if(V.isElement(D)&&V.isElement(B)){var W=Ge(D,Ro);$=B.children.length,L=W}else throw new Error("Cannot merge the node at path [".concat(m,"] with the previous sibling because it is not the same kind: ").concat(Be.stringify(D)," ").concat(Be.stringify(B)));b||x.moveNodes(e,{at:m,to:p,voids:i}),I&&x.removeNodes(e,{at:I.current,voids:i}),o.shouldMergeNodesRemovePrevNode(e,v,h)?x.removeNodes(e,{at:E,voids:i}):e.apply({type:"merge_node",path:p,position:$,properties:L}),I&&I.unref()}}}})},No=(r,e)=>{o.withoutNormalizing(r,()=>{var{to:t,at:n=r.selection,mode:a="lowest",voids:u=!1}=e,{match:i}=e;if(n){i==null&&(i=g.isPath(n)?wr(r,n):D=>V.isElement(D)&&o.isBlock(r,D));var s=o.pathRef(r,t),c=o.nodes(r,{at:n,match:i,mode:a,voids:u}),f=Array.from(c,D=>{var[,m]=D;return o.pathRef(r,m)});for(var d of f){var h=d.unref(),v=s.current;h.length!==0&&r.apply({type:"move_node",path:h,newPath:v}),s.current&&g.isSibling(v,h)&&g.isAfter(v,h)&&(s.current=g.next(s.current))}s.unref()}})},Mo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:a=!1,mode:u="lowest"}=t,{at:i=e.selection,match:s}=t;if(i){s==null&&(s=g.isPath(i)?wr(e,i):D=>V.isElement(D)&&o.isBlock(e,D)),!n&&A.isRange(i)&&(i=o.unhangRange(e,i,{voids:a}));var c=o.nodes(e,{at:i,match:s,mode:u,voids:a}),f=Array.from(c,D=>{var[,m]=D;return o.pathRef(e,m)});for(var d of f){var h=d.unref();if(h){var[v]=o.node(e,h);e.apply({type:"remove_node",path:h,node:v})}}}})},Io=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{match:a,at:u=e.selection,compare:i,merge:s}=n,{hanging:c=!1,mode:f="lowest",split:d=!1,voids:h=!1}=n;if(u){if(a==null&&(a=g.isPath(u)?wr(e,u):$=>V.isElement($)&&o.isBlock(e,$)),!c&&A.isRange(u)&&(u=o.unhangRange(e,u,{voids:h})),d&&A.isRange(u)){if(A.isCollapsed(u)&&o.leaf(e,u.anchor)[0].text.length>0)return;var v=o.rangeRef(e,u,{affinity:"inward"}),[D,m]=A.edges(u),B=f==="lowest"?"lowest":"highest",E=o.isEnd(e,m,m.path);x.splitNodes(e,{at:m,match:a,mode:B,voids:h,always:!E});var p=o.isStart(e,D,D.path);x.splitNodes(e,{at:D,match:a,mode:B,voids:h,always:!p}),u=v.unref(),n.at==null&&x.select(e,u)}i||(i=($,W)=>$!==W);for(var[l,b]of o.nodes(e,{at:u,match:a,mode:f,voids:h})){var w={},F={};if(b.length!==0){var I=!1;for(var L in t)L==="children"||L==="text"||i(t[L],l[L])&&(I=!0,l.hasOwnProperty(L)&&(w[L]=l[L]),s?t[L]!=null&&(F[L]=s(l[L],t[L])):t[L]!=null&&(F[L]=t[L]));I&&e.apply({type:"set_node",path:b,properties:w,newProperties:F})}}}})},Lo=(r,e)=>{if(A.isCollapsed(e))return e.anchor;var[,t]=A.edges(e),n=o.pointRef(r,t);return x.delete(r,{at:e}),n.unref()},zo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:a=!1}=t,{match:u,at:i=e.selection,height:s=0,always:c=!1}=t;if(u==null&&(u=ee=>V.isElement(ee)&&o.isBlock(e,ee)),A.isRange(i)&&(i=Lo(e,i)),g.isPath(i)){var f=i,d=o.point(e,f),[h]=o.parent(e,f);u=ee=>ee===h,s=d.path.length-f.length+1,i=d,c=!0}if(i){var v=o.pointRef(e,i,{affinity:"backward"}),D;try{var[m]=o.nodes(e,{at:i,match:u,mode:n,voids:a});if(!m)return;var B=o.void(e,{at:i,mode:"highest"}),E=0;if(!a&&B){var[p,l]=B;if(V.isElement(p)&&e.isInline(p)){var b=o.after(e,l);if(!b){var w={text:""},F=g.next(l);x.insertNodes(e,w,{at:F,voids:a}),b=o.point(e,F)}i=b,c=!0}var I=i.path.length-l.length;s=I+1,c=!0}D=o.pointRef(e,i);var L=i.path.length-s,[,$]=m,W=i.path.slice(0,L),q=s===0?i.offset:i.path[L]+E;for(var[U,j]of o.levels(e,{at:W,reverse:!0,voids:a})){var y=!1;if(j.length<$.length||j.length===0||!a&&V.isElement(U)&&o.isVoid(e,U))break;var R=v.current,k=o.isEnd(e,R,j);if(c||!v||!o.isEdge(e,R,j)){y=!0;var J=z.extractProps(U);e.apply({type:"split_node",path:j,position:q,properties:J})}q=j[j.length-1]+(y||k?1:0)}if(t.at==null){var G=D.current||o.end(e,[]);x.select(e,G)}}finally{var ne;v.unref(),(ne=D)===null||ne===void 0||ne.unref()}}})},$o=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(t)||(t=[t]);var a={};for(var u of t)a[u]=null;x.setNodes(e,a,n)},Wo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:n="lowest",split:a=!1,voids:u=!1}=t,{at:i=e.selection,match:s}=t;if(i){s==null&&(s=g.isPath(i)?wr(e,i):D=>V.isElement(D)&&o.isBlock(e,D)),g.isPath(i)&&(i=o.range(e,i));var c=A.isRange(i)?o.rangeRef(e,i):null,f=o.nodes(e,{at:i,match:s,mode:n,voids:u}),d=Array.from(f,D=>{var[,m]=D;return o.pathRef(e,m)}).reverse(),h=function(){var m=v.unref(),[B]=o.node(e,m),E=o.range(e,m);a&&c&&(E=A.intersection(c.current,E)),x.liftNodes(e,{at:E,match:p=>V.isAncestor(B)&&B.children.includes(p),voids:u})};for(var v of d)h();c&&c.unref()}})};function sa(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function oa(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sa(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sa(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var qo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{mode:a="lowest",split:u=!1,voids:i=!1}=n,{match:s,at:c=e.selection}=n;if(c){if(s==null&&(g.isPath(c)?s=wr(e,c):e.isInline(t)?s=E=>V.isElement(E)&&o.isInline(e,E)||H.isText(E):s=E=>V.isElement(E)&&o.isBlock(e,E)),u&&A.isRange(c)){var[f,d]=A.edges(c),h=o.rangeRef(e,c,{affinity:"inward"});x.splitNodes(e,{at:d,match:s,voids:i}),x.splitNodes(e,{at:f,match:s,voids:i}),c=h.unref(),n.at==null&&x.select(e,c)}var v=Array.from(o.nodes(e,{at:c,match:e.isInline(t)?E=>V.isElement(E)&&o.isBlock(e,E):E=>o.isEditor(E),mode:"lowest",voids:i})),D=function(){var p=A.isRange(c)?A.intersection(c,o.range(e,B)):c;if(!p)return 0;var l=Array.from(o.nodes(e,{at:p,match:s,mode:a,voids:i}));if(l.length>0){var[b]=l,w=l[l.length-1],[,F]=b,[,I]=w;if(F.length===0&&I.length===0)return 0;var L=g.equals(F,I)?g.parent(F):g.common(F,I),$=o.range(e,F,I),W=o.node(e,L),[q]=W,U=L.length+1,j=g.next(I.slice(0,U)),y=oa(oa({},t),{},{children:[]});x.insertNodes(e,y,{at:j,voids:i}),x.moveNodes(e,{at:$,match:R=>V.isAncestor(q)&&q.children.includes(R),to:j.concat(0),voids:i})}},m;for(var[,B]of v)m=D()}})},Ho=()=>{var r={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ds(r,...n)},addMark:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ps(r,...n)},deleteBackward:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Es(r,...n)},deleteForward:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return bs(r,...n)},deleteFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return As(r,...n)},getFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return hs(r,...n)},insertBreak:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ks(r,...n)},insertSoftBreak:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ms(r,...n)},insertFragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ao(r,...n)},insertNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ns(r,...n)},insertText:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ls(r,...n)},normalizeNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return gs(r,...n)},removeMark:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return go(r,...n)},getDirtyPaths:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return vs(r,...n)},shouldNormalize:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ds(r,...n)},above:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ms(r,...n)},after:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Cs(r,...n)},before:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Bs(r,...n)},collapse:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return wo(r,...n)},delete:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return bo(r,...n)},deselect:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Fo(r,...n)},edges:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ws(r,...n)},elementReadOnly:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Fs(r,...n)},end:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ys(r,...n)},first:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Os(r,...n)},fragment:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return xs(r,...n)},getMarks:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Js(r,...n)},hasBlocks:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ps(r,...n)},hasInlines:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ts(r,...n)},hasPath:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return js(r,...n)},hasTexts:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Rs(r,...n)},insertNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Po(r,...n)},isBlock:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return zs(r,...n)},isEdge:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return $s(r,...n)},isEmpty:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ws(r,...n)},isEnd:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return qs(r,...n)},isNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Hs(r,...n)},isStart:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ks(r,...n)},last:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Vs(r,...n)},leaf:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Us(r,...n)},levels:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Gs(r,...n)},liftNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return To(r,...n)},mergeNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ko(r,...n)},move:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return yo(r,...n)},moveNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return No(r,...n)},next:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Zs(r,...n)},node:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Qs(r,...n)},nodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return _s(r,...n)},normalize:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return eo(r,...n)},parent:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ro(r,...n)},path:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ao(r,...n)},pathRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return to(r,...n)},pathRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return no(r,...n)},point:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return so(r,...n)},pointRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return uo(r,...n)},pointRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return io(r,...n)},positions:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return oo(r,...n)},previous:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return lo(r,...n)},range:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return vo(r,...n)},rangeRef:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return fo(r,...n)},rangeRefs:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return co(r,...n)},removeNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Mo(r,...n)},select:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Oo(r,...n)},setNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Io(r,...n)},setNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Do(r,...n)},setPoint:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return xo(r,...n)},setSelection:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return So(r,...n)},splitNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return zo(r,...n)},start:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return mo(r,...n)},string:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return po(r,...n)},unhangRange:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Co(r,...n)},unsetNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return $o(r,...n)},unwrapNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Wo(r,...n)},void:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Ss(r,...n)},withoutNormalizing:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Bo(r,...n)},wrapNodes:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return qo(r,...n)},shouldMergeNodesRemovePrevNode:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Eo(r,...n)}};return r};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function la(r){return Object.prototype.toString.call(r)==="[object Object]"}function Ko(r){var e,t;return la(r)===!1?!1:(e=r.constructor,e===void 0?!0:(t=e.prototype,!(la(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}var Vo={isHistory(r){return Ko(r)&&Array.isArray(r.redos)&&Array.isArray(r.undos)&&(r.redos.length===0||_e.isOperationList(r.redos[0].operations))&&(r.undos.length===0||_e.isOperationList(r.undos[0].operations))}},Ct=new WeakMap,nr=new WeakMap,qr=new WeakMap,qe={isHistoryEditor(r){return Vo.isHistory(r.history)&&o.isEditor(r)},isMerging(r){return nr.get(r)},isSplittingOnce(r){return qr.get(r)},setSplittingOnce(r,e){qr.set(r,e)},isSaving(r){return Ct.get(r)},redo(r){r.redo()},undo(r){r.undo()},withMerging(r,e){var t=qe.isMerging(r);nr.set(r,!0),e(),nr.set(r,t)},withNewBatch(r,e){var t=qe.isMerging(r);nr.set(r,!0),qr.set(r,!0),e(),nr.set(r,t),qr.delete(r)},withoutMerging(r,e){var t=qe.isMerging(r);nr.set(r,!1),e(),nr.set(r,t)},withoutSaving(r,e){var t=qe.isSaving(r);Ct.set(r,!1);try{e()}finally{Ct.set(r,t)}}},Uo=r=>{var e=r,{apply:t}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:a}=n;if(a.length>0){var u=a[a.length-1];u.selectionBefore&&x.setSelection(e,u.selectionBefore),qe.withoutSaving(e,()=>{o.withoutNormalizing(e,()=>{for(var i of u.operations)e.apply(i)})}),n.redos.pop(),e.writeHistory("undos",u)}},e.undo=()=>{var{history:n}=e,{undos:a}=n;if(a.length>0){var u=a[a.length-1];qe.withoutSaving(e,()=>{o.withoutNormalizing(e,()=>{var i=u.operations.map(_e.inverse).reverse();for(var s of i)e.apply(s);u.selectionBefore&&x.setSelection(e,u.selectionBefore)})}),e.writeHistory("redos",u),n.undos.pop()}},e.apply=n=>{var{operations:a,history:u}=e,{undos:i}=u,s=i[i.length-1],c=s&&s.operations[s.operations.length-1],f=qe.isSaving(e),d=qe.isMerging(e);if(f==null&&(f=Yo(n)),f){if(d==null&&(s==null?d=!1:a.length!==0?d=!0:d=Go(n,c)),qe.isSplittingOnce(e)&&(d=!1,qe.setSplittingOnce(e,void 0)),s&&d)s.operations.push(n);else{var h={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",h)}for(;i.length>100;)i.shift();u.redos=[]}t(n)},e.writeHistory=(n,a)=>{e.history[n].push(a)},e},Go=(r,e)=>!!(e&&r.type==="insert_text"&&e.type==="insert_text"&&r.offset===e.offset+e.text.length&&g.equals(r.path,e.path)||e&&r.type==="remove_text"&&e.type==="remove_text"&&r.offset+r.text.length===e.offset&&g.equals(r.path,e.path)),Yo=(r,e)=>r.type!=="set_selection",Bt,fa;function Xo(){if(fa)return Bt;fa=1,Bt=a;var r="֑-߿יִ-﷽ﹰ-ﻼ",e="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",t=new RegExp("^[^"+e+"]*["+r+"]"),n=new RegExp("^[^"+r+"]*["+e+"]");function a(u){return u=String(u||""),t.test(u)?"rtl":n.test(u)?"ltr":"neutral"}return Bt}var Jo=Xo();const Bu=lt(Jo);var Et,ca;function on(){if(ca)return Et;ca=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Et=r,Et}var bt,da;function Zo(){if(da)return bt;da=1;var r=typeof zr=="object"&&zr&&zr.Object===Object&&zr;return bt=r,bt}var At,va;function Eu(){if(va)return At;va=1;var r=Zo(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return At=t,At}var wt,ha;function Qo(){if(ha)return wt;ha=1;var r=Eu(),e=function(){return r.Date.now()};return wt=e,wt}var Ft,ga;function _o(){if(ga)return Ft;ga=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return Ft=e,Ft}var yt,Da;function el(){if(Da)return yt;Da=1;var r=_o(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return yt=t,yt}var Ot,ma;function bu(){if(ma)return Ot;ma=1;var r=Eu(),e=r.Symbol;return Ot=e,Ot}var xt,pa;function rl(){if(pa)return xt;pa=1;var r=bu(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,a=r?r.toStringTag:void 0;function u(i){var s=t.call(i,a),c=i[a];try{i[a]=void 0;var f=!0}catch{}var d=n.call(i);return f&&(s?i[a]=c:delete i[a]),d}return xt=u,xt}var St,Ca;function tl(){if(Ca)return St;Ca=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return St=t,St}var Pt,Ba;function nl(){if(Ba)return Pt;Ba=1;var r=bu(),e=rl(),t=tl(),n="[object Null]",a="[object Undefined]",u=r?r.toStringTag:void 0;function i(s){return s==null?s===void 0?a:n:u&&u in Object(s)?e(s):t(s)}return Pt=i,Pt}var Tt,Ea;function al(){if(Ea)return Tt;Ea=1;function r(e){return e!=null&&typeof e=="object"}return Tt=r,Tt}var jt,ba;function ul(){if(ba)return jt;ba=1;var r=nl(),e=al(),t="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&r(a)==t}return jt=n,jt}var Rt,Aa;function il(){if(Aa)return Rt;Aa=1;var r=el(),e=on(),t=ul(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function c(f){if(typeof f=="number")return f;if(t(f))return n;if(e(f)){var d=typeof f.valueOf=="function"?f.valueOf():f;f=e(d)?d+"":d}if(typeof f!="string")return f===0?f:+f;f=r(f);var h=u.test(f);return h||i.test(f)?s(f.slice(2),h?2:8):a.test(f)?n:+f}return Rt=c,Rt}var kt,wa;function Au(){if(wa)return kt;wa=1;var r=on(),e=Qo(),t=il(),n="Expected a function",a=Math.max,u=Math.min;function i(s,c,f){var d,h,v,D,m,B,E=0,p=!1,l=!1,b=!0;if(typeof s!="function")throw new TypeError(n);c=t(c)||0,r(f)&&(p=!!f.leading,l="maxWait"in f,v=l?a(t(f.maxWait)||0,c):v,b="trailing"in f?!!f.trailing:b);function w(y){var R=d,k=h;return d=h=void 0,E=y,D=s.apply(k,R),D}function F(y){return E=y,m=setTimeout($,c),p?w(y):D}function I(y){var R=y-B,k=y-E,J=c-R;return l?u(J,v-k):J}function L(y){var R=y-B,k=y-E;return B===void 0||R>=c||R<0||l&&k>=v}function $(){var y=e();if(L(y))return W(y);m=setTimeout($,I(y))}function W(y){return m=void 0,b&&d?w(y):(d=h=void 0,D)}function q(){m!==void 0&&clearTimeout(m),E=0,d=B=h=m=void 0}function U(){return m===void 0?D:W(e())}function j(){var y=e(),R=L(y);if(d=arguments,h=this,B=y,R){if(m===void 0)return F(B);if(l)return clearTimeout(m),m=setTimeout($,c),w(B)}return m===void 0&&(m=setTimeout($,c)),D}return j.cancel=q,j.flush=U,j}return kt=i,kt}var sl=Au();const ol=lt(sl);var Nt,Fa;function ll(){if(Fa)return Nt;Fa=1;var r=Au(),e=on(),t="Expected a function";function n(a,u,i){var s=!0,c=!0;if(typeof a!="function")throw new TypeError(t);return e(i)&&(s="leading"in i?!!i.leading:s,c="trailing"in i?!!i.trailing:c),r(a,u,{leading:s,maxWait:u,trailing:c})}return Nt=n,Nt}var fl=ll();const cl=lt(fl),ya=r=>typeof r=="object"&&r!=null&&r.nodeType===1,Oa=(r,e)=>(!e||r!=="hidden")&&r!=="visible"&&r!=="clip",Hr=(r,e)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){const t=getComputedStyle(r,null);return Oa(t.overflowY,e)||Oa(t.overflowX,e)||(n=>{const a=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!a&&(a.clientHeight<n.scrollHeight||a.clientWidth<n.scrollWidth)})(r)}return!1},Kr=(r,e,t,n,a,u,i,s)=>u<r&&i>e||u>r&&i<e?0:u<=r&&s<=t||i>=e&&s>=t?u-r-n:i>e&&s<t||u<r&&s>t?i-e+a:0,dl=r=>{const e=r.parentElement;return e??(r.getRootNode().host||null)},xa=(r,e)=>{var t,n,a,u;if(typeof document>"u")return[];const{scrollMode:i,block:s,inline:c,boundary:f,skipOverflowHiddenElements:d}=e,h=typeof f=="function"?f:J=>J!==f;if(!ya(r))throw new TypeError("Invalid target");const v=document.scrollingElement||document.documentElement,D=[];let m=r;for(;ya(m)&&h(m);){if(m=dl(m),m===v){D.push(m);break}m!=null&&m===document.body&&Hr(m)&&!Hr(document.documentElement)||m!=null&&Hr(m,d)&&D.push(m)}const B=(n=(t=window.visualViewport)==null?void 0:t.width)!=null?n:innerWidth,E=(u=(a=window.visualViewport)==null?void 0:a.height)!=null?u:innerHeight,{scrollX:p,scrollY:l}=window,{height:b,width:w,top:F,right:I,bottom:L,left:$}=r.getBoundingClientRect(),{top:W,right:q,bottom:U,left:j}=(J=>{const G=window.getComputedStyle(J);return{top:parseFloat(G.scrollMarginTop)||0,right:parseFloat(G.scrollMarginRight)||0,bottom:parseFloat(G.scrollMarginBottom)||0,left:parseFloat(G.scrollMarginLeft)||0}})(r);let y=s==="start"||s==="nearest"?F-W:s==="end"?L+U:F+b/2-W+U,R=c==="center"?$+w/2-j+q:c==="end"?I+q:$-j;const k=[];for(let J=0;J<D.length;J++){const G=D[J],{height:ne,width:ee,top:re,right:ae,bottom:me,left:Y}=G.getBoundingClientRect();if(i==="if-needed"&&F>=0&&$>=0&&L<=E&&I<=B&&(G===v&&!Hr(G)||F>=re&&L<=me&&$>=Y&&I<=ae))return k;const ie=getComputedStyle(G),pe=parseInt(ie.borderLeftWidth,10),Ce=parseInt(ie.borderTopWidth,10),ye=parseInt(ie.borderRightWidth,10),ke=parseInt(ie.borderBottomWidth,10);let C=0,P=0;const O="offsetWidth"in G?G.offsetWidth-G.clientWidth-pe-ye:0,T="offsetHeight"in G?G.offsetHeight-G.clientHeight-Ce-ke:0,_="offsetWidth"in G?G.offsetWidth===0?0:ee/G.offsetWidth:0,K="offsetHeight"in G?G.offsetHeight===0?0:ne/G.offsetHeight:0;if(v===G)C=s==="start"?y:s==="end"?y-E:s==="nearest"?Kr(l,l+E,E,Ce,ke,l+y,l+y+b,b):y-E/2,P=c==="start"?R:c==="center"?R-B/2:c==="end"?R-B:Kr(p,p+B,B,pe,ye,p+R,p+R+w,w),C=Math.max(0,C+l),P=Math.max(0,P+p);else{C=s==="start"?y-re-Ce:s==="end"?y-me+ke+T:s==="nearest"?Kr(re,me,ne,Ce,ke+T,y,y+b,b):y-(re+ne/2)+T/2,P=c==="start"?R-Y-pe:c==="center"?R-(Y+ee/2)+O/2:c==="end"?R-ae+ye+O:Kr(Y,ae,ee,pe,ye+O,R,R+w,w);const{scrollLeft:oe,scrollTop:de}=G;C=K===0?0:Math.max(0,Math.min(de+C/K,G.scrollHeight-ne/K+T)),P=_===0?0:Math.max(0,Math.min(oe+P/_,G.scrollWidth-ee/_+O)),y+=de-C,R+=oe-P}k.push({el:G,top:C,left:P})}return k},vl=r=>r===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(r)?r:{block:"start",inline:"nearest"};function hl(r,e){if(!r.isConnected||!(a=>{let u=a;for(;u&&u.parentNode;){if(u.parentNode===document)return!0;u=u.parentNode instanceof ShadowRoot?u.parentNode.host:u.parentNode}return!1})(r))return;const t=(a=>{const u=window.getComputedStyle(a);return{top:parseFloat(u.scrollMarginTop)||0,right:parseFloat(u.scrollMarginRight)||0,bottom:parseFloat(u.scrollMarginBottom)||0,left:parseFloat(u.scrollMarginLeft)||0}})(r);if((a=>typeof a=="object"&&typeof a.behavior=="function")(e))return e.behavior(xa(r,e));const n=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:a,top:u,left:i}of xa(r,vl(e))){const s=u-t.top+t.bottom,c=i-t.left+t.right;a.scroll({top:s,left:c,behavior:n})}}var wu=globalThis.Node,gl=globalThis.Text,ln=r=>r&&r.ownerDocument&&r.ownerDocument.defaultView||null,Dl=r=>rr(r)&&r.nodeType===8,Ne=r=>rr(r)&&r.nodeType===1,rr=r=>{var e=ln(r);return!!e&&r instanceof e.Node},Gt=r=>{var e=r&&r.anchorNode&&ln(r.anchorNode);return!!e&&r instanceof e.Selection},Fu=r=>rr(r)&&r.nodeType===3,ml=r=>r.clipboardData&&r.clipboardData.getData("text/plain")!==""&&r.clipboardData.types.length===1,pl=r=>{var[e,t]=r;if(Ne(e)&&e.childNodes.length){var n=t===e.childNodes.length,a=n?t-1:t;for([e,a]=yu(e,a,n?"backward":"forward"),n=a<t;Ne(e)&&e.childNodes.length;){var u=n?e.childNodes.length-1:0;e=Bl(e,u,n?"backward":"forward")}t=n&&e.textContent!=null?e.textContent.length:0}return[e,t]},Cl=r=>{for(var e=r&&r.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},yu=(r,e,t)=>{for(var{childNodes:n}=r,a=n[e],u=e,i=!1,s=!1;(Dl(a)||Ne(a)&&a.childNodes.length===0||Ne(a)&&a.getAttribute("contenteditable")==="false")&&!(i&&s);){if(u>=n.length){i=!0,u=e-1,t="backward";continue}if(u<0){s=!0,u=e+1,t="forward";continue}a=n[u],e=u,u+=t==="forward"?1:-1}return[a,e]},Bl=(r,e,t)=>{var[n]=yu(r,e,t);return n},Ou=r=>{var e="";if(Fu(r)&&r.nodeValue)return r.nodeValue;if(Ne(r)){for(var t of Array.from(r.childNodes))e+=Ou(t);var n=getComputedStyle(r).getPropertyValue("display");(n==="block"||n==="list"||r.tagName==="BR")&&(e+=`
`)}return e},El=/data-slate-fragment="(.+?)"/m,bl=r=>{var e=r.getData("text/html"),[,t]=e.match(El)||[];return t},Or=r=>r.getSelection!=null?r.getSelection():document.getSelection(),fn=(r,e,t)=>{var{target:n}=e;if(Ne(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=Q.getWindow(r);if(a.contains(n))return Q.hasDOMNode(r,n,{editable:!0});var u=t.find(i=>{var{addedNodes:s,removedNodes:c}=i;for(var f of s)if(f===n||f.contains(n))return!0;for(var d of c)if(d===n||d.contains(n))return!0});return!u||u===e?!1:fn(r,u,t)},Al=()=>{for(var r=document.activeElement;(e=r)!==null&&e!==void 0&&e.shadowRoot&&(t=r.shadowRoot)!==null&&t!==void 0&&t.activeElement;){var e,t,n;r=(n=r)===null||n===void 0||(n=n.shadowRoot)===null||n===void 0?void 0:n.activeElement}return r},Sa=(r,e)=>!!(r.compareDocumentPosition(e)&wu.DOCUMENT_POSITION_PRECEDING),wl=(r,e)=>!!(r.compareDocumentPosition(e)&wu.DOCUMENT_POSITION_FOLLOWING),Mt,It,Fl=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Pa=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),xe=typeof navigator<"u"&&/Android/.test(navigator.userAgent),mr=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ur=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),yl=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),xu=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Ol=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),xl=xe&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Sl=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Pl=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Tl=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Qr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((Mt=navigator.userAgent.match(/Version\/(\d+)/))!==null&&Mt!==void 0&&Mt[1]&&parseInt((It=navigator.userAgent.match(/Version\/(\d+)/))===null||It===void 0?void 0:It[1],10)<17);var Je=(!Ol||!xl)&&!yl&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function Nr(r){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(r)}function jl(r,e){if(Nr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Nr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Rl(r){var e=jl(r,"string");return Nr(e)==="symbol"?e:String(e)}function cn(r,e,t){return e=Rl(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var kl=0;class Su{constructor(){cn(this,"id",void 0),this.id="".concat(kl++)}}var Cr=new WeakMap,pr=new WeakMap,xr=new WeakMap,Pu=new WeakMap,_r=new WeakMap,Yt=new WeakMap,Mr=new WeakMap,sr=new WeakMap,st=new WeakMap,ht=new WeakMap,Xt=new WeakMap,er=new WeakMap,ir=new WeakMap,Sr=new WeakMap,Jt=new WeakMap,dn=new WeakMap,Le=new WeakMap,Ue=new WeakMap,Te=new WeakMap,Ze=new WeakMap,Qe=new WeakMap,Tu=new WeakMap,Ar=Symbol("placeholder"),ju=Symbol("mark-placeholder"),Q={androidPendingDiffs:r=>Te.get(r),androidScheduleFlush:r=>{var e;(e=dn.get(r))===null||e===void 0||e()},blur:r=>{var e=Q.toDOMNode(r,r),t=Q.findDocumentOrShadowRoot(r);er.set(r,!1),t.activeElement===e&&e.blur()},deselect:r=>{var{selection:e}=r,t=Q.findDocumentOrShadowRoot(r),n=Or(t);n&&n.rangeCount>0&&n.removeAllRanges(),e&&x.deselect(r)},findDocumentOrShadowRoot:r=>{var e=Q.toDOMNode(r,r),t=e.getRootNode();return t instanceof Document||t instanceof ShadowRoot?t:e.ownerDocument},findEventRange:(r,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:t,clientY:n,target:a}=e;if(t==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var u=Q.toSlateNode(r,e.target),i=Q.findPath(r,u);if(V.isElement(u)&&o.isVoid(r,u)){var s=a.getBoundingClientRect(),c=r.isInline(u)?t-s.left<s.left+s.width-t:n-s.top<s.top+s.height-n,f=o.point(r,i,{edge:c?"start":"end"}),d=c?o.before(r,f):o.after(r,f);if(d){var h=o.range(r,d);return h}}var v,{document:D}=Q.getWindow(r);if(D.caretRangeFromPoint)v=D.caretRangeFromPoint(t,n);else{var m=D.caretPositionFromPoint(t,n);m&&(v=D.createRange(),v.setStart(m.offsetNode,m.offset),v.setEnd(m.offsetNode,m.offset))}if(!v)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var B=Q.toSlateRange(r,v,{exactMatch:!1,suppressThrow:!1});return B},findKey:(r,e)=>{var t=st.get(e);return t||(t=new Su,st.set(e,t)),t},findPath:(r,e)=>{for(var t=[],n=e;;){var a=xr.get(n);if(a==null){if(o.isEditor(n))return t;break}var u=pr.get(n);if(u==null)break;t.unshift(u),n=a}throw new Error("Unable to find the path for Slate node: ".concat(Be.stringify(e)))},focus:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!er.get(e)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{Q.focus(e,{retries:t.retries-1})},10);return}var n=Q.toDOMNode(e,e),a=Q.findDocumentOrShadowRoot(e);if(a.activeElement!==n){if(e.selection&&a instanceof Document){var u=Or(a),i=Q.toDOMRange(e,e.selection);u==null||u.removeAllRanges(),u==null||u.addRange(i)}e.selection||x.select(e,o.start(e,[])),er.set(e,!0),n.focus({preventScroll:!0})}}},getWindow:r=>{var e=Pu.get(r);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:a=!1}=n,u=Q.toDOMNode(e,e),i;try{i=Ne(t)?t:t.parentElement}catch(s){if(s instanceof Error&&!s.message.includes('Permission denied to access property "nodeType"'))throw s}return i?i.closest("[data-slate-editor]")===u&&(!a||i.isContentEditable?!0:typeof i.isContentEditable=="boolean"&&i.closest('[contenteditable="false"]')===u||!!i.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(r,e)=>rr(e)&&Q.hasDOMNode(r,e,{editable:!0}),hasRange:(r,e)=>{var{anchor:t,focus:n}=e;return o.hasPath(r,t.path)&&o.hasPath(r,n.path)},hasSelectableTarget:(r,e)=>Q.hasEditableTarget(r,e)||Q.isTargetInsideNonReadonlyVoid(r,e),hasTarget:(r,e)=>rr(e)&&Q.hasDOMNode(r,e),insertData:(r,e)=>{r.insertData(e)},insertFragmentData:(r,e)=>r.insertFragmentData(e),insertTextData:(r,e)=>r.insertTextData(e),isComposing:r=>!!ir.get(r),isFocused:r=>!!er.get(r),isReadOnly:r=>!!Xt.get(r),isTargetInsideNonReadonlyVoid:(r,e)=>{if(Xt.get(r))return!1;var t=Q.hasTarget(r,e)&&Q.toSlateNode(r,e);return V.isElement(t)&&o.isVoid(r,t)},setFragmentData:(r,e,t)=>r.setFragmentData(e,t),toDOMNode:(r,e)=>{var t=ht.get(r),n=o.isEditor(e)?_r.get(r):t==null?void 0:t.get(Q.findKey(r,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Be.stringify(e)));return n},toDOMPoint:(r,e)=>{var[t]=o.node(r,e.path),n=Q.toDOMNode(r,t),a;o.void(r,{at:e})&&(e={path:e.path,offset:0});for(var u="[data-slate-string], [data-slate-zero-width]",i=Array.from(n.querySelectorAll(u)),s=0,c=0;c<i.length;c++){var f=i[c],d=f.childNodes[0];if(!(d==null||d.textContent==null)){var{length:h}=d.textContent,v=f.getAttribute("data-slate-length"),D=v==null?h:parseInt(v,10),m=s+D,B=i[c+1];if(e.offset===m&&B!==null&&B!==void 0&&B.hasAttribute("data-slate-mark-placeholder")){var E,p=B.childNodes[0];a=[p instanceof gl?p:B,(E=B.textContent)!==null&&E!==void 0&&E.startsWith("\uFEFF")?1:0];break}if(e.offset<=m){var l=Math.min(h,Math.max(0,e.offset-s));a=[d,l];break}s=m}}if(!a)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Be.stringify(e)));return a},toDOMRange:(r,e)=>{var{anchor:t,focus:n}=e,a=A.isBackward(e),u=Q.toDOMPoint(r,t),i=A.isCollapsed(e)?u:Q.toDOMPoint(r,n),s=Q.getWindow(r),c=s.document.createRange(),[f,d]=a?i:u,[h,v]=a?u:i,D=Ne(f)?f:f.parentElement,m=!!D.getAttribute("data-slate-zero-width"),B=Ne(h)?h:h.parentElement,E=!!B.getAttribute("data-slate-zero-width");return c.setStart(f,m?1:d),c.setEnd(h,E?1:v),c},toSlateNode:(r,e)=>{var t=Ne(e)?e:e.parentElement;t&&!t.hasAttribute("data-slate-node")&&(t=t.closest("[data-slate-node]"));var n=t?Mr.get(t):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return n},toSlatePoint:(r,e,t)=>{var{exactMatch:n,suppressThrow:a,searchDirection:u="backward"}=t,[i,s]=n?e:pl(e),c=i.parentNode,f=null,d=0;if(c){var h,v,D=Q.toDOMNode(r,r),m=c.closest('[data-slate-void="true"]'),B=m&&D.contains(m)?m:null,E=c.closest('[contenteditable="false"]'),p=E&&D.contains(E)?E:null,l=c.closest("[data-slate-leaf]"),b=null;if(l){if(f=l.closest('[data-slate-node="text"]'),f){var w=Q.getWindow(r),F=w.document.createRange();F.setStart(f,0),F.setEnd(i,s);var I=F.cloneContents(),L=[...Array.prototype.slice.call(I.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(I.querySelectorAll("[contenteditable=false]"))];L.forEach(Y=>{if(xe&&!n&&Y.hasAttribute("data-slate-zero-width")&&Y.textContent.length>0&&Y.textContext!=="\uFEFF"){Y.textContent.startsWith("\uFEFF")&&(Y.textContent=Y.textContent.slice(1));return}Y.parentNode.removeChild(Y)}),d=I.textContent.length,b=f}}else if(B){for(var $=B.querySelectorAll("[data-slate-leaf]"),W=0;W<$.length;W++){var q=$[W];if(Q.hasDOMNode(r,q)){l=q;break}}l?(f=l.closest('[data-slate-node="text"]'),b=l,d=b.textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(Y=>{d-=Y.textContent.length})):d=1}else if(p){var U=Y=>Y?Y.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],j=p.closest('[data-slate-node="element"]');if(u==="forward"){var y,R=[...U(j),...U(j==null?void 0:j.nextElementSibling)];l=(y=R.find(Y=>wl(p,Y)))!==null&&y!==void 0?y:null}else{var k,J=[...U(j==null?void 0:j.previousElementSibling),...U(j)];l=(k=J.findLast(Y=>Sa(p,Y)))!==null&&k!==void 0?k:null}l&&(f=l.closest('[data-slate-node="text"]'),b=l,u==="forward"?d=0:(d=b.textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(Y=>{d-=Y.textContent.length})))}b&&d===b.textContent.length&&xe&&b.getAttribute("data-slate-zero-width")==="z"&&(h=b.textContent)!==null&&h!==void 0&&h.startsWith("\uFEFF")&&(c.hasAttribute("data-slate-zero-width")||mr&&(v=b.textContent)!==null&&v!==void 0&&v.endsWith(`

`))&&d--}if(xe&&!f&&!n){var G=c.hasAttribute("data-slate-node")?c:c.closest("[data-slate-node]");if(G&&Q.hasDOMNode(r,G,{editable:!0})){var ne=Q.toSlateNode(r,G),{path:ee,offset:re}=o.start(r,Q.findPath(r,ne));return G.querySelector("[data-slate-leaf]")||(re=s),{path:ee,offset:re}}}if(!f){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var ae=Q.toSlateNode(r,f),me=Q.findPath(r,ae);return{path:me,offset:d}},toSlateRange:(r,e,t)=>{var n,{exactMatch:a,suppressThrow:u}=t,i=Gt(e)?e.anchorNode:e.startContainer,s,c,f,d,h;if(i)if(Gt(e)){if(mr&&e.rangeCount>1){f=e.focusNode;var v=e.getRangeAt(0),D=e.getRangeAt(e.rangeCount-1);if(f instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement&&D.startContainer instanceof HTMLTableRowElement){let I=function(L){return L.childElementCount>0?I(L.children[0]):L};var m=v.startContainer,B=D.startContainer,E=I(m.children[v.startOffset]),p=I(B.children[D.startOffset]);d=0,p.childNodes.length>0?s=p.childNodes[0]:s=p,E.childNodes.length>0?f=E.childNodes[0]:f=E,p instanceof HTMLElement?c=p.innerHTML.length:c=0}else v.startContainer===f?(s=D.endContainer,c=D.endOffset,d=v.startOffset):(s=v.startContainer,c=v.endOffset,d=D.startOffset)}else s=e.anchorNode,c=e.anchorOffset,f=e.focusNode,d=e.focusOffset;xu&&Cl(s)||mr?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed}else s=e.startContainer,c=e.startOffset,f=e.endContainer,d=e.endOffset,h=e.collapsed;if(s==null||f==null||c==null||d==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));mr&&(n=f.textContent)!==null&&n!==void 0&&n.endsWith(`

`)&&d===f.textContent.length&&d--;var l=Q.toSlatePoint(r,[s,c],{exactMatch:a,suppressThrow:u});if(!l)return null;var b=Sa(s,f)||s===f&&d<c,w=h?l:Q.toSlatePoint(r,[f,d],{exactMatch:a,suppressThrow:u,searchDirection:b?"forward":"backward"});if(!w)return null;var F={anchor:l,focus:w};return A.isExpanded(F)&&A.isForward(F)&&Ne(f)&&o.void(r,{at:F.focus,mode:"highest"})&&(F=o.unhangRange(r,F,{voids:!0})),F}};function Nl(r,e){var{path:t,diff:n}=e;if(!o.hasPath(r,t))return!1;var a=z.get(r,t);if(!H.isText(a))return!1;if(n.start!==a.text.length||n.text.length===0)return a.text.slice(n.start,n.start+n.text.length)===n.text;var u=g.next(t);if(!o.hasPath(r,u))return!1;var i=z.get(r,u);return H.isText(i)&&i.text.startsWith(n.text)}function Ru(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.reduce((a,u)=>a.slice(0,u.start)+u.text+a.slice(u.end),r)}function Ml(r,e){for(var t=Math.min(r.length,e.length),n=0;n<t;n++)if(r.charAt(n)!==e.charAt(n))return n;return t}function Il(r,e,t){for(var n=Math.min(r.length,e.length,t),a=0;a<n;a++)if(r.charAt(r.length-a-1)!==e.charAt(e.length-a-1))return a;return n}function ku(r,e){var{start:t,end:n,text:a}=e,u=r.slice(t,n),i=Ml(u,a),s=Math.min(u.length-i,a.length-i),c=Il(u,a,s),f={start:t+i,end:n-c,text:a.slice(i,a.length-c)};return f.start===f.end&&f.text.length===0?null:f}function Ll(r,e,t){var n=Math.min(e.start,t.start),a=Math.max(0,Math.min(e.start+e.text.length,t.end)-t.start),u=Ru(r,e,t),i=Math.max(t.start+t.text.length,e.start+e.text.length+(e.start+e.text.length>t.start?t.text.length:0)-a),s=u.slice(n,i),c=Math.max(e.end,t.end-e.text.length+(e.end-e.start));return ku(r,{start:n,end:c,text:s})}function zl(r){var{path:e,diff:t}=r;return{anchor:{path:e,offset:t.start},focus:{path:e,offset:t.end}}}function Zt(r,e){var{path:t,offset:n}=e;if(!o.hasPath(r,t))return null;var a=z.get(r,t);if(!H.isText(a))return null;var u=o.above(r,{match:s=>V.isElement(s)&&o.isBlock(r,s),at:t});if(!u)return null;for(;n>a.text.length;){var i=o.next(r,{at:t,match:H.isText});if(!i||!g.isDescendant(i[1],u[1]))return null;n-=a.text.length,a=i[0],t=i[1]}return{path:t,offset:n}}function Ta(r,e){var t=Zt(r,e.anchor);if(!t)return null;if(A.isCollapsed(e))return{anchor:t,focus:t};var n=Zt(r,e.focus);return n?{anchor:t,focus:n}:null}function Qt(r,e,t){var n=Te.get(r),a=n==null?void 0:n.find(d=>{var{path:h}=d;return g.equals(h,e.path)});if(!a||e.offset<=a.diff.start)return te.transform(e,t,{affinity:"backward"});var{diff:u}=a;if(e.offset<=u.start+u.text.length){var i={path:e.path,offset:u.start},s=te.transform(i,t,{affinity:"backward"});return s?{path:s.path,offset:s.offset+e.offset-u.start}:null}var c={path:e.path,offset:e.offset-u.text.length+u.end-u.start},f=te.transform(c,t,{affinity:"backward"});return f?t.type==="split_node"&&g.equals(t.path,e.path)&&c.offset<t.position&&u.start<t.position?f:{path:f.path,offset:f.offset+u.text.length-u.end+u.start}:null}function ja(r,e,t){var n=Qt(r,e.anchor,t);if(!n)return null;if(A.isCollapsed(e))return{anchor:n,focus:n};var a=Qt(r,e.focus,t);return a?{anchor:n,focus:a}:null}function $l(r,e){var{path:t,diff:n,id:a}=r;switch(e.type){case"insert_text":return!g.equals(e.path,t)||e.offset>=n.end?r:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:a,path:t}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:a,path:t};case"remove_text":return!g.equals(e.path,t)||e.offset>=n.end?r:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:a,path:t}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:a,path:t};case"split_node":return!g.equals(e.path,t)||e.position>=n.end?{diff:n,id:a,path:g.transform(t,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:a,path:t}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:a,path:g.transform(t,e,{affinity:"forward"})};case"merge_node":return g.equals(e.path,t)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:a,path:g.transform(t,e)}:{diff:n,id:a,path:g.transform(t,e)}}var u=g.transform(t,e);return u?{diff:n,path:u,id:a}:null}var Ra=(r,e)=>{var t=(e.top+e.bottom)/2;return r.top<=t&&r.bottom>=t},ka=(r,e,t)=>{var n=Q.toDOMRange(r,e).getBoundingClientRect(),a=Q.toDOMRange(r,t).getBoundingClientRect();return Ra(n,a)&&Ra(a,n)},Wl=(r,e)=>{var t=o.range(r,A.end(e)),n=Array.from(o.positions(r,{at:e})),a=0,u=n.length,i=Math.floor(u/2);if(ka(r,o.range(r,n[a]),t))return o.range(r,n[a],t);if(n.length<2)return o.range(r,n[n.length-1],t);for(;i!==n.length&&i!==a;)ka(r,o.range(r,n[i]),t)?u=i:a=i,i=Math.floor((a+u)/2);return o.range(r,n[a],t)};function Na(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Ma(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Na(Object(t),!0).forEach(function(n){cn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Na(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ql=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:a,onChange:u,deleteBackward:i,addMark:s,removeMark:c}=n;return ht.set(n,new WeakMap),n.addMark=(f,d)=>{var h,v;(h=dn.get(n))===null||h===void 0||h(),!Le.get(n)&&(v=Te.get(n))!==null&&v!==void 0&&v.length&&Le.set(n,null),Ue.delete(n),s(f,d)},n.removeMark=f=>{var d;!Le.get(n)&&(d=Te.get(n))!==null&&d!==void 0&&d.length&&Le.set(n,null),Ue.delete(n),c(f)},n.deleteBackward=f=>{if(f!=="line")return i(f);if(n.selection&&A.isCollapsed(n.selection)){var d=o.above(n,{match:m=>V.isElement(m)&&o.isBlock(n,m),at:n.selection});if(d){var[,h]=d,v=o.range(n,h,n.selection.anchor),D=Wl(n,v);A.isCollapsed(D)||x.delete(n,{at:D})}}},n.apply=f=>{var d=[],h=[],v=Te.get(n);if(v!=null&&v.length){var D=v.map(R=>$l(R,f)).filter(Boolean);Te.set(n,D)}var m=Qe.get(n);m&&Qe.set(n,ja(n,m,f));var B=Ze.get(n);if(B!=null&&B.at){var E=te.isPoint(B==null?void 0:B.at)?Qt(n,B.at,f):ja(n,B.at,f);Ze.set(n,E?Ma(Ma({},B),{},{at:E}):null)}switch(f.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...gr(n,f.path));break}case"set_selection":{var p;(p=Sr.get(n))===null||p===void 0||p.unref(),Sr.delete(n);break}case"insert_node":case"remove_node":{d.push(...gr(n,g.parent(f.path)));break}case"merge_node":{var l=g.previous(f.path);d.push(...gr(n,l));break}case"move_node":{var b=g.common(g.parent(f.path),g.parent(f.newPath));d.push(...gr(n,b));var w;g.isBefore(f.path,f.newPath)?(d.push(...gr(n,g.parent(f.path))),w=f.newPath):(d.push(...gr(n,g.parent(f.newPath))),w=f.path);var F=z.get(e,g.parent(w)),I=Q.findKey(n,F),L=o.pathRef(n,g.parent(w));h.push([L,I]);break}}switch(a(f),f.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":Cr.set(n,!0)}for(var[$,W]of d){var[q]=o.node(n,$);st.set(q,W)}for(var[U,j]of h){if(U.current){var[y]=o.node(n,U.current);st.set(y,j)}U.unref()}},n.setFragmentData=f=>{var{selection:d}=n;if(d){var[h,v]=A.edges(d),D=o.void(n,{at:h.path}),m=o.void(n,{at:v.path});if(!(A.isCollapsed(d)&&!D)){var B=Q.toDOMRange(n,d),E=B.cloneContents(),p=E.childNodes[0];if(E.childNodes.forEach(q=>{q.textContent&&q.textContent.trim()!==""&&(p=q)}),m){var[l]=m,b=B.cloneRange(),w=Q.toDOMNode(n,l);b.setEndAfter(w),E=b.cloneContents()}if(D&&(p=E.querySelector("[data-slate-spacer]")),Array.from(E.querySelectorAll("[data-slate-zero-width]")).forEach(q=>{var U=q.getAttribute("data-slate-zero-width")==="n";q.textContent=U?`
`:""}),Fu(p)){var F=p.ownerDocument.createElement("span");F.style.whiteSpace="pre",F.appendChild(p),E.appendChild(F),p=F}var I=n.getFragment(),L=JSON.stringify(I),$=window.btoa(encodeURIComponent(L));p.setAttribute("data-slate-fragment",$),f.setData("application/".concat(t),$);var W=E.ownerDocument.createElement("div");return W.appendChild(E),W.setAttribute("hidden","true"),E.ownerDocument.body.appendChild(W),f.setData("text/html",W.innerHTML),f.setData("text/plain",Ou(W)),E.ownerDocument.body.removeChild(W),f}}},n.insertData=f=>{n.insertFragmentData(f)||n.insertTextData(f)},n.insertFragmentData=f=>{var d=f.getData("application/".concat(t))||bl(f);if(d){var h=decodeURIComponent(window.atob(d)),v=JSON.parse(h);return n.insertFragment(v),!0}return!1},n.insertTextData=f=>{var d=f.getData("text/plain");if(d){var h=d.split(/\r\n|\r|\n/),v=!1;for(var D of h)v&&x.splitNodes(n,{always:!0}),n.insertText(D),v=!0;return!0}return!1},n.onChange=f=>{var d=Jt.get(n);d&&d(f),u(f)},n},gr=(r,e)=>{var t=[];for(var[n,a]of o.levels(r,{at:e})){var u=Q.findKey(r,n);t.push([a,u])}return t},Hl=3,Kl={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Vl={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Ul={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},fe=r=>{var e=Kl[r],t=Vl[r],n=Ul[r],a=e&&Jr.isHotkey(e),u=t&&Jr.isHotkey(t),i=n&&Jr.isHotkey(n);return s=>!!(a&&a(s)||Pa&&u&&u(s)||!Pa&&i&&i(s))},he={isBold:fe("bold"),isCompose:fe("compose"),isMoveBackward:fe("moveBackward"),isMoveForward:fe("moveForward"),isDeleteBackward:fe("deleteBackward"),isDeleteForward:fe("deleteForward"),isDeleteLineBackward:fe("deleteLineBackward"),isDeleteLineForward:fe("deleteLineForward"),isDeleteWordBackward:fe("deleteWordBackward"),isDeleteWordForward:fe("deleteWordForward"),isExtendBackward:fe("extendBackward"),isExtendForward:fe("extendForward"),isExtendLineBackward:fe("extendLineBackward"),isExtendLineForward:fe("extendLineForward"),isItalic:fe("italic"),isMoveLineBackward:fe("moveLineBackward"),isMoveLineForward:fe("moveLineForward"),isMoveWordBackward:fe("moveWordBackward"),isMoveWordForward:fe("moveWordForward"),isRedo:fe("redo"),isSoftBreak:fe("insertSoftBreak"),isSplitBlock:fe("splitBlock"),isTransposeCharacter:fe("transposeCharacter"),isUndo:fe("undo")};function Gl(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,u;for(u=0;u<n.length;u++)a=n[u],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function Ia(r,e){if(r==null)return{};var t=Gl(r,e),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(a=0;a<u.length;a++)n=u[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var Yl=["anchor","focus"],Xl=["anchor","focus"];function La(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function za(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?La(Object(t),!0).forEach(function(n){cn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):La(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Jl=(r,e)=>Object.keys(r).length===Object.keys(e).length&&Object.keys(r).every(t=>e.hasOwnProperty(t)&&r[t]===e[t]),Nu=(r,e)=>{var t=Ia(r,Yl),n=Ia(e,Xl);return r[Ar]===e[Ar]&&Jl(t,n)},vn=(r,e)=>{if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var n=r[t],a=e[t];if(!A.equals(n,a)||!Nu(n,a))return!1}return!0},Mu=(r,e)=>{if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var n=r[t],a=e[t];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!Nu(n,a))return!1}return!0},Zl=(r,e,t)=>{var n=Array.from(e.children,()=>[]);if(t.length===0)return n;var a=Q.findPath(r,e),u=a.length,i=o.range(r,a),s=new Array(e.children.length),c=b=>{var w=s[b];if(w)return w;var F=o.range(r,[...a,b]);return s[b]=F,F};for(var f of t){var d=A.intersection(i,f);if(d)for(var[h,v]=A.edges(d),D=h.path[u],m=v.path[u],B=D;B<=m;B++){var E=n[B];if(E){var p=c(B),l=A.intersection(p,f);l&&E.push(za(za({},f),l))}}}return n},or=[],Ql=function(){return or.some(function(r){return r.activeTargets.length>0})},_l=function(){return or.some(function(r){return r.skippedTargets.length>0})},$a="ResizeObserver loop completed with undelivered notifications.",ef=function(){var r;typeof ErrorEvent=="function"?r=new ErrorEvent("error",{message:$a}):(r=document.createEvent("Event"),r.initEvent("error",!1,!1),r.message=$a),window.dispatchEvent(r)},Ir;(function(r){r.BORDER_BOX="border-box",r.CONTENT_BOX="content-box",r.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Ir||(Ir={}));var lr=function(r){return Object.freeze(r)},rf=function(){function r(e,t){this.inlineSize=e,this.blockSize=t,lr(this)}return r}(),Iu=function(){function r(e,t,n,a){return this.x=e,this.y=t,this.width=n,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,lr(this)}return r.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,a=e.top,u=e.right,i=e.bottom,s=e.left,c=e.width,f=e.height;return{x:t,y:n,top:a,right:u,bottom:i,left:s,width:c,height:f}},r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r}(),hn=function(r){return r instanceof SVGElement&&"getBBox"in r},Lu=function(r){if(hn(r)){var e=r.getBBox(),t=e.width,n=e.height;return!t&&!n}var a=r,u=a.offsetWidth,i=a.offsetHeight;return!(u||i||r.getClientRects().length)},Wa=function(r){var e;if(r instanceof Element)return!0;var t=(e=r==null?void 0:r.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&r instanceof t.Element)},tf=function(r){switch(r.tagName){case"INPUT":if(r.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Pr=typeof window<"u"?window:{},Vr=new WeakMap,qa=/auto|scroll/,nf=/^tb|vertical/,af=/msie|trident/i.test(Pr.navigator&&Pr.navigator.userAgent),$e=function(r){return parseFloat(r||"0")},Br=function(r,e,t){return r===void 0&&(r=0),e===void 0&&(e=0),t===void 0&&(t=!1),new rf((t?e:r)||0,(t?r:e)||0)},Ha=lr({devicePixelContentBoxSize:Br(),borderBoxSize:Br(),contentBoxSize:Br(),contentRect:new Iu(0,0,0,0)}),zu=function(r,e){if(e===void 0&&(e=!1),Vr.has(r)&&!e)return Vr.get(r);if(Lu(r))return Vr.set(r,Ha),Ha;var t=getComputedStyle(r),n=hn(r)&&r.ownerSVGElement&&r.getBBox(),a=!af&&t.boxSizing==="border-box",u=nf.test(t.writingMode||""),i=!n&&qa.test(t.overflowY||""),s=!n&&qa.test(t.overflowX||""),c=n?0:$e(t.paddingTop),f=n?0:$e(t.paddingRight),d=n?0:$e(t.paddingBottom),h=n?0:$e(t.paddingLeft),v=n?0:$e(t.borderTopWidth),D=n?0:$e(t.borderRightWidth),m=n?0:$e(t.borderBottomWidth),B=n?0:$e(t.borderLeftWidth),E=h+f,p=c+d,l=B+D,b=v+m,w=s?r.offsetHeight-b-r.clientHeight:0,F=i?r.offsetWidth-l-r.clientWidth:0,I=a?E+l:0,L=a?p+b:0,$=n?n.width:$e(t.width)-I-F,W=n?n.height:$e(t.height)-L-w,q=$+E+F+l,U=W+p+w+b,j=lr({devicePixelContentBoxSize:Br(Math.round($*devicePixelRatio),Math.round(W*devicePixelRatio),u),borderBoxSize:Br(q,U,u),contentBoxSize:Br($,W,u),contentRect:new Iu(h,c,$,W)});return Vr.set(r,j),j},$u=function(r,e,t){var n=zu(r,t),a=n.borderBoxSize,u=n.contentBoxSize,i=n.devicePixelContentBoxSize;switch(e){case Ir.DEVICE_PIXEL_CONTENT_BOX:return i;case Ir.BORDER_BOX:return a;default:return u}},uf=function(){function r(e){var t=zu(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=lr([t.borderBoxSize]),this.contentBoxSize=lr([t.contentBoxSize]),this.devicePixelContentBoxSize=lr([t.devicePixelContentBoxSize])}return r}(),Wu=function(r){if(Lu(r))return 1/0;for(var e=0,t=r.parentNode;t;)e+=1,t=t.parentNode;return e},sf=function(){var r=1/0,e=[];or.forEach(function(i){if(i.activeTargets.length!==0){var s=[];i.activeTargets.forEach(function(f){var d=new uf(f.target),h=Wu(f.target);s.push(d),f.lastReportedSize=$u(f.target,f.observedBox),h<r&&(r=h)}),e.push(function(){i.callback.call(i.observer,s,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){var a=n[t];a()}return r},Ka=function(r){or.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(a){a.isActive()&&(Wu(a.target)>r?t.activeTargets.push(a):t.skippedTargets.push(a))})})},of=function(){var r=0;for(Ka(r);Ql();)r=sf(),Ka(r);return _l()&&ef(),r>0},Lt,qu=[],lf=function(){return qu.splice(0).forEach(function(r){return r()})},ff=function(r){if(!Lt){var e=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return lf()}).observe(t,n),Lt=function(){t.textContent="".concat(e?e--:e++)}}qu.push(r),Lt()},cf=function(r){ff(function(){requestAnimationFrame(r)})},et=0,df=function(){return!!et},vf=250,hf={attributes:!0,characterData:!0,childList:!0,subtree:!0},Va=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ua=function(r){return r===void 0&&(r=0),Date.now()+r},zt=!1,gf=function(){function r(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return r.prototype.run=function(e){var t=this;if(e===void 0&&(e=vf),!zt){zt=!0;var n=Ua(e);cf(function(){var a=!1;try{a=of()}finally{if(zt=!1,e=n-Ua(),!df())return;a?t.run(1e3):e>0?t.run(e):t.start()}})}},r.prototype.schedule=function(){this.stop(),this.run()},r.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,hf)};document.body?t():Pr.addEventListener("DOMContentLoaded",t)},r.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Va.forEach(function(t){return Pr.addEventListener(t,e.listener,!0)}))},r.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Va.forEach(function(t){return Pr.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},r}(),_t=new gf,Ga=function(r){!et&&r>0&&_t.start(),et+=r,!et&&_t.stop()},Df=function(r){return!hn(r)&&!tf(r)&&getComputedStyle(r).display==="inline"},mf=function(){function r(e,t){this.target=e,this.observedBox=t||Ir.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return r.prototype.isActive=function(){var e=$u(this.target,this.observedBox,!0);return Df(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},r}(),pf=function(){function r(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return r}(),Ur=new WeakMap,Ya=function(r,e){for(var t=0;t<r.length;t+=1)if(r[t].target===e)return t;return-1},Gr=function(){function r(){}return r.connect=function(e,t){var n=new pf(e,t);Ur.set(e,n)},r.observe=function(e,t,n){var a=Ur.get(e),u=a.observationTargets.length===0;Ya(a.observationTargets,t)<0&&(u&&or.push(a),a.observationTargets.push(new mf(t,n&&n.box)),Ga(1),_t.schedule())},r.unobserve=function(e,t){var n=Ur.get(e),a=Ya(n.observationTargets,t),u=n.observationTargets.length===1;a>=0&&(u&&or.splice(or.indexOf(n),1),n.observationTargets.splice(a,1),Ga(-1))},r.disconnect=function(e){var t=this,n=Ur.get(e);n.observationTargets.slice().forEach(function(a){return t.unobserve(e,a.target)}),n.activeTargets.splice(0,n.activeTargets.length)},r}(),Cf=function(){function r(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Gr.connect(this,e)}return r.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Wa(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Gr.observe(this,e,t)},r.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Wa(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Gr.unobserve(this,e)},r.prototype.disconnect=function(){Gr.disconnect(this)},r.toString=function(){return"function ResizeObserver () { [polyfill code] }"},r}();function Bf(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,u;for(u=0;u<n.length;u++)a=n[u],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function ot(r,e){if(r==null)return{};var t=Bf(r,e),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(a=0;a<u.length;a++)n=u[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Lr(r){"@babel/helpers - typeof";return Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(r)}function Ef(r,e){if(Lr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Lr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function bf(r){var e=Ef(r,"string");return Lr(e)==="symbol"?e:String(e)}function ce(r,e,t){return e=bf(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var gn=S.createContext(null),He=()=>{var r=S.useContext(gn);if(!r)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return r},N=Q;function Xa(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Yr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xa(Object(t),!0).forEach(function(n){ce(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Xa(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Af=25,wf=200,Ff=function(){},yf=r=>(r==null?void 0:r.constructor.name)==="DataTransfer";function Of(r){var{editor:e,scheduleOnDOMSelectionChange:t,onDOMSelectionChange:n}=r,a=!1,u=null,i=null,s=null,c=0,f=!1,d=()=>{var j=Qe.get(e);if(Qe.delete(e),j){var{selection:y}=e,R=Ta(e,j);R&&(!y||!A.equals(R,y))&&x.select(e,R)}},h=()=>{var j=Ze.get(e);if(Ze.delete(e),!!j){if(j.at){var y=te.isPoint(j.at)?Zt(e,j.at):Ta(e,j.at);if(!y)return;var R=o.range(e,y);(!e.selection||!A.equals(e.selection,R))&&x.select(e,y)}j.run()}},v=()=>{if(i&&(clearTimeout(i),i=null),s&&(clearTimeout(s),s=null),!w()&&!b()){d();return}a||(a=!0,setTimeout(()=>a=!1)),b()&&(a="action");var j=e.selection&&o.rangeRef(e,e.selection,{affinity:"forward"});Ue.set(e,e.marks),Ff("flush",Ze.get(e),Te.get(e));for(var y=w(),R;R=(k=Te.get(e))===null||k===void 0?void 0:k[0];){var k,J,G=Le.get(e);G!==void 0&&(Le.delete(e),e.marks=G),G&&f===!1&&(f=null);var ne=zl(R);(!e.selection||!A.equals(e.selection,ne))&&x.select(e,ne),R.diff.text?o.insertText(e,R.diff.text):o.deleteFragment(e),Te.set(e,(J=Te.get(e))===null||J===void 0?void 0:J.filter(ae=>{var{id:me}=ae;return me!==R.id})),Nl(e,R)||(y=!1,Ze.delete(e),Ue.delete(e),a="action",Qe.delete(e),t.cancel(),n.cancel(),j==null||j.unref())}var ee=j==null?void 0:j.unref();if(ee&&!Qe.get(e)&&(!e.selection||!A.equals(ee,e.selection))&&x.select(e,ee),b()){h();return}y&&t(),t.flush(),n.flush(),d();var re=Ue.get(e);Ue.delete(e),re!==void 0&&(e.marks=re,e.onChange())},D=j=>{u&&clearTimeout(u),u=setTimeout(()=>{ir.set(e,!1),v()},Af)},m=j=>{ir.set(e,!0),u&&(clearTimeout(u),u=null)},B=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,R=Yt.get(e);if(R){if(w()||y){R.style.display="none";return}R.style.removeProperty("display")}},E=(j,y)=>{var R,k=(R=Te.get(e))!==null&&R!==void 0?R:[];Te.set(e,k);var J=z.leaf(e,j),G=k.findIndex(re=>g.equals(re.path,j));if(G<0){var ne=ku(J.text,y);ne&&k.push({path:j,diff:y,id:c++}),B();return}var ee=Ll(J.text,k[G].diff,y);if(!ee){k.splice(G,1),B();return}k[G]=Yr(Yr({},k[G]),{},{diff:ee})},p=function(y){var{at:R}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f=!1,Qe.delete(e),t.cancel(),n.cancel(),b()&&v(),Ze.set(e,{at:R,run:y}),s=setTimeout(v)},l=j=>{var y;if(i&&(clearTimeout(i),i=null),!Cr.get(e)){var{inputType:R}=j,k=null,J=j.dataTransfer||j.data||void 0;f!==!1&&R!=="insertText"&&R!=="insertCompositionText"&&(f=!1);var[G]=j.getTargetRanges();G&&(k=N.toSlateRange(e,G,{exactMatch:!1,suppressThrow:!0}));var ne=N.getWindow(e),ee=ne.getSelection();if(!k&&ee&&(G=ee,k=N.toSlateRange(e,ee,{exactMatch:!1,suppressThrow:!0})),k=(y=k)!==null&&y!==void 0?y:e.selection,!!k){var re=!0;if(R.startsWith("delete")){if(A.isExpanded(k)){var[ae,me]=A.edges(k),Y=z.leaf(e,ae.path);if(Y.text.length===ae.offset&&me.offset===0){var ie=o.next(e,{at:ae.path,match:H.isText});ie&&g.equals(ie[1],me.path)&&(k={anchor:me,focus:me})}}var pe=R.endsWith("Backward")?"backward":"forward",[Ce,ye]=A.edges(k),[ke,C]=o.leaf(e,Ce.path),P={text:"",start:Ce.offset,end:ye.offset},O=Te.get(e),T=O==null?void 0:O.find(we=>g.equals(we.path,C)),_=T?[T.diff,P]:[P],K=Ru(ke.text,..._);if(K.length===0&&(re=!1),A.isExpanded(k)){if(re&&g.equals(k.anchor.path,k.focus.path)){var oe={path:k.anchor.path,offset:Ce.offset},de=o.range(e,oe,oe);return L(de),E(k.anchor.path,{text:"",end:ye.offset,start:Ce.offset})}return p(()=>o.deleteFragment(e,{direction:pe}),{at:k})}}switch(R){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return p(()=>o.deleteFragment(e),{at:k});case"deleteContent":case"deleteContentForward":{var{anchor:ue}=k;if(re&&A.isCollapsed(k)){var be=z.leaf(e,ue.path);if(ue.offset<be.text.length)return E(ue.path,{text:"",start:ue.offset,end:ue.offset+1})}return p(()=>o.deleteForward(e),{at:k})}case"deleteContentBackward":{var ge,{anchor:Ae}=k,ve=Gt(G)?G.isCollapsed:!!((ge=G)!==null&&ge!==void 0&&ge.collapsed);return re&&ve&&A.isCollapsed(k)&&Ae.offset>0?E(Ae.path,{text:"",start:Ae.offset-1,end:Ae.offset}):p(()=>o.deleteBackward(e),{at:k})}case"deleteEntireSoftLine":return p(()=>{o.deleteBackward(e,{unit:"line"}),o.deleteForward(e,{unit:"line"})},{at:k});case"deleteHardLineBackward":return p(()=>o.deleteBackward(e,{unit:"block"}),{at:k});case"deleteSoftLineBackward":return p(()=>o.deleteBackward(e,{unit:"line"}),{at:k});case"deleteHardLineForward":return p(()=>o.deleteForward(e,{unit:"block"}),{at:k});case"deleteSoftLineForward":return p(()=>o.deleteForward(e,{unit:"line"}),{at:k});case"deleteWordBackward":return p(()=>o.deleteBackward(e,{unit:"word"}),{at:k});case"deleteWordForward":return p(()=>o.deleteForward(e,{unit:"word"}),{at:k});case"insertLineBreak":return p(()=>o.insertSoftBreak(e),{at:k});case"insertParagraph":return p(()=>o.insertBreak(e),{at:k});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(yf(J))return p(()=>N.insertData(e,J),{at:k});var De=J??"";if(Le.get(e)&&(De=De.replace("\uFEFF","")),R==="insertText"&&/.*\n.*\n$/.test(De)&&(De=De.slice(0,-1)),De.includes(`
`))return p(()=>{var we=De.split(`
`);we.forEach((Ee,Fr)=>{Ee&&o.insertText(e,Ee),Fr!==we.length-1&&o.insertSoftBreak(e)})},{at:k});if(g.equals(k.anchor.path,k.focus.path)){var[ze,dr]=A.edges(k),Pe={start:ze.offset,end:dr.offset,text:De};if(De&&f&&R==="insertCompositionText"){var vr=f.start+f.text.search(/\S|$/),Xe=Pe.start+Pe.text.search(/\S|$/);Xe===vr+1&&Pe.end===f.start+f.text.length?(Pe.start-=1,f=null,q()):f=!1}else R==="insertText"?f===null?f=Pe:f&&A.isCollapsed(k)&&f.end+f.text.length===ze.offset?f=Yr(Yr({},f),{},{text:f.text+De}):f=!1:f=!1;if(re){E(ze.path,Pe);return}}return p(()=>o.insertText(e,De),{at:k})}}}}},b=()=>!!Ze.get(e),w=()=>{var j;return!!((j=Te.get(e))!==null&&j!==void 0&&j.length)},F=()=>b()||w(),I=()=>a,L=j=>{Qe.set(e,j),i&&(clearTimeout(i),i=null);var{selection:y}=e;if(j){var R=!y||!g.equals(y.anchor.path,j.anchor.path),k=!y||!g.equals(y.anchor.path.slice(0,-1),j.anchor.path.slice(0,-1));(R&&f||k)&&(f=!1),(R||w())&&(i=setTimeout(v,wf))}},$=()=>{(b()||!w())&&v()},W=j=>{w()||(B(!0),setTimeout(B))},q=()=>{b()||(s=setTimeout(v))},U=j=>{if(!(w()||b())&&j.some(R=>fn(e,R,j))){var y;(y=Tu.get(e))===null||y===void 0||y()}};return{flush:v,scheduleFlush:q,hasPendingDiffs:w,hasPendingAction:b,hasPendingChanges:F,isFlushing:I,handleUserSelect:L,handleCompositionEnd:D,handleCompositionStart:m,handleDOMBeforeInput:l,handleKeyDown:W,handleDomMutations:U,handleInput:$}}function xf(){var r=S.useRef(!1);return S.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),r.current}var Ye=Qr?S.useLayoutEffect:S.useEffect;function Sf(r,e,t){var[n]=S.useState(()=>new MutationObserver(e));Ye(()=>{n.takeRecords()}),S.useEffect(()=>{if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(r.current,t),()=>n.disconnect()},[n,r,t])}var Pf=["node"];function Ja(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Tf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ja(Object(t),!0).forEach(function(n){ce(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ja(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var jf={subtree:!0,childList:!0,characterData:!0},Rf=xe?r=>{var{node:e}=r,t=ot(r,Pf);if(!xe)return null;var n=He(),a=xf(),[u]=S.useState(()=>Of(Tf({editor:n},t)));return Sf(e,u.handleDomMutations,jf),dn.set(n,u.scheduleFlush),a&&u.flush(),u}:()=>null;function Za(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function kf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Za(Object(t),!0).forEach(function(n){ce(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Za(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Nf=r=>{var{isLast:e,leaf:t,parent:n,text:a}=r,u=He(),i=N.findPath(u,a),s=g.parent(i),c=!!t[ju];return u.isVoid(n)?X.createElement($t,{length:z.string(n).length}):t.text===""&&n.children[n.children.length-1]===a&&!u.isInline(n)&&o.string(u,s)===""?X.createElement($t,{isLineBreak:!0,isMarkPlaceholder:c}):t.text===""?X.createElement($t,{isMarkPlaceholder:c}):e&&t.text.slice(-1)===`
`?X.createElement(Qa,{isTrailing:!0,text:t.text}):X.createElement(Qa,{text:t.text})},Qa=r=>{var{text:e,isTrailing:t=!1}=r,n=S.useRef(null),a=()=>"".concat(e??"").concat(t?`
`:""),[u]=S.useState(a);return Ye(()=>{var i=a();n.current&&n.current.textContent!==i&&(n.current.textContent=i)}),X.createElement(Mf,{ref:n},u)},Mf=S.memo(S.forwardRef((r,e)=>X.createElement("span",{"data-slate-string":!0,ref:e},r.children))),$t=r=>{var{length:e=0,isLineBreak:t=!1,isMarkPlaceholder:n=!1}=r,a={"data-slate-zero-width":t?"n":"z","data-slate-length":e};return n&&(a["data-slate-mark-placeholder"]=!0),X.createElement("span",kf({},a),!xe||!t?"\uFEFF":null,t?X.createElement("br",null):null)};function _a(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Hu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_a(Object(t),!0).forEach(function(n){ce(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_a(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var If=xe?300:0;function Lf(r,e){r.current&&(r.current.disconnect(),e&&(r.current=null))}function eu(r){r.current&&(clearTimeout(r.current),r.current=null)}var zf=r=>X.createElement(qf,Hu({},r)),$f=r=>{var{leaf:e,isLast:t,text:n,parent:a,renderPlaceholder:u,renderLeaf:i=zf,leafPosition:s}=r,c=He(),f=S.useRef(null),d=S.useRef(null),[h,v]=S.useState(!1),D=S.useRef(null),m=S.useCallback(b=>{if(Lf(f,b==null),b==null){var w;Yt.delete(c),(w=e.onPlaceholderResize)===null||w===void 0||w.call(e,null)}else{if(Yt.set(c,b),!f.current){var F=window.ResizeObserver||Cf;f.current=new F(()=>{var I;(I=e.onPlaceholderResize)===null||I===void 0||I.call(e,b)})}f.current.observe(b),d.current=b}},[d,e,c]),B=X.createElement(Nf,{isLast:t,leaf:e,parent:a,text:n}),E=!!e[Ar];if(S.useEffect(()=>(E?D.current||(D.current=setTimeout(()=>{v(!0),D.current=null},If)):(eu(D),v(!1)),()=>eu(D)),[E,v]),E&&h){var p={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:ur?"inherit":void 0},contentEditable:!1,ref:m}};B=X.createElement(X.Fragment,null,B,u(p))}var l={"data-slate-leaf":!0};return i({attributes:l,children:B,leaf:e,text:n,leafPosition:s})},Wf=X.memo($f,(r,e)=>e.parent===r.parent&&e.isLast===r.isLast&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&e.text===r.text&&H.equals(e.leaf,r.leaf)&&e.leaf[Ar]===r.leaf[Ar]),qf=r=>{var{attributes:e,children:t}=r;return X.createElement("span",Hu({},e),t)};function Hf(r,e){var[,t]=S.useReducer(f=>f+1,0),n=S.useRef(),a=S.useRef(()=>null),u=S.useRef(null),i;try{if(r!==a.current||n.current){var s=r();e(u.current,s)?i=u.current:i=s}else i=u.current}catch(f){throw n.current&&Kf(f)&&(f.message+=`
The error may be correlated with this previous error:
`.concat(n.current.stack,`

`)),f}a.current=r,u.current=i,n.current=void 0;var c=S.useCallback(()=>{try{var f=a.current();if(e(u.current,f))return;u.current=f}catch(d){d instanceof Error?n.current=d:n.current=new Error(String(d))}t()},[]);return[i,c]}function Kf(r){return r instanceof Error}var Ku=S.createContext({}),Vu=(r,e)=>{var t=He(),{decorate:n,addEventListener:a}=S.useContext(Ku),u=()=>{var f=N.findPath(t,r);return n([r,f])},i=H.isText(r)?Mu:vn,[s,c]=Hf(u,i);return Ye(()=>{var f=a(c);return c(),f},[a,c]),S.useMemo(()=>[...s,...e],[s,e])},Vf=r=>{var e=S.useRef(new Set),t=S.useRef(r);Ye(()=>{t.current=r,e.current.forEach(u=>u())},[r]);var n=S.useCallback(u=>t.current(u),[]),a=S.useCallback(u=>(e.current.add(u),()=>{e.current.delete(u)}),[]);return S.useMemo(()=>({decorate:n,addEventListener:a}),[n,a])};function ru(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Uu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ru(Object(t),!0).forEach(function(n){ce(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ru(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Uf=r=>X.createElement(Yf,Uu({},r)),Gf=r=>{for(var{decorations:e,isLast:t,parent:n,renderPlaceholder:a,renderLeaf:u,renderText:i=Uf,text:s}=r,c=He(),f=S.useRef(null),d=Vu(s,e),h=H.decorations(s,d),v=N.findKey(c,s),D=[],m=0;m<h.length;m++){var{leaf:B,position:E}=h[m];D.push(X.createElement(Wf,{isLast:t&&m===h.length-1,key:"".concat(v.id,"-").concat(m),renderPlaceholder:a,leaf:B,leafPosition:E,text:s,parent:n,renderLeaf:u}))}var p=S.useCallback(b=>{var w=ht.get(c);b?(w==null||w.set(v,b),sr.set(s,b),Mr.set(b,s)):(w==null||w.delete(v),sr.delete(s),f.current&&Mr.delete(f.current)),f.current=b},[f,c,v,s]),l={"data-slate-node":"text",ref:p};return i({text:s,children:D,attributes:l})},Gu=X.memo(Gf,(r,e)=>e.parent===r.parent&&e.isLast===r.isLast&&e.renderText===r.renderText&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&e.text===r.text&&Mu(e.decorations,r.decorations)),Yf=r=>{var{attributes:e,children:t}=r;return X.createElement("span",Uu({},e),t)};function tu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function en(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tu(Object(t),!0).forEach(function(n){ce(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Xf=r=>X.createElement(Qf,en({},r)),Jf=r=>{var{decorations:e,element:t,renderElement:n=Xf,renderChunk:a,renderPlaceholder:u,renderLeaf:i,renderText:s}=r,c=He(),f=oc(),d=c.isInline(t),h=Vu(t,e),v=N.findKey(c,t),D=S.useCallback(w=>{var F=ht.get(c);w?(F==null||F.set(v,w),sr.set(t,w),Mr.set(w,t)):(F==null||F.delete(v),sr.delete(t))},[c,v,t]),m=Ju({decorations:h,node:t,renderElement:n,renderChunk:a,renderPlaceholder:u,renderLeaf:i,renderText:s}),B={"data-slate-node":"element",ref:D};if(d&&(B["data-slate-inline"]=!0),!d&&o.hasInlines(c,t)){var E=z.string(t),p=Bu(E);p==="rtl"&&(B.dir=p)}if(o.isVoid(c,t)){B["data-slate-void"]=!0,!f&&d&&(B.contentEditable=!1);var l=d?"span":"div",[[b]]=z.texts(t);m=X.createElement(l,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},X.createElement(Gu,{renderPlaceholder:u,decorations:[],isLast:!1,parent:t,text:b})),pr.set(b,0),xr.set(b,t)}return n({attributes:B,children:m,element:t})},Zf=X.memo(Jf,(r,e)=>r.element===e.element&&r.renderElement===e.renderElement&&r.renderChunk===e.renderChunk&&r.renderText===e.renderText&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&vn(r.decorations,e.decorations)),Qf=r=>{var{attributes:e,children:t,element:n}=r,a=He(),u=a.isInline(n)?"span":"div";return X.createElement(u,en(en({},e),{},{style:{position:"relative"}}),t)};class _f{constructor(e,t){var{chunkSize:n,debug:a}=t;ce(this,"root",void 0),ce(this,"chunkSize",void 0),ce(this,"debug",void 0),ce(this,"reachedEnd",void 0),ce(this,"pointerChunk",void 0),ce(this,"pointerIndex",void 0),ce(this,"pointerIndexStack",void 0),ce(this,"cachedPointerNode",void 0),this.root=e,this.chunkSize=n,this.debug=a??!1,this.pointerChunk=e,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(e){this.returnToPreviousLeaf(),this.insertAfter(e),this.readLeaf()}insertAfter(e){if(e.length!==0){for(var t=0,n=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var a=this.chunkSize-this.pointerSiblings.length,u=Math.min(a,e.length);if(u>0){var i=e.splice(0,u);this.rawInsertAfter(i,t)}this.exitChunk(),t++}if(e.length!==0){var s=this.savePointer(),c=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var f=this.chunkSize-this.pointerSiblings.length,d=Math.min(f,e.length);if(d>0){var h=e.splice(-d,d);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(h,n),c||(c=this.savePointer())}this.exitChunk(),n++}this.restorePointer(s);var v=Math.max(t,n);this.rawInsertAfter(e,v),c&&this.restorePointer(c),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var e=this.pointerChunk;e.type==="chunk";e=e.parent)this.root.modifiedChunks.add(e)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var e=this.getPointerNode();return this.cachedPointerNode=e,e}getChunkPath(e){for(var t=[],n=e;n.type==="chunk";n=n.parent){var a=n.parent.children.indexOf(n);if(a===-1)return null;t.unshift(a)}return t}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(e){if(e==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:t,node:n}=e,a=t.children.indexOf(n);if(a===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var u=this.getChunkPath(t);if(!u)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=t,this.pointerIndex=a,this.pointerIndexStack=u,this.reachedEnd=!1,this.cachedPointerNode=n,this.validateState()}enterChunk(e){var t;if(((t=this.pointerNode)===null||t===void 0?void 0:t.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=e?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(e){for(;((t=this.pointerNode)===null||t===void 0?void 0:t.type)==="chunk";){var t;this.enterChunk(e)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var e=this.pointerChunk;this.pointerChunk=e.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(e,t){if(e.length!==0){for(var n=(d,h,v)=>{if(v===1)return d;for(var D=[],m=0;m<this.chunkSize;m++){var B=d.slice(m*v,(m+1)*v);if(B.length===0)break;var E={type:"chunk",key:new Su,parent:h,children:[]};E.children=n(B,E,v/this.chunkSize),D.push(E)}return D},a=this.pointerSiblings.length+e.length,u=0,i=this.chunkSize;i<a;i*=this.chunkSize)u++;var s=Math.max(u,t),c=Math.pow(this.chunkSize,s),f=n(e,this.pointerChunk,c);this.pointerSiblings.splice(this.pointerIndex+1,0,...f),this.pointerIndex+=f.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var e=n=>{if(n.type==="chunk"){var{parent:a,children:u}=n;if(!a.children.includes(n))throw new Error("Debug: Chunk ".concat(n.key.id," has an incorrect parent property"));u.forEach(e)}};if(this.root.children.forEach(e),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var t=this.getChunkPath(this.pointerChunk);if(!t)throw new Error("Debug: The pointer chunk is not connected to the root");if(!g.equals(this.pointerIndexStack,t))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(t.join(", "),"]"))}}}class ec{constructor(e,t){ce(this,"editor",void 0),ce(this,"children",void 0),ce(this,"cachedKeys",void 0),ce(this,"pointerIndex",void 0),this.editor=e,this.children=t,this.cachedKeys=new Array(t.length),this.pointerIndex=0}read(e){if(e===1)return[this.children[this.pointerIndex++]];var t=this.remaining(e);return this.pointerIndex+=e,t}remaining(e){return e===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+e)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(e,t){var n=this.children.indexOf(e,this.pointerIndex);if(n>-1)return n-this.pointerIndex;for(var a=this.pointerIndex;a<this.children.length;a++){var u=this.children[a],i=this.findKey(u,a);if(i===t)return a-this.pointerIndex}return-1}toChunkLeaves(e,t){return e.map((n,a)=>({type:"leaf",node:n,key:this.findKey(n,t+a),index:t+a}))}findKey(e,t){var n=this.cachedKeys[t];if(n)return n;var a=N.findKey(this.editor,e);return this.cachedKeys[t]=a,a}}var rc=(r,e)=>{var{chunkTree:t,children:n,chunkSize:a,rerenderChildren:u=[],onInsert:i,onUpdate:s,onIndexChange:c,debug:f}=e;t.modifiedChunks.clear();for(var d=new _f(t,{chunkSize:a,debug:f}),h=new ec(r,n),v,D=function(){var p=h.lookAhead(v.node,v.key),l=p>0&&t.movedNodeKeys.has(v.key);if(p===-1||l)return d.remove(),1;var b=h.pointerIndex,w=h.read(p+1),F=w.pop();if(w.length){var I=h.toChunkLeaves(w,b);d.insertBefore(I),w.forEach(($,W)=>{i==null||i($,b+W)})}var L=h.pointerIndex-1;v.node!==F&&(v.node=F,d.invalidateChunk(),s==null||s(F,L)),v.index!==L&&(v.index=L,c==null||c(F,L)),u.includes(L)&&d.invalidateChunk()};v=d.readLeaf();)D();if(!h.reachedEnd){var m=h.remaining(),B=h.toChunkLeaves(m,h.pointerIndex);d.returnToPreviousLeaf(),d.insertAfter(B),m.forEach((E,p)=>{i==null||i(E,h.pointerIndex+p)})}t.movedNodeKeys.clear()};function nu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function tc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nu(Object(t),!0).forEach(function(n){ce(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):nu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var au=new WeakMap,Yu=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=N.findKey(e,t),u=au.get(a);return u||(u={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},au.set(a,u)),n.reconcile&&rc(e,tc({chunkTree:u,children:t.children},n.reconcile)),u},nc=r=>{var{children:e}=r;return e},Xu=r=>{var{root:e,ancestor:t,renderElement:n,renderChunk:a=nc}=r;return t.children.map(u=>{if(u.type==="chunk"){var i=u.key.id,s=a({highest:t===e,lowest:u.children.some(f=>f.type==="leaf"),attributes:{"data-slate-chunk":!0},children:X.createElement(uc,{root:e,ancestor:u,renderElement:n,renderChunk:a})});return X.createElement(S.Fragment,{key:i},s)}var c=u.node;return n(c,u.index,u.key)})},ac=Xu,uc=X.memo(Xu,(r,e)=>r.root===e.root&&r.renderElement===e.renderElement&&r.renderChunk===e.renderChunk&&!e.root.modifiedChunks.has(e.ancestor)),ic=S.createContext(null),Ju=r=>{var{decorations:e,node:t,renderElement:n,renderChunk:a,renderPlaceholder:u,renderText:i,renderLeaf:s}=r,c=He();Cr.set(c,!1);var f=o.isEditor(t),d=!f&&V.isElement(t)&&!c.isInline(t),h=d&&o.hasInlines(c,t),v=h?null:c.getChunkSize(t),D=!!v,{decorationsByChild:m,childrenToRedecorate:B}=sc(c,t,e);D||t.children.forEach((b,w)=>{pr.set(b,w),xr.set(b,t)});var E=S.useCallback((b,w,F)=>{var I=F??N.findKey(c,b);return X.createElement(ic.Provider,{key:"provider-".concat(I.id),value:b},X.createElement(Zf,{decorations:m[w],element:b,key:I.id,renderElement:n,renderChunk:a,renderPlaceholder:u,renderLeaf:s,renderText:i}))},[c,m,n,a,u,s,i]),p=(b,w)=>{var F=N.findKey(c,b);return X.createElement(Gu,{decorations:m[w],key:F.id,isLast:w===t.children.length-1,parent:t,renderPlaceholder:u,renderLeaf:s,renderText:i,text:b})};if(!D)return t.children.map((b,w)=>H.isText(b)?p(b,w):E(b,w));var l=Yu(c,t,{reconcile:{chunkSize:v,rerenderChildren:B,onInsert:(b,w)=>{pr.set(b,w),xr.set(b,t)},onUpdate:(b,w)=>{pr.set(b,w),xr.set(b,t)},onIndexChange:(b,w)=>{pr.set(b,w)}}});return X.createElement(ac,{root:l,ancestor:l,renderElement:E,renderChunk:a})},sc=(r,e,t)=>{var n=Zl(r,e,t),a=S.useRef(n).current,u=[];a.length=n.length;for(var i=0;i<n.length;i++){var s,c=n[i],f=(s=a[i])!==null&&s!==void 0?s:null;vn(f,c)||(a[i]=c,u.push(i))}return{decorationsByChild:a,childrenToRedecorate:u}},Zu=S.createContext(!1),oc=()=>S.useContext(Zu),Dn=S.createContext({});function lc(){var r=S.useRef(new Set),e=S.useRef(new Set),t=S.useCallback(()=>{r.current.forEach(i=>i())},[]),n=S.useCallback(()=>{e.current.forEach(i=>i()),e.current.clear()},[]),a=S.useCallback(function(i){var{deferred:s=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=s?()=>e.current.add(i):i;return r.current.add(c),()=>{r.current.delete(c)}},[]),u=S.useMemo(()=>({addEventListener:a,flushDeferred:n}),[a,n]);return{selectorContext:u,onChange:t}}function fc(){var{flushDeferred:r}=S.useContext(Dn);Ye(r)}var mn=()=>{var{addEventListener:r}=S.useContext(Dn),[,e]=S.useReducer(t=>t+1,0);if(!r)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return Ye(()=>r(e),[r]),He()};function cc(){var r=He(),e=S.useRef(!1),t=S.useRef(0),n=S.useCallback(()=>{if(!e.current){e.current=!0;var a=N.getWindow(r);a.cancelAnimationFrame(t.current),t.current=a.requestAnimationFrame(()=>{e.current=!1})}},[r]);return S.useEffect(()=>()=>cancelAnimationFrame(t.current),[]),{receivedUserInput:e,onUserInput:n}}var dc=(r,e)=>{var t=[],n=()=>{t=[]},a=i=>{if(e.current){var s=i.filter(c=>fn(r,c,i));t.push(...s)}};function u(){t.length>0&&(t.reverse().forEach(i=>{i.type!=="characterData"&&(i.removedNodes.forEach(s=>{i.target.insertBefore(s,i.nextSibling)}),i.addedNodes.forEach(s=>{i.target.removeChild(s)}))}),n())}return{registerMutations:a,restoreDOM:u,clear:n}},vc={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Qu extends S.Component{constructor(){super(...arguments),ce(this,"context",null),ce(this,"manager",null),ce(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(t.current,vc)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=dc(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,n,a=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(a!=null&&a.length){var u;(u=this.manager)===null||u===void 0||u.registerMutations(a)}return(t=this.mutationObserver)===null||t===void 0||t.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}ce(Qu,"contextType",gn);var hc=xe?Qu:r=>{var{children:e}=r;return X.createElement(X.Fragment,null,e)},gc=S.createContext(!1),Dc=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],mc=["text"];function uu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function We(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uu(Object(t),!0).forEach(function(n){ce(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var pc=r=>X.createElement(X.Fragment,null,Ju(r)),Cc=S.forwardRef((r,e)=>{var t=S.useCallback(C=>X.createElement(Bc,We({},C)),[]),{autoFocus:n,decorate:a=Ec,onDOMBeforeInput:u,placeholder:i,readOnly:s=!1,renderElement:c,renderChunk:f,renderLeaf:d,renderText:h,renderPlaceholder:v=t,scrollSelectionIntoView:D=bc,style:m={},as:B="div",disableDefaultStyles:E=!1}=r,p=ot(r,Dc),l=mn(),[b,w]=S.useState(!1),F=S.useRef(null),I=S.useRef([]),[L,$]=S.useState(),W=S.useRef(!1),{onUserInput:q,receivedUserInput:U}=cc(),[,j]=S.useReducer(C=>C+1,0);Tu.set(l,j),Xt.set(l,s);var y=S.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);S.useEffect(()=>{F.current&&n&&F.current.focus()},[n]);var R=S.useRef(),k=S.useMemo(()=>cl(()=>{if(Cr.get(l)){k();return}var C=N.toDOMNode(l,l),P=C.getRootNode();if(!W.current&&ur&&P instanceof ShadowRoot){W.current=!0;var O=Al();O?document.execCommand("indent"):x.deselect(l),W.current=!1;return}var T=R.current;if((xe||!N.isComposing(l))&&(!y.isUpdatingSelection||T!=null&&T.isFlushing())&&!y.isDraggingInternally){var _=N.findDocumentOrShadowRoot(l),{activeElement:K}=_,oe=N.toDOMNode(l,l),de=Or(_);if(K===oe?(y.latestElement=K,er.set(l,!0)):er.delete(l),!de)return x.deselect(l);var{anchorNode:ue,focusNode:be}=de,ge=N.hasEditableTarget(l,ue)||N.isTargetInsideNonReadonlyVoid(l,ue),Ae=N.hasTarget(l,be);if(ge&&Ae){var ve=N.toSlateRange(l,de,{exactMatch:!1,suppressThrow:!0});ve&&(!N.isComposing(l)&&!(T!=null&&T.hasPendingChanges())&&!(T!=null&&T.isFlushing())?x.select(l,ve):T==null||T.handleUserSelect(ve))}s&&(!ge||!Ae)&&x.deselect(l)}},100),[l,s,y]),J=S.useMemo(()=>ol(k,0),[k]);R.current=Rf({node:F,onDOMSelectionChange:k,scheduleOnDOMSelectionChange:J}),Ye(()=>{var C,P,O;F.current&&(O=ln(F.current))?(Pu.set(l,O),_r.set(l,F.current),sr.set(l,F.current),Mr.set(F.current,l)):sr.delete(l);var{selection:T}=l,_=N.findDocumentOrShadowRoot(l),K=Or(_);if(!(!K||!N.isFocused(l)||(C=R.current)!==null&&C!==void 0&&C.hasPendingAction())){var oe=ge=>{var Ae=K.type!=="None";if(!(!T&&!Ae)){var ve=K.focusNode,De;if(mr&&K.rangeCount>1){var ze=K.getRangeAt(0),dr=K.getRangeAt(K.rangeCount-1);ze.startContainer===ve?De=dr.endContainer:De=ze.startContainer}else De=K.anchorNode;var Pe=_r.get(l),vr=!1;if(Pe.contains(De)&&Pe.contains(ve)&&(vr=!0),Ae&&vr&&T&&!ge){var Xe=N.toSlateRange(l,K,{exactMatch:!0,suppressThrow:!0});if(Xe&&A.equals(Xe,T)){var we;if(!y.hasMarkPlaceholder||(we=De)!==null&&we!==void 0&&(we=we.parentElement)!==null&&we!==void 0&&we.hasAttribute("data-slate-mark-placeholder"))return}}if(T&&!N.hasRange(l,T)){l.selection=N.toSlateRange(l,K,{exactMatch:!1,suppressThrow:!0});return}y.isUpdatingSelection=!0;var Ee=null;try{Ee=T&&N.toDOMRange(l,T)}catch{}return Ee?(N.isComposing(l)&&!xe?K.collapseToEnd():A.isBackward(T)?K.setBaseAndExtent(Ee.endContainer,Ee.endOffset,Ee.startContainer,Ee.startOffset):K.setBaseAndExtent(Ee.startContainer,Ee.startOffset,Ee.endContainer,Ee.endOffset),D(l,Ee)):K.removeAllRanges(),Ee}};K.rangeCount<=1&&oe();var de=((P=R.current)===null||P===void 0?void 0:P.isFlushing())==="action";if(!xe||!de){setTimeout(()=>{y.isUpdatingSelection=!1});return}var ue=null,be=requestAnimationFrame(()=>{if(de){var ge=Ae=>{try{var ve=N.toDOMNode(l,l);ve.focus(),oe(Ae)}catch{}};ge(),ue=setTimeout(()=>{ge(!0),y.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(be),ue&&clearTimeout(ue)}}});var G=S.useCallback(C=>{su(l,C);var P=N.toDOMNode(l,l),O=P.getRootNode();if(W!=null&&W.current&&ur&&O instanceof ShadowRoot){var T=C.getTargetRanges(),_=T[0],K=new window.Range;K.setStart(_.startContainer,_.startOffset),K.setEnd(_.endContainer,_.endOffset);var oe=N.toSlateRange(l,K,{exactMatch:!1,suppressThrow:!1});x.select(l,oe),C.preventDefault(),C.stopImmediatePropagation();return}if(q(),!s&&N.hasEditableTarget(l,C.target)&&!Ac(C,u)){var de;if(R.current)return R.current.handleDOMBeforeInput(C);J.flush(),k.flush();var{selection:ue}=l,{inputType:be}=C,ge=C.dataTransfer||C.data||void 0,Ae=be==="insertCompositionText"||be==="deleteCompositionText";if(Ae&&N.isComposing(l))return;var ve=!1;if(be==="insertText"&&ue&&A.isCollapsed(ue)&&C.data&&C.data.length===1&&/[a-z ]/i.test(C.data)&&ue.anchor.offset!==0&&(ve=!0,l.marks&&(ve=!1),!Cr.get(l))){var De,ze,{anchor:dr}=ue,[Pe,vr]=N.toDOMPoint(l,dr),Xe=(De=Pe.parentElement)===null||De===void 0?void 0:De.closest("a"),we=N.getWindow(l);if(ve&&Xe&&N.hasDOMNode(l,Xe)){var Ee,Fr=we==null?void 0:we.document.createTreeWalker(Xe,NodeFilter.SHOW_TEXT).lastChild();Fr===Pe&&((Ee=Fr.textContent)===null||Ee===void 0?void 0:Ee.length)===vr&&(ve=!1)}if(ve&&Pe.parentElement&&(we==null||(ze=we.getComputedStyle(Pe.parentElement))===null||ze===void 0?void 0:ze.whiteSpace)==="pre"){var pn=o.above(l,{at:dr.path,match:bn=>V.isElement(bn)&&o.isBlock(l,bn)});pn&&z.string(pn[0]).includes("	")&&(ve=!1)}}if((!be.startsWith("delete")||be.startsWith("deleteBy"))&&!Cr.get(l)){var[Cn]=C.getTargetRanges();if(Cn){var Bn=N.toSlateRange(l,Cn,{exactMatch:!1,suppressThrow:!1});if(!ue||!A.equals(ue,Bn)){ve=!1;var En=!Ae&&l.selection&&o.rangeRef(l,l.selection);x.select(l,Bn),En&&Sr.set(l,En)}}}if(Ae)return;if(ve||C.preventDefault(),ue&&A.isExpanded(ue)&&be.startsWith("delete")){var ii=be.endsWith("Backward")?"backward":"forward";o.deleteFragment(l,{direction:ii});return}switch(be){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{o.deleteFragment(l);break}case"deleteContent":case"deleteContentForward":{o.deleteForward(l);break}case"deleteContentBackward":{o.deleteBackward(l);break}case"deleteEntireSoftLine":{o.deleteBackward(l,{unit:"line"}),o.deleteForward(l,{unit:"line"});break}case"deleteHardLineBackward":{o.deleteBackward(l,{unit:"block"});break}case"deleteSoftLineBackward":{o.deleteBackward(l,{unit:"line"});break}case"deleteHardLineForward":{o.deleteForward(l,{unit:"block"});break}case"deleteSoftLineForward":{o.deleteForward(l,{unit:"line"});break}case"deleteWordBackward":{o.deleteBackward(l,{unit:"word"});break}case"deleteWordForward":{o.deleteForward(l,{unit:"word"});break}case"insertLineBreak":o.insertSoftBreak(l);break;case"insertParagraph":{o.insertBreak(l);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{be==="insertFromComposition"&&N.isComposing(l)&&(w(!1),ir.set(l,!1)),(ge==null?void 0:ge.constructor.name)==="DataTransfer"?N.insertData(l,ge):typeof ge=="string"&&(ve?I.current.push(()=>o.insertText(l,ge)):o.insertText(l,ge));break}}var gt=(de=Sr.get(l))===null||de===void 0?void 0:de.unref();Sr.delete(l),gt&&(!l.selection||!A.equals(l.selection,gt))&&x.select(l,gt)}},[l,k,q,u,s,J]),ne=S.useCallback(C=>{C==null?(k.cancel(),J.cancel(),_r.delete(l),sr.delete(l),F.current&&Je&&F.current.removeEventListener("beforeinput",G)):Je&&C.addEventListener("beforeinput",G),F.current=C,typeof e=="function"?e(C):e&&(e.current=C)},[k,J,l,G,e]);Ye(()=>{var C=N.getWindow(l),P=T=>{var{target:_}=T,K=_ instanceof HTMLElement?_:null,oe=K==null?void 0:K.tagName;oe==="INPUT"||oe==="TEXTAREA"||J()};C.document.addEventListener("selectionchange",P);var O=()=>{y.isDraggingInternally=!1};return C.document.addEventListener("dragend",O),C.document.addEventListener("drop",O),()=>{C.document.removeEventListener("selectionchange",P),C.document.removeEventListener("dragend",O),C.document.removeEventListener("drop",O)}},[J,y]);var ee=a([l,[]]),re=Vf(a),ae=i&&l.children.length===1&&Array.from(z.texts(l)).length===1&&z.string(l)===""&&!b,me=S.useCallback(C=>{if(C&&ae){var P;$((P=C.getBoundingClientRect())===null||P===void 0?void 0:P.height)}else $(void 0)},[ae]);if(ae){var Y=o.start(l,[]);ee.push({[Ar]:!0,placeholder:i,onPlaceholderResize:me,anchor:Y,focus:Y})}var{marks:ie}=l;if(y.hasMarkPlaceholder=!1,l.selection&&A.isCollapsed(l.selection)&&ie){var{anchor:pe}=l.selection,Ce=z.leaf(l,pe.path),ye=ot(Ce,mc);if(!H.equals(Ce,ie,{loose:!0})){y.hasMarkPlaceholder=!0;var ke=Object.fromEntries(Object.keys(ye).map(C=>[C,null]));ee.push(We(We(We({[ju]:!0},ke),ie),{},{anchor:pe,focus:pe}))}}return S.useEffect(()=>{setTimeout(()=>{var{selection:C}=l;if(C){var{anchor:P}=C,O=z.leaf(l,P.path);if(ie&&!H.equals(O,ie,{loose:!0})){Le.set(l,ie);return}}Le.delete(l)})}),fc(),X.createElement(Zu.Provider,{value:s},X.createElement(gc.Provider,{value:b},X.createElement(Ku.Provider,{value:re},X.createElement(hc,{node:F,receivedUserInput:U},X.createElement(B,We(We({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},p),{},{spellCheck:Je||!Qr?p.spellCheck:!1,autoCorrect:Je||!Qr?p.autoCorrect:"false",autoCapitalize:Je||!Qr?p.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:ne,style:We(We({},E?{}:We({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},L?{minHeight:L}:{})),m),onBeforeInput:S.useCallback(C=>{if(!Je&&!s&&!Oe(C,p.onBeforeInput)&&N.hasSelectableTarget(l,C.target)&&(C.preventDefault(),!N.isComposing(l))){var P=C.data;o.insertText(l,P)}},[p.onBeforeInput,l,s]),onInput:S.useCallback(C=>{if(!Oe(C,p.onInput)){if(R.current){R.current.handleInput();return}for(var P of I.current)P();I.current=[],N.isFocused(l)||su(l,C.nativeEvent)}},[p.onInput,l]),onBlur:S.useCallback(C=>{if(!(s||y.isUpdatingSelection||!N.hasSelectableTarget(l,C.target)||Oe(C,p.onBlur))){var P=N.findDocumentOrShadowRoot(l);if(y.latestElement!==P.activeElement){var{relatedTarget:O}=C,T=N.toDOMNode(l,l);if(O!==T&&!(Ne(O)&&O.hasAttribute("data-slate-spacer"))){if(O!=null&&rr(O)&&N.hasDOMNode(l,O)){var _=N.toSlateNode(l,O);if(V.isElement(_)&&!l.isVoid(_))return}if(ur){var K=Or(P);K==null||K.removeAllRanges()}er.delete(l)}}}},[s,y.isUpdatingSelection,y.latestElement,l,p.onBlur]),onClick:S.useCallback(C=>{if(N.hasTarget(l,C.target)&&!Oe(C,p.onClick)&&rr(C.target)){var P=N.toSlateNode(l,C.target),O=N.findPath(l,P);if(!o.hasPath(l,O)||z.get(l,O)!==P)return;if(C.detail===Hl&&O.length>=1){var T=O;if(!(V.isElement(P)&&o.isBlock(l,P))){var _,K=o.above(l,{match:ve=>V.isElement(ve)&&o.isBlock(l,ve),at:O});T=(_=K==null?void 0:K[1])!==null&&_!==void 0?_:O.slice(0,1)}var oe=o.range(l,T);x.select(l,oe);return}if(s)return;var de=o.start(l,O),ue=o.end(l,O),be=o.void(l,{at:de}),ge=o.void(l,{at:ue});if(be&&ge&&g.equals(be[1],ge[1])){var Ae=o.range(l,de);x.select(l,Ae)}}},[l,p.onClick,s]),onCompositionEnd:S.useCallback(C=>{if(N.hasSelectableTarget(l,C.target)){var P;if(N.isComposing(l)&&Promise.resolve().then(()=>{w(!1),ir.set(l,!1)}),(P=R.current)===null||P===void 0||P.handleCompositionEnd(C),Oe(C,p.onCompositionEnd)||xe)return;if(!ur&&!Sl&&!Fl&&!Tl&&!Pl&&C.data){var O=Le.get(l);Le.delete(l),O!==void 0&&(Ue.set(l,l.marks),l.marks=O),o.insertText(l,C.data);var T=Ue.get(l);Ue.delete(l),T!==void 0&&(l.marks=T)}}},[p.onCompositionEnd,l]),onCompositionUpdate:S.useCallback(C=>{N.hasSelectableTarget(l,C.target)&&!Oe(C,p.onCompositionUpdate)&&(N.isComposing(l)||(w(!0),ir.set(l,!0)))},[p.onCompositionUpdate,l]),onCompositionStart:S.useCallback(C=>{if(N.hasSelectableTarget(l,C.target)){var P;if((P=R.current)===null||P===void 0||P.handleCompositionStart(C),Oe(C,p.onCompositionStart)||xe)return;w(!0);var{selection:O}=l;if(O&&A.isExpanded(O)){o.deleteFragment(l);return}}},[p.onCompositionStart,l]),onCopy:S.useCallback(C=>{N.hasSelectableTarget(l,C.target)&&!Oe(C,p.onCopy)&&!iu(C)&&(C.preventDefault(),N.setFragmentData(l,C.clipboardData,"copy"))},[p.onCopy,l]),onCut:S.useCallback(C=>{if(!s&&N.hasSelectableTarget(l,C.target)&&!Oe(C,p.onCut)&&!iu(C)){C.preventDefault(),N.setFragmentData(l,C.clipboardData,"cut");var{selection:P}=l;if(P)if(A.isExpanded(P))o.deleteFragment(l);else{var O=z.parent(l,P.anchor.path);o.isVoid(l,O)&&x.delete(l)}}},[s,l,p.onCut]),onDragOver:S.useCallback(C=>{if(N.hasTarget(l,C.target)&&!Oe(C,p.onDragOver)){var P=N.toSlateNode(l,C.target);V.isElement(P)&&o.isVoid(l,P)&&C.preventDefault()}},[p.onDragOver,l]),onDragStart:S.useCallback(C=>{if(!s&&N.hasTarget(l,C.target)&&!Oe(C,p.onDragStart)){var P=N.toSlateNode(l,C.target),O=N.findPath(l,P),T=V.isElement(P)&&o.isVoid(l,P)||o.void(l,{at:O,voids:!0});if(T){var _=o.range(l,O);x.select(l,_)}y.isDraggingInternally=!0,N.setFragmentData(l,C.dataTransfer,"drag")}},[s,l,p.onDragStart,y]),onDrop:S.useCallback(C=>{if(!s&&N.hasTarget(l,C.target)&&!Oe(C,p.onDrop)){C.preventDefault();var P=l.selection,O=N.findEventRange(l,C),T=C.dataTransfer;x.select(l,O),y.isDraggingInternally&&P&&!A.equals(P,O)&&!o.void(l,{at:O,voids:!0})&&x.delete(l,{at:P}),N.insertData(l,T),N.isFocused(l)||N.focus(l)}},[s,l,p.onDrop,y]),onDragEnd:S.useCallback(C=>{!s&&y.isDraggingInternally&&p.onDragEnd&&N.hasTarget(l,C.target)&&p.onDragEnd(C)},[s,y,p,l]),onFocus:S.useCallback(C=>{if(!s&&!y.isUpdatingSelection&&N.hasEditableTarget(l,C.target)&&!Oe(C,p.onFocus)){var P=N.toDOMNode(l,l),O=N.findDocumentOrShadowRoot(l);if(y.latestElement=O.activeElement,mr&&C.target!==P){P.focus();return}er.set(l,!0)}},[s,y,l,p.onFocus]),onKeyDown:S.useCallback(C=>{if(!s&&N.hasEditableTarget(l,C.target)){var P;(P=R.current)===null||P===void 0||P.handleKeyDown(C);var{nativeEvent:O}=C;if(N.isComposing(l)&&O.isComposing===!1&&(ir.set(l,!1),w(!1)),Oe(C,p.onKeyDown)||N.isComposing(l))return;var{selection:T}=l,_=l.children[T!==null?T.focus.path[0]:0],K=Bu(z.string(_))==="rtl";if(he.isRedo(O)){C.preventDefault();var oe=l;typeof oe.redo=="function"&&oe.redo();return}if(he.isUndo(O)){C.preventDefault();var de=l;typeof de.undo=="function"&&de.undo();return}if(he.isMoveLineBackward(O)){C.preventDefault(),x.move(l,{unit:"line",reverse:!0});return}if(he.isMoveLineForward(O)){C.preventDefault(),x.move(l,{unit:"line"});return}if(he.isExtendLineBackward(O)){C.preventDefault(),x.move(l,{unit:"line",edge:"focus",reverse:!0});return}if(he.isExtendLineForward(O)){C.preventDefault(),x.move(l,{unit:"line",edge:"focus"});return}if(he.isMoveBackward(O)){C.preventDefault(),T&&A.isCollapsed(T)?x.move(l,{reverse:!K}):x.collapse(l,{edge:K?"end":"start"});return}if(he.isMoveForward(O)){C.preventDefault(),T&&A.isCollapsed(T)?x.move(l,{reverse:K}):x.collapse(l,{edge:K?"start":"end"});return}if(he.isMoveWordBackward(O)){C.preventDefault(),T&&A.isExpanded(T)&&x.collapse(l,{edge:"focus"}),x.move(l,{unit:"word",reverse:!K});return}if(he.isMoveWordForward(O)){C.preventDefault(),T&&A.isExpanded(T)&&x.collapse(l,{edge:"focus"}),x.move(l,{unit:"word",reverse:K});return}if(Je){if((xu||ur)&&T&&(he.isDeleteBackward(O)||he.isDeleteForward(O))&&A.isCollapsed(T)){var ue=z.parent(l,T.anchor.path);if(V.isElement(ue)&&o.isVoid(l,ue)&&(o.isInline(l,ue)||o.isBlock(l,ue))){C.preventDefault(),o.deleteBackward(l,{unit:"block"});return}}}else{if(he.isBold(O)||he.isItalic(O)||he.isTransposeCharacter(O)){C.preventDefault();return}if(he.isSoftBreak(O)){C.preventDefault(),o.insertSoftBreak(l);return}if(he.isSplitBlock(O)){C.preventDefault(),o.insertBreak(l);return}if(he.isDeleteBackward(O)){C.preventDefault(),T&&A.isExpanded(T)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l);return}if(he.isDeleteForward(O)){C.preventDefault(),T&&A.isExpanded(T)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l);return}if(he.isDeleteLineBackward(O)){C.preventDefault(),T&&A.isExpanded(T)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l,{unit:"line"});return}if(he.isDeleteLineForward(O)){C.preventDefault(),T&&A.isExpanded(T)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l,{unit:"line"});return}if(he.isDeleteWordBackward(O)){C.preventDefault(),T&&A.isExpanded(T)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l,{unit:"word"});return}if(he.isDeleteWordForward(O)){C.preventDefault(),T&&A.isExpanded(T)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l,{unit:"word"});return}}}},[s,l,p.onKeyDown]),onPaste:S.useCallback(C=>{!s&&N.hasEditableTarget(l,C.target)&&!Oe(C,p.onPaste)&&(!Je||ml(C.nativeEvent)||ur)&&(C.preventDefault(),N.insertData(l,C.clipboardData))},[s,l,p.onPaste])}),X.createElement(pc,{decorations:ee,node:l,renderElement:c,renderChunk:f,renderPlaceholder:v,renderLeaf:d,renderText:h}))))))}),Bc=r=>{var{attributes:e,children:t}=r;return X.createElement("span",We({},e),t,xe&&X.createElement("br",null))},Ec=()=>[],bc=(r,e)=>{if(e.getBoundingClientRect&&(!r.selection||r.selection&&A.isCollapsed(r.selection))){var t=e.startContainer.parentElement,n=e.getBoundingClientRect(),a=n.width===0&&n.height===0&&n.x===0&&n.y===0;if(a){var u=t.getBoundingClientRect(),i=u.width>0||u.height>0;if(i)return}t.getBoundingClientRect=e.getBoundingClientRect.bind(e),hl(t,{scrollMode:"if-needed"}),delete t.getBoundingClientRect}},Oe=(r,e)=>{if(!e)return!1;var t=e(r);return t??(r.isDefaultPrevented()||r.isPropagationStopped())},iu=r=>rr(r.target)&&(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement),Ac=(r,e)=>{if(!e)return!1;var t=e(r);return t??r.defaultPrevented},su=(r,e)=>{var t=r;if(e.inputType==="historyUndo"&&typeof t.undo=="function"){t.undo();return}if(e.inputType==="historyRedo"&&typeof t.redo=="function"){t.redo();return}},wc=S.createContext(!1),_u=parseInt(X.version.split(".")[0],10),Fc=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],yc=r=>{var{editor:e,children:t,onChange:n,onSelectionChange:a,onValueChange:u,initialValue:i}=r,s=ot(r,Fc);X.useState(()=>{if(!z.isNodeList(i))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Be.stringify(i)));if(!o.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Be.stringify(e)));e.children=i,Object.assign(e,s)});var{selectorContext:c,onChange:f}=lc(),d=S.useCallback(D=>{var m;switch(n&&n(e.children),D==null||(m=D.operation)===null||m===void 0?void 0:m.type){case"set_selection":a==null||a(e.selection);break;default:u==null||u(e.children)}f()},[e,f,n,a,u]);S.useEffect(()=>(Jt.set(e,d),()=>{Jt.set(e,()=>{})}),[e,d]);var[h,v]=S.useState(N.isFocused(e));return S.useEffect(()=>{v(N.isFocused(e))},[e]),Ye(()=>{var D=()=>v(N.isFocused(e));return _u>=17?(document.addEventListener("focusin",D),document.addEventListener("focusout",D),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",D)}):(document.addEventListener("focus",D,!0),document.addEventListener("blur",D,!0),()=>{document.removeEventListener("focus",D,!0),document.removeEventListener("blur",D,!0)})},[]),X.createElement(Dn.Provider,{value:c},X.createElement(gn.Provider,{value:e},X.createElement(wc.Provider,{value:h},t)))},Oc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e;n=ql(n,t);var{onChange:a,apply:u}=n;return n.getChunkSize=()=>null,n.onChange=i=>{var s=_u<18?oi.unstable_batchedUpdates:c=>c();s(()=>{a(i)})},n.apply=i=>{if(i.type==="move_node"){var s=z.parent(n,i.path),c=!!n.getChunkSize(s);if(c){var f=z.get(n,i.path),d=Yu(n,s),h=N.findKey(n,f);d.movedNodeKeys.add(h)}}u(i)},n};const ou={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+`":"code","mod+shift+.":"block-quote","mod+shift+1":"heading-one","mod+shift+2":"heading-two"},xc=["numbered-list","bulleted-list"],Sc=["left","center","right","justify"],Pc=({value:r,onChange:e,placeholder:t="Escribe tu contenido aquí...",className:n=""})=>{const[a]=S.useState(()=>Uo(Oc(Ho()))),u=S.useCallback(c=>M.jsx(jc,{...c}),[]),i=S.useCallback(c=>M.jsx(Rc,{...c}),[]),s=c=>{e&&e(c)};return M.jsx("div",{className:`border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-900 shadow-sm ${n}`,children:M.jsxs(yc,{editor:a,initialValue:r||Nc,onChange:s,children:[M.jsx(Tc,{}),M.jsx("div",{className:"p-4",children:M.jsx(Cc,{renderElement:u,renderLeaf:i,placeholder:t,spellCheck:!0,autoFocus:!0,className:"min-h-[200px] focus:outline-none text-gray-900 dark:text-gray-100",onKeyDown:c=>{for(const f in ou)if(ci(f,c)){c.preventDefault();const d=ou[f];["heading-one","heading-two","block-quote"].includes(d)?ti(a,d):ni(a,d)}}})})]})})},Tc=()=>M.jsxs("div",{className:"flex flex-wrap items-center px-4 py-3 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 gap-1",children:[M.jsxs("div",{className:"flex items-center border-r border-gray-300 dark:border-gray-600 pr-2 mr-2",children:[M.jsx(Xr,{format:"bold",icon:"format_bold",tooltip:"Negrita (Ctrl+B)"}),M.jsx(Xr,{format:"italic",icon:"format_italic",tooltip:"Cursiva (Ctrl+I)"}),M.jsx(Xr,{format:"underline",icon:"format_underlined",tooltip:"Subrayado (Ctrl+U)"}),M.jsx(Xr,{format:"code",icon:"code",tooltip:"Código (Ctrl+`)"})]}),M.jsxs("div",{className:"flex items-center border-r border-gray-300 dark:border-gray-600 pr-2 mr-2",children:[M.jsx(Ve,{format:"heading-one",icon:"looks_one",tooltip:"Encabezado 1"}),M.jsx(Ve,{format:"heading-two",icon:"looks_two",tooltip:"Encabezado 2"}),M.jsx(Ve,{format:"block-quote",icon:"format_quote",tooltip:"Cita"})]}),M.jsxs("div",{className:"flex items-center border-r border-gray-300 dark:border-gray-600 pr-2 mr-2",children:[M.jsx(Ve,{format:"numbered-list",icon:"format_list_numbered",tooltip:"Lista numerada"}),M.jsx(Ve,{format:"bulleted-list",icon:"format_list_bulleted",tooltip:"Lista con viñetas"})]}),M.jsxs("div",{className:"flex items-center",children:[M.jsx(Ve,{format:"left",icon:"format_align_left",tooltip:"Alinear izquierda"}),M.jsx(Ve,{format:"center",icon:"format_align_center",tooltip:"Centrar"}),M.jsx(Ve,{format:"right",icon:"format_align_right",tooltip:"Alinear derecha"}),M.jsx(Ve,{format:"justify",icon:"format_align_justify",tooltip:"Justificar"})]})]}),ei=({active:r,children:e,onMouseDown:t,tooltip:n,...a})=>M.jsx("button",{...a,type:"button",onMouseDown:t,title:n,className:`
        inline-flex items-center justify-center w-8 h-8 rounded-md transition-all duration-150 ease-in-out
        hover:bg-gray-200 dark:hover:bg-gray-700
        focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-1 dark:focus:ring-offset-gray-800
        ${r?"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}
      `,children:e}),ri=({children:r})=>M.jsx("span",{className:"material-symbols-rounded text-lg select-none",children:r}),Ve=({format:r,icon:e,tooltip:t})=>{const n=mn();return M.jsx(ei,{active:ai(n,r,rt(r)?"align":"type"),onMouseDown:a=>{a.preventDefault(),ti(n,r)},tooltip:t,children:M.jsx(ri,{children:e})})},Xr=({format:r,icon:e,tooltip:t})=>{const n=mn();return M.jsx(ei,{active:ui(n,r),onMouseDown:a=>{a.preventDefault(),ni(n,r)},tooltip:t,children:M.jsx(ri,{children:e})})},ti=(r,e)=>{const t=ai(r,e,rt(e)?"align":"type"),n=lu(e);x.unwrapNodes(r,{match:u=>!o.isEditor(u)&&V.isElement(u)&&lu(u.type)&&!rt(e),split:!0});let a;if(rt(e)?a={align:t?void 0:e}:a={type:t?"paragraph":n?"list-item":e},x.setNodes(r,a),!t&&n){const u={type:e,children:[]};x.wrapNodes(r,u)}},ni=(r,e)=>{ui(r,e)?o.removeMark(r,e):o.addMark(r,e,!0)},ai=(r,e,t="type")=>{const{selection:n}=r;if(!n)return!1;const[a]=Array.from(o.nodes(r,{at:o.unhangRange(r,n),match:u=>!o.isEditor(u)&&V.isElement(u)?t==="align"&&kc(u)?u.align===e:u.type===e:!1}));return!!a},ui=(r,e)=>{const t=o.marks(r);return t?t[e]===!0:!1},jc=({attributes:r,children:e,element:t})=>{const n="focus:outline-none",a=t.align?`text-${t.align}`:"";switch(t.type){case"block-quote":return M.jsx("blockquote",{className:`border-l-4 border-gray-300 dark:border-gray-600 pl-4 py-2 my-4 bg-gray-50 dark:bg-gray-800/50 italic text-gray-700 dark:text-gray-300 rounded-md text-base ${a} ${n}`,...r,children:e});case"bulleted-list":return M.jsx("ul",{className:`list-disc list-inside pl-6 space-y-1 text-base mb-4 ${a} ${n}`,...r,children:e});case"numbered-list":return M.jsx("ol",{className:`list-decimal list-inside pl-6 space-y-1 text-base mb-4 ${a} ${n}`,...r,children:e});case"list-item":return M.jsx("li",{className:`mb-1 ${a} ${n}`,...r,children:e});case"heading-one":return M.jsx("h1",{className:`text-3xl font-bold mb-4 text-gray-900 dark:text-gray-100 ${a} ${n}`,...r,children:e});case"heading-two":return M.jsx("h2",{className:`text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100 ${a} ${n}`,...r,children:e});default:return M.jsx("p",{className:`text-base leading-relaxed mb-4 ${a} ${n}`,...r,children:e})}},Rc=({attributes:r,children:e,leaf:t})=>{let n=e;return t.code&&(n=M.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 text-rose-600 dark:text-rose-400 font-mono text-sm px-1 py-0.5 rounded",children:n})),t.bold&&(n=M.jsx("strong",{className:"font-semibold",children:n})),t.italic&&(n=M.jsx("em",{className:"italic",children:n})),t.underline&&(n=M.jsx("u",{className:"underline",children:n})),M.jsx("span",{...r,children:n})},rt=r=>Sc.includes(r),lu=r=>xc.includes(r),kc=r=>"align"in r,Nc=[{type:"paragraph",children:[{text:"Este es un editor de texto "},{text:"enriquecido",bold:!0},{text:" con soporte para "},{text:"formato",italic:!0},{text:" avanzado y "},{text:"código",code:!0},{text:"."}]},{type:"paragraph",children:[{text:"Puedes usar atajos de teclado como Ctrl+B para "},{text:"negrita",bold:!0},{text:", o crear bloques especiales como citas:"}]},{type:"block-quote",children:[{text:"Una cita inspiradora para empezar."}]},{type:"paragraph",align:"center",children:[{text:"¡Pruébalo por ti mismo!"}]}],Mc=S.forwardRef(function({className:e="",isFocused:t=!1,rows:n=4,...a},u){const i=S.useRef(null);return S.useImperativeHandle(u,()=>({focus:()=>{var s;return(s=i.current)==null?void 0:s.focus()}})),S.useEffect(()=>{var s;t&&((s=i.current)==null||s.focus())},[t]),M.jsx("textarea",{...a,rows:n,className:"rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-rose-500 dark:focus:ring-rose-500 "+e,ref:i})});function Vc({categories:r,article:e}){const{data:t,setData:n,processing:a,errors:u,setError:i,clearErrors:s}=si({title:(e==null?void 0:e.title)||"",slug:(e==null?void 0:e.slug)||"",introduction:(e==null?void 0:e.introduction)||"",image:(e==null?void 0:e.image)||"",body:(e==null?void 0:e.body)||"",status:(e==null?void 0:e.status)||1,category_id:(e==null?void 0:e.category_id)||""});S.useEffect(()=>{const f=t.title.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"");n("slug",f)},[t.title]);const c=f=>{f.preventDefault(),s(),e?An.post(route("admin.articles.update",e),{...t,_method:"put"},{onSuccess:()=>$r.success("Artículo actualizado exitosamente"),onError:d=>{$r.error("Hubo un problema al actualizar el artículo"),i(d)}}):An.post(route("admin.articles.store"),t,{onSuccess:()=>$r.success("Artículo creado exitosamente"),onError:d=>{$r.error("Hubo un problema al crear el artículo"),i(d)}})};return M.jsx(li,{header:"Crear Artículo",children:M.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-xl p-6",children:M.jsxs("form",{onSubmit:c,className:"space-y-6",children:[M.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:gap-8",children:[M.jsxs("div",{className:"w-full md:w-1/2",children:[M.jsx(tr,{htmlFor:"title",children:"Título"}),M.jsx(Dt,{type:"text",id:"title",value:t.title,autoComplete:"off",onChange:f=>n("title",f.target.value),className:"w-full",required:!0}),u.title&&M.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.title})]}),M.jsxs("div",{className:"w-full md:w-1/2",children:[M.jsx(tr,{htmlFor:"slug",children:"Slug"}),M.jsx(Dt,{type:"text",id:"slug",value:t.slug,className:"w-full bg-black/5 dark:bg-gray-100/10 select-none",disabled:!0}),u.slug&&M.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.slug})]})]}),M.jsxs("div",{className:"w-full",children:[M.jsx(tr,{htmlFor:"image",children:"Imagen (URL)"}),M.jsx(Dt,{type:"text",id:"image",autoComplete:"off",value:t.image,onChange:f=>n("image",f.target.value),className:"w-full",placeholder:"https://example.com/image.jpg",required:!0}),u.image&&M.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.image}),(e==null?void 0:e.image)&&M.jsx("div",{className:"mt-2 w-full justify-center flex",children:M.jsx("img",{src:e.image,alt:"Imagen del artículo",className:"w-1/3 h-auto rounded-md"})})]}),M.jsxs("div",{className:"w-full",children:[M.jsx(tr,{htmlFor:"introduction",children:"Introducción"}),M.jsx(Mc,{id:"introduction",value:t.introduction,onChange:f=>n("introduction",f.target.value),className:"w-full",rows:"3"}),u.introduction&&M.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.introduction})]}),M.jsxs("div",{className:"w-full",children:[M.jsx(tr,{htmlFor:"body",children:"Cuerpo del Artículo"}),M.jsx(Pc,{value:t.body,onChange:f=>{n("body",f)}}),u.body&&M.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.body})]}),M.jsxs("div",{className:"flex flex-col md:flex-row md:gap-8 w-full",children:[M.jsxs("div",{className:"w-full md:w-1/2",children:[M.jsx(tr,{htmlFor:"status",children:"Estado"}),M.jsxs(wn,{id:"status",value:t.status,className:"w-full",onChange:f=>n("status",f.target.value),children:[M.jsx("option",{value:"1",children:"Público"}),M.jsx("option",{value:"0",children:"Privado"})]}),u.status&&M.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.status})]}),M.jsxs("div",{className:"w-full md:w-1/2",children:[M.jsx(tr,{htmlFor:"category_id",children:"Categoría"}),M.jsxs(wn,{id:"category_id",value:t.category_id,onChange:f=>n("category_id",f.target.value),className:"w-full",required:!0,children:[M.jsx("option",{value:"",children:"Seleccione una categoría"}),r.map(f=>M.jsx("option",{value:f.id,children:f.name},f.id))]}),u.category_id&&M.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.category_id})]})]}),M.jsx("div",{className:"flex items-center justify-end",children:M.jsx("button",{type:"submit",disabled:a,className:"inline-flex items-center px-4 py-2 bg-rose-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-rose-500 active:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150",children:e?"Editar Artículo":"Crear Artículo"})})]})})})}export{Vc as default};
